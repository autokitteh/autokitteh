import{e as j,r as U}from"./react-BA7A5rMr.js";import{_ as Oe,a as l,b as C,c as g}from"./tslib-BsY54_Ss.js";import{c as M}from"./reselect-BpA7o8Qg.js";import{c as Aa,a as ja,u as _a,b as L}from"./@reduxjs-DHgDNI8M.js";import{p as Oa}from"./libphonenumber-js-9GTBq5YE.js";import{j as Dn}from"./jwt-decode-n2YvGtFc.js";import{a as bs}from"./js-cookie-4rbwSJ8g.js";import{F as ys,i as Ci,B as Ri}from"./@fingerprintjs-DX3Lt_zq.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="c14f4e77-554e-47a7-8066-dc7ece233365",t._sentryDebugIdIdentifier="sentry-dbid-c14f4e77-554e-47a7-8066-dc7ece233365")}catch{}})();var Ea=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};Ea.SENTRY_RELEASE={id:"4c3a1ae8dc42bf185695e0bf1856df97a1321ad7"};const Wa="modulepreload",La=function(t){return"/"+t},zs={},ye=function(e,i,s){let n=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),r=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.all(i.map(a=>{if(a=La(a),a in zs)return;zs[a]=!0;const d=a.endsWith(".css"),c=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":Wa,d||(u.as="script"),u.crossOrigin="",u.href=a,r&&u.setAttribute("nonce",r),document.head.appendChild(u),d)return new Promise((h,v)=>{u.addEventListener("load",h),u.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${a}`)))})}))}return n.then(()=>e()).catch(o=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o})};var Ta={exchange:"/v1/auth/accesskey/exchange"},it={verify:"/v1/auth/otp/verify",signIn:"/v1/auth/otp/signin",signUp:"/v1/auth/otp/signup",update:{email:"/v1/auth/otp/update/email",phone:"/v1/auth/otp/update/phone"},signUpOrIn:"/v1/auth/otp/signup-in"},st={verify:"/v1/auth/magiclink/verify",signIn:"/v1/auth/magiclink/signin",signUp:"/v1/auth/magiclink/signup",update:{email:"/v1/auth/magiclink/update/email",phone:"/v1/auth/magiclink/update/phone"},signUpOrIn:"/v1/auth/magiclink/signup-in"},ot={verify:"/v1/auth/enchantedlink/verify",signIn:"/v1/auth/enchantedlink/signin",signUp:"/v1/auth/enchantedlink/signup",session:"/v1/auth/enchantedlink/pending-session",update:{email:"/v1/auth/enchantedlink/update/email"},signUpOrIn:"/v1/auth/enchantedlink/signup-in"},xt={start:"/v1/auth/oauth/authorize",exchange:"/v1/auth/oauth/exchange",startNative:"v1/auth/oauth/native/start",finishNative:"v1/auth/oauth/native/finish"},Gs={start:"/v1/auth/saml/authorize",exchange:"/v1/auth/saml/exchange"},Ki={verify:"/v1/auth/totp/verify",signUp:"/v1/auth/totp/signup",update:"/v1/auth/totp/update"},si={signIn:"/v1/auth/notp/whatsapp/signin",signUp:"/v1/auth/notp/whatsapp/signup",signUpOrIn:"/v1/auth/notp/whatsapp/signup-in",session:"/v1/auth/notp/pending-session"},De={signUp:{start:"/v1/auth/webauthn/signup/start",finish:"/v1/auth/webauthn/signup/finish"},signIn:{start:"/v1/auth/webauthn/signin/start",finish:"/v1/auth/webauthn/signin/finish"},signUpOrIn:{start:"/v1/auth/webauthn/signup-in/start"},update:{start:"v1/auth/webauthn/update/start",finish:"/v1/auth/webauthn/update/finish"}},nt={signUp:"/v1/auth/password/signup",signIn:"/v1/auth/password/signin",sendReset:"/v1/auth/password/reset",update:"/v1/auth/password/update",replace:"/v1/auth/password/replace",policy:"/v1/auth/password/policy"},Pa="/v1/auth/refresh",Da="/v1/auth/tenant/select",Na="/v1/auth/logout",Fa="/v1/auth/logoutall",qa="/v1/auth/me",Ba="/v1/auth/me/history",Js={start:"/v1/flow/start",next:"/v1/flow/next"};const Nn="<region>",Ka=`https://api.${Nn}descope.com`,Zs=1e3,Xs=6e5,Ha="dct",Qs=()=>{const t={};return{headers(e){const i=typeof e.entries=="function"?Object.fromEntries(e.entries()):e;return t.Headers=JSON.stringify(i),this},body(e){return t.Body=e,this},url(e){return t.Url=e.toString(),this},method(e){return t.Method=e,this},title(e){return t.Title=e,this},status(e){return t.Status=e,this},build:()=>Object.keys(t).flatMap(e=>t[e]?[`${e!=="Title"?`${e}: `:""}${t[e]}`]:[]).join(`
`)}},Va=(t,e)=>{const i=(s=>async(...n)=>{const o=await s(...n),r=await o.text();return o.text=()=>Promise.resolve(r),o.json=()=>Promise.resolve(JSON.parse(r)),o.clone=()=>o,o})(e||fetch);return i||t==null||t.warn("Fetch is not defined, you will not be able to send http requests, if you are running in a test, make sure fetch is defined globally"),t?async(...s)=>{if(!i)throw Error("Cannot send http request, fetch is not defined, if you are running in a test, make sure fetch is defined globally");t.log((o=>Qs().title("Request").url(o[0]).method(o[1].method).headers(o[1].headers).body(o[1].body).build())(s));const n=await i(...s);return t[n.ok?"log":"error"](await(async o=>{const r=await o.text();return Qs().title("Response").url(o.url.toString()).status(`${o.status} ${o.statusText}`).headers(o.headers).body(r).build()})(n)),n}:i};var Ke;(function(t){t.get="GET",t.delete="DELETE",t.post="POST",t.put="PUT",t.patch="PATCH"})(Ke||(Ke={}));const Ys=({path:t,baseUrl:e,queryParams:i,projectId:s})=>{const n=s.slice(1,-27);e=e.replace(Nn,n?n+".":"");let o=t?`${e.replace(/\/$/,"")}/${t==null?void 0:t.replace(/^\//,"")}`:e;if(i){o=`${o}?`;const r=Object.keys(i);r.forEach((a,d)=>{o=`${o}${a}=${i[a]}${d===r.length-1?"":"&"}`})}return o},za=(...t)=>new Headers(t.reduce((e,i)=>((n=>Array.isArray(n)?n:n instanceof Headers?Array.from(n.entries()):n?Object.entries(n):[])(i).reduce((n,[o,r])=>(e[o]=r,e),e),e),{})),Ga={"Content-Type":"application/json"},Ja=(t,e="")=>{let i=t;return e&&(i=i+":"+e),{Authorization:`Bearer ${i}`}},Za=t=>{try{t=JSON.parse(t)}catch{return!1}return typeof t=="object"&&t!==null},Xa=({baseUrl:t,projectId:e,baseConfig:i,logger:s,hooks:n,cookiePolicy:o,fetch:r})=>{const a=Va(s,r),d=async c=>{var u;const h=n!=null&&n.beforeRequest?n.beforeRequest(c):c,{path:v,body:f,headers:p,queryParams:m,method:b,token:R}=h,I=(q=>q===void 0?void 0:JSON.stringify(q))(f),P={headers:za(Ja(e,R),{"x-descope-sdk-name":"core-js","x-descope-sdk-version":"2.24.4"},(i==null?void 0:i.baseHeaders)||{},Za(I)?Ga:{},p),method:b,body:I};o!==null&&(P.credentials=o||"include");const D=await a(Ys({path:v,baseUrl:t,queryParams:m,projectId:e}),P);if(n!=null&&n.afterRequest&&await n.afterRequest(c,D==null?void 0:D.clone()),n==null?void 0:n.transformResponse){const q=await D.json(),N=(((u=D.headers)===null||u===void 0?void 0:u.get("set-cookie"))||"").split(";").reduce((Q,Y)=>{const[te,oe]=Y.split("=");return Object.assign(Object.assign({},Q),{[te.trim()]:oe})},{}),_=Object.assign(Object.assign({},D),{json:()=>Promise.resolve(q),cookies:N});return _.clone=()=>_,n.transformResponse(_)}return D};return{get:(c,{headers:u,queryParams:h,token:v}={})=>d({path:c,headers:u,queryParams:h,body:void 0,method:Ke.get,token:v}),post:(c,u,{headers:h,queryParams:v,token:f}={})=>d({path:c,headers:h,queryParams:v,body:u,method:Ke.post,token:f}),patch:(c,u,{headers:h,queryParams:v,token:f}={})=>d({path:c,headers:h,queryParams:v,body:u,method:Ke.patch,token:f}),put:(c,u,{headers:h,queryParams:v,token:f}={})=>d({path:c,headers:h,queryParams:v,body:u,method:Ke.put,token:f}),delete:(c,{headers:u,queryParams:h,token:v}={})=>d({path:c,headers:u,queryParams:h,body:void 0,method:Ke.delete,token:v}),hooks:n,buildUrl:(c,u)=>Ys({projectId:e,baseUrl:t,path:c,queryParams:u})}};var Qa={TOO_MANY_REQUESTS:429};function Fn(t,e,i){var s;let n=ws(t);if(e){if(!(n!=null&&n.tenants)&&(n==null?void 0:n[Ha])===e)return(n==null?void 0:n[i])||[];n=(s=n==null?void 0:n.tenants)===null||s===void 0?void 0:s[e]}const o=n==null?void 0:n[i];return Array.isArray(o)?o:[]}function ws(t){if(typeof t!="string"||!t)throw new Error("Invalid token provided");return Dn(t)}function Ya(t){const{exp:e}=ws(t);return new Date().getTime()/1e3>e}function el(t){let e=ws(t);const i=Object.keys(e==null?void 0:e.tenants);return Array.isArray(i)?i:[]}function tl(t,e){return Fn(t,e,"permissions")}function il(t,e){return Fn(t,e,"roles")}const he=(...t)=>t.join("/").replace(/\/{2,}/g,"/");async function $(t,e){var i;const s=await t,n={code:s.status,ok:s.ok,response:s},o=await s.clone().json();return s.ok?n.data=o:(n.error=o,s.status===Qa.TOO_MANY_REQUESTS&&Object.assign(n.error,{retryAfter:Number.parseInt((i=s.headers)===null||i===void 0?void 0:i.get("retry-after"))||0})),n}const mt=(t,e)=>(i=e)=>s=>!t(s)&&i.replace("{val}",s),qn=(...t)=>({validate:e=>(t.forEach(i=>{const s=i(e);if(s)throw new Error(s)}),!0)}),Bn=t=>e=>t.test(e),sl=Bn(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/),ol=Bn(/^\+[1-9]{1}[0-9]{3,14}$/),nl=(t,e)=>i=>qn(...e).validate(((s,n,o)=>{const r=(Array.isArray(n)?n.join("."):String(n)).replace(/\[\\?("|')?(\w|d)+\\?("|')?\]/g,(u,h,v)=>"."+v).split("."),a=r.length;let d=0,c=s===Object(s)?s:void 0;for(;c!=null&&d<a;)c=c[r[d++]];return d&&d===a&&c!==void 0?c:o})(i,t)),rl=mt(sl,'"{val}" is not a valid email'),al=mt(ol,'"{val}" is not a valid phone number'),ll=mt((eo=1,t=>t.length>=eo),"Minimum length is 1");var eo;const bt=mt(t=>typeof t=="string","Input is not a string"),dl=mt(t=>t===void 0,"Input is defined"),Kn=(Hi=[bt(),dl()],to="Input is not a string or undefined",(t=to)=>e=>{const i=Hi.filter(s=>s(e));return!(i.length<Hi.length)&&(t?t.replace("{val}",e):i.join(" OR "))});var Hi,to;const A=(...t)=>e=>(...i)=>(t.forEach((s,n)=>qn(...s).validate(i[n])),e(...i)),Hn=t=>[bt(`"${t}" must be a string`)],O=t=>[bt(`"${t}" must be a string`),ll(`"${t}" must not be empty`)],ks=t=>[bt(`"${t}" must be a string`),rl()],Vn=t=>[bt(`"${t}" must be a string`),al()],cl=A(O("accessKey")),ul=t=>({exchange:cl((e,i)=>$(t.post(Ta.exchange,{loginOptions:i},{token:e})))}),St=(t,e,i)=>(e.forEach(s=>{const n=s.split(".");let o=n.shift(),r=t;for(;n.length>0;){if(r=r[o],!o||!r)throw Error(`Invalid path "${s}", "${o}" is missing or has no value`);o=n.shift()}if(typeof r[o]!="function")throw Error(`"${s}" is not a function`);const a=r[o];r[o]=i(a)}),t),zn=({pollingIntervalMs:t=1e3,timeoutMs:e=6e5}={})=>({pollingIntervalMs:Math.max(t||Zs,Zs),timeoutMs:Math.min(e||Xs,Xs)});var Ge,ns;(function(t){t.sms="sms",t.voice="voice",t.whatsapp="whatsapp"})(Ge||(Ge={})),function(t){t.email="email"}(ns||(ns={}));const Me=Object.assign(Object.assign({},Ge),ns);var io;(function(t){t.waiting="waiting",t.running="running",t.completed="completed",t.failed="failed"})(io||(io={}));const Gn=O("loginId"),hl=A(O("token")),Vi=A(Gn),gl=A(O("pendingRef")),vl=A(Gn,ks("email")),pl=t=>({verify:hl(e=>$(t.post(ot.verify,{token:e}))),signIn:Vi((e,i,s,n)=>$(t.post(he(ot.signIn,Me.email),{loginId:e,URI:i,loginOptions:s},{token:n}))),signUpOrIn:Vi((e,i,s)=>$(t.post(he(ot.signUpOrIn,Me.email),{loginId:e,URI:i,loginOptions:s}))),signUp:Vi((e,i,s,n)=>$(t.post(he(ot.signUp,Me.email),{loginId:e,URI:i,user:s,loginOptions:n}))),waitForSession:gl((e,i)=>new Promise(s=>{const{pollingIntervalMs:n,timeoutMs:o}=zn(i);let r;const a=setInterval(async()=>{const d=await t.post(ot.session,{pendingRef:e});d.ok&&(clearInterval(a),r&&clearTimeout(r),s($(Promise.resolve(d))))},n);r=setTimeout(()=>{s({error:{errorDescription:`Session polling timeout exceeded: ${o}ms`,errorCode:"0"},ok:!1}),clearInterval(a)},o)})),update:{email:vl((e,i,s,n,o)=>$(t.post(ot.update.email,Object.assign({loginId:e,email:i,URI:s},o),{token:n})))}}),fl=A(O("flowId")),ml=A(O("executionId"),O("stepId"),O("interactionId")),bl=t=>({start:fl((e,i,s,n,o,r,a)=>$(t.post(Js.start,{flowId:e,options:i,conditionInteractionId:s,interactionId:n,version:o,componentsVersion:r,input:a}))),next:ml((e,i,s,n,o,r)=>$(t.post(Js.next,{executionId:e,stepId:i,interactionId:s,version:n,componentsVersion:o,input:r})))}),Cs=O("loginId"),yl=A(O("token")),zi=A(Cs),wl=A(Cs,Vn("phone")),kl=A(Cs,ks("email")),Gi=Object.keys(Me).filter(t=>t!==Ge.voice),Cl=t=>({verify:yl(e=>$(t.post(st.verify,{token:e}))),signIn:Gi.reduce((e,i)=>Object.assign(Object.assign({},e),{[i]:zi((s,n,o,r)=>$(t.post(he(st.signIn,i),{loginId:s,URI:n,loginOptions:o},{token:r})))}),{}),signUp:Gi.reduce((e,i)=>Object.assign(Object.assign({},e),{[i]:zi((s,n,o,r)=>$(t.post(he(st.signUp,i),{loginId:s,URI:n,user:o,loginOptions:r})))}),{}),signUpOrIn:Gi.reduce((e,i)=>Object.assign(Object.assign({},e),{[i]:zi((s,n,o)=>$(t.post(he(st.signUpOrIn,i),{loginId:s,URI:n,loginOptions:o})))}),{}),update:{email:kl((e,i,s,n,o)=>$(t.post(st.update.email,Object.assign({loginId:e,email:i,URI:s},o),{token:n}))),phone:Object.keys(Ge).filter(e=>e!==Ge.voice).reduce((e,i)=>Object.assign(Object.assign({},e),{[i]:wl((s,n,o,r,a)=>$(t.post(he(st.update.phone,i),Object.assign({loginId:s,phone:n,URI:o},a),{token:r})))}),{})}});var rs;(function(t){t.facebook="facebook",t.github="github",t.google="google",t.microsoft="microsoft",t.gitlab="gitlab",t.apple="apple",t.discord="discord",t.linkedin="linkedin",t.slack="slack"})(rs||(rs={}));const Rl=A(O("code")),$l=t=>({start:Object.assign((e,i,s,n)=>$(t.post(xt.start,s||{},{queryParams:Object.assign({provider:e},i&&{redirectURL:i}),token:n})),Object.keys(rs).reduce((e,i)=>Object.assign(Object.assign({},e),{[i]:(s,n,o)=>$(t.post(xt.start,n||{},{queryParams:Object.assign({provider:i},s&&{redirectURL:s}),token:o}))}),{})),exchange:Rl(e=>$(t.post(xt.exchange,{code:e}))),startNative:(e,i,s)=>$(t.post(xt.startNative,{provider:e,loginOptions:i,implicit:s})),finishNative:(e,i,s,n,o)=>$(t.post(xt.finishNative,{provider:e,stateId:i,user:s,code:n,idToken:o}))}),Ei=O("loginId"),Il=A(Ei,O("code")),Ji=A(Ei),xl=A(Ei,Vn("phone")),Sl=A(Ei,ks("email")),Ml=t=>({verify:Object.keys(Me).reduce((e,i)=>Object.assign(Object.assign({},e),{[i]:Il((s,n)=>$(t.post(he(it.verify,i),{code:n,loginId:s})))}),{}),signIn:Object.keys(Me).reduce((e,i)=>Object.assign(Object.assign({},e),{[i]:Ji((s,n,o)=>$(t.post(he(it.signIn,i),{loginId:s,loginOptions:n},{token:o})))}),{}),signUp:Object.keys(Me).reduce((e,i)=>Object.assign(Object.assign({},e),{[i]:Ji((s,n,o)=>$(t.post(he(it.signUp,i),{loginId:s,user:n,loginOptions:o})))}),{}),signUpOrIn:Object.keys(Me).reduce((e,i)=>Object.assign(Object.assign({},e),{[i]:Ji((s,n)=>$(t.post(he(it.signUpOrIn,i),{loginId:s,loginOptions:n})))}),{}),update:{email:Sl((e,i,s,n)=>$(t.post(it.update.email,Object.assign({loginId:e,email:i},n),{token:s}))),phone:Object.keys(Ge).reduce((e,i)=>Object.assign(Object.assign({},e),{[i]:xl((s,n,o,r)=>$(t.post(he(it.update.phone,i),Object.assign({loginId:s,phone:n},r),{token:o})))}),{})}}),Ul=A(O("tenant")),Al=A(O("code")),jl=t=>({start:Ul((e,i,s,n)=>$(t.post(Gs.start,s||{},{queryParams:{tenant:e,redirectURL:i},token:n}))),exchange:Al(e=>$(t.post(Gs.exchange,{code:e})))}),Rs=O("loginId"),_l=A(Rs,O("code")),Ol=A(Rs),El=A(Rs),Wl=t=>({signUp:Ol((e,i)=>$(t.post(Ki.signUp,{loginId:e,user:i}))),verify:_l((e,i,s,n)=>$(t.post(Ki.verify,{loginId:e,code:i,loginOptions:s},{token:n}))),update:El((e,i)=>$(t.post(Ki.update,{loginId:e},{token:i})))}),Wi=O("loginId"),Jn=O("newPassword"),so=A(Wi,O("password")),Ll=A(Wi),Tl=A(Wi,Jn),Pl=A(Wi,O("oldPassword"),Jn),Dl=t=>({signUp:so((e,i,s,n)=>$(t.post(nt.signUp,{loginId:e,password:i,user:s,loginOptions:n}))),signIn:so((e,i,s)=>$(t.post(nt.signIn,{loginId:e,password:i,loginOptions:s}))),sendReset:Ll((e,i,s)=>$(t.post(nt.sendReset,{loginId:e,redirectUrl:i,templateOptions:s}))),update:Tl((e,i,s)=>$(t.post(nt.update,{loginId:e,newPassword:i},{token:s}))),replace:Pl((e,i,s)=>$(t.post(nt.replace,{loginId:e,oldPassword:i,newPassword:s}))),policy:()=>$(t.get(nt.policy))}),Nl=Hn("loginId"),$s=O("loginId"),Li=O("origin"),Fl=A($s,Li,O("name")),ql=A($s,Li),Bl=A(Nl,Li),Kl=A($s,Li,O("token")),Zi=A(O("transactionId"),O("response")),Hl=t=>({signUp:{start:Fl((e,i,s)=>$(t.post(De.signUp.start,{user:{loginId:e,name:s},origin:i}))),finish:Zi((e,i)=>$(t.post(De.signUp.finish,{transactionId:e,response:i})))},signIn:{start:Bl((e,i,s,n)=>$(t.post(De.signIn.start,{loginId:e,origin:i,loginOptions:s},{token:n}))),finish:Zi((e,i)=>$(t.post(De.signIn.finish,{transactionId:e,response:i})))},signUpOrIn:{start:ql((e,i)=>$(t.post(De.signUpOrIn.start,{loginId:e,origin:i})))},update:{start:Kl((e,i,s)=>$(t.post(De.update.start,{loginId:e,origin:i},{token:s}))),finish:Zi((e,i)=>$(t.post(De.update.finish,{transactionId:e,response:i})))}}),Vl=Hn("loginId"),Xi=A(Vl),zl=A(O("pendingRef")),Gl=t=>({signUpOrIn:Xi((e,i)=>$(t.post(si.signUpOrIn,{loginId:e,loginOptions:i}))),signUp:Xi((e,i,s)=>$(t.post(si.signUp,{loginId:e,user:i,loginOptions:s}))),signIn:Xi((e,i,s)=>$(t.post(si.signIn,{loginId:e,loginOptions:i},{token:s}))),waitForSession:zl((e,i)=>new Promise(s=>{const{pollingIntervalMs:n,timeoutMs:o}=zn(i);let r;const a=setInterval(async()=>{const d=await t.post(si.session,{pendingRef:e});d.ok&&(clearInterval(a),r&&clearTimeout(r),s($(Promise.resolve(d))))},n);r=setTimeout(()=>{s({error:{errorDescription:`Session polling timeout exceeded: ${o}ms`,errorCode:"0"},ok:!1}),clearInterval(a)},o)}))}),oi=A(O("token")),Mt=A([Kn('"token" must be string or undefined')]);var oo,no,Jl=A([(oo="projectId",no=O("projectId"),mt(nl(oo,no))())])((t=>e=>{var i;return t(Object.assign(Object.assign({},e),{hooks:{beforeRequest:s=>{var n;const o=[].concat(((n=e.hooks)===null||n===void 0?void 0:n.beforeRequest)||[]);return o==null?void 0:o.reduce((r,a)=>a(r),s)},afterRequest:async(s,n)=>{var o;const r=[].concat(((o=e.hooks)===null||o===void 0?void 0:o.afterRequest)||[]);r.length!=0&&(await Promise.allSettled(r==null?void 0:r.map(a=>a(s,n==null?void 0:n.clone())))).forEach(a=>{var d;return a.status==="rejected"&&((d=e.logger)===null||d===void 0?void 0:d.error(a.reason))})},transformResponse:(i=e.hooks)===null||i===void 0?void 0:i.transformResponse}}))})(({projectId:t,logger:e,baseUrl:i,hooks:s,cookiePolicy:n,baseHeaders:o={},fetch:r})=>{return a=Xa({baseUrl:i||Ka,projectId:t,logger:e,hooks:s,cookiePolicy:n,baseConfig:{baseHeaders:o},fetch:r}),{accessKey:ul(a),otp:Ml(a),magicLink:Cl(a),enchantedLink:pl(a),oauth:$l(a),saml:jl(a),totp:Wl(a),notp:Gl(a),webauthn:Hl(a),password:Dl(a),flow:bl(a),refresh:Mt((d,c)=>$(a.post(Pa,{},{token:d,queryParams:c}))),selectTenant:A([bt("tenantId")],[Kn('"token" must be string or undefined')])((d,c)=>$(a.post(Da,{tenant:d},{token:c}))),logout:Mt(d=>$(a.post(Na,{},{token:d}))),logoutAll:Mt(d=>$(a.post(Fa,{},{token:d}))),me:Mt(d=>$(a.get(qa,{token:d}))),history:Mt(d=>$(a.get(Ba,{token:d}))),isJwtExpired:oi(Ya),getTenants:oi(el),getJwtPermissions:oi(tl),getJwtRoles:oi(il),httpClient:a};var a})),Zl=Object.assign(Jl,{DeliveryMethods:Me});const Ut=(t,e)=>{var i;return["beforeRequest","afterRequest"].reduce((s,n)=>{var o;return s[n]=[].concat(((o=t.hooks)===null||o===void 0?void 0:o[n])||[]).concat((e==null?void 0:e[n])||[]),s},(i=t.hooks)!==null&&i!==void 0?i:t.hooks={}),t},ci=async t=>{if(!(t!=null&&t.ok))return{};const e=await(t==null?void 0:t.clone().json());return(e==null?void 0:e.authInfo)||e||{}},ro=async t=>{const e=await ci(t);return(e==null?void 0:e.user)||(e!=null&&e.hasOwnProperty("userId")?e:void 0)},Is=typeof localStorage<"u",ni=(t,e)=>Is&&(localStorage==null?void 0:localStorage.setItem(t,e)),Ti=t=>Is&&(localStorage==null?void 0:localStorage.getItem(t)),$i=t=>Is&&(localStorage==null?void 0:localStorage.removeItem(t)),Ne=(...t)=>{console.debug(...t)},vt=typeof window<"u",Qi=Math.pow(2,31)-1,ft="DS",xs="DSR";function Xl(t,e,{cookiePath:i,cookieDomain:s,cookieExpiration:n}){if(e){const o=new Date(1e3*n),r=function(a){const d=window.location.hostname.split("."),c=a.split(".");return d.slice(-c.length).join(".")===a}(s);bs.set(t,e,{path:i,domain:r?s:void 0,expires:o,sameSite:"Strict",secure:!0})}}function ri(t=""){return Ti(`${t}${xs}`)||""}function ao(t=""){return bs.get(ft)||Ti(`${t}${ft}`)||""}function Zn(t=""){$i(`${t}${xs}`),$i(`${t}${ft}`),bs.remove(ft)}const Ql=vt&&(localStorage==null?void 0:localStorage.getItem("fingerprint.endpoint.url"))||"https://api.descope.com",Ss="fp",Xn=(t=!1)=>{const e=localStorage.getItem(Ss);if(!e)return null;const i=JSON.parse(e);return new Date().getTime()>i.expiry&&!t?null:i.value},Qn=async(t,e=Ql)=>{try{if(Xn())return;const i=(Date.now().toString(36)+Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2)).substring(0,27),s=new URL(e);s.pathname="/fXj8gt3x8VulJBna/x96Emn69oZwcd7I6";const n=new URL(e);n.pathname="/fXj8gt3x8VulJBna/w78aRZnnDZ3Aqw0I";const o=n.toString()+"?apiKey=<apiKey>&version=<version>&loaderVersion=<loaderVersion>",r=ys({apiKey:t,endpoint:[s.toString(),Ci],scriptUrlPattern:[o,Ri]}),a=await r,{requestId:d}=await a.get({linkedId:i});(u=>{const h={value:u,expiry:new Date().getTime()+864e5};localStorage.setItem(Ss,JSON.stringify(h))})(((u,h)=>({vsid:u,vrid:h}))(i,d))}catch(i){console.warn("Could not load fingerprint",i)}},Yl=()=>{localStorage.removeItem(Ss)},ed=t=>{const e=Xn(!0);return e&&t.body&&(t.body.fpData=e),t},Ms="dls_last_user_login_id",Us="dls_last_user_display_name",as=()=>Ti(Ms),ls=()=>Ti(Us),td=t=>async(...e)=>{var i;e[1]=e[1]||{};const[,s={}]=e,n=as(),o=ls();return n&&((i=s.lastAuth)!==null&&i!==void 0||(s.lastAuth={}),s.lastAuth.loginId=n,s.lastAuth.name=o),await t(...e)},id=t=>e=>async(...i)=>{const s=await e(...i);return t||($i(Ms),$i(Us)),s};function lo(){const t=[];return{pub:e=>{t.forEach(i=>i(e))},sub:e=>{const i=t.push(e)-1;return()=>t.splice(i,1)}}}const sd=t=>e=>async(...i)=>{const s=await e(...i);return Zn(t),s};async function ai(t){const e=function(n){var o;const r=JSON.parse(n);return r.publicKey.challenge=Pt(r.publicKey.challenge),r.publicKey.user.id=Pt(r.publicKey.user.id),(o=r.publicKey.excludeCredentials)===null||o===void 0||o.forEach(a=>{a.id=Pt(a.id)}),r}(t);return s=await navigator.credentials.create(e),JSON.stringify({id:s.id,rawId:Ee(s.rawId),type:s.type,response:{attestationObject:Ee(s.response.attestationObject),clientDataJSON:Ee(s.response.clientDataJSON)}});var s}async function Yi(t){const e=er(t);return tr(await navigator.credentials.get(e))}async function od(t,e){const i=er(t);return i.signal=e.signal,i.mediation="conditional",tr(await navigator.credentials.get(i))}async function Yn(t=!1){if(!vt)return Promise.resolve(!1);const e=!!(window.PublicKeyCredential&&navigator.credentials&&navigator.credentials.create&&navigator.credentials.get);return e&&t&&PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable?PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable():e}function er(t){var e;const i=JSON.parse(t);return i.publicKey.challenge=Pt(i.publicKey.challenge),(e=i.publicKey.allowCredentials)===null||e===void 0||e.forEach(s=>{s.id=Pt(s.id)}),i}function tr(t){return JSON.stringify({id:t.id,rawId:Ee(t.rawId),type:t.type,response:{authenticatorData:Ee(t.response.authenticatorData),clientDataJSON:Ee(t.response.clientDataJSON),signature:Ee(t.response.signature),userHandle:t.response.userHandle?Ee(t.response.userHandle):void 0}})}function Pt(t){const e=t.replace(/_/g,"/").replace(/-/g,"+");return Uint8Array.from(atob(e),i=>i.charCodeAt(0)).buffer}function Ee(t){return btoa(String.fromCharCode.apply(null,new Uint8Array(t))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}var co,nd=(co=t=>({async signUp(e,i){const s=await t.webauthn.signUp.start(e,window.location.origin,i);if(!s.ok)return s;const n=await ai(s.data.options);return await t.webauthn.signUp.finish(s.data.transactionId,n)},async signIn(e){const i=await t.webauthn.signIn.start(e,window.location.origin);if(!i.ok)return i;const s=await Yi(i.data.options);return await t.webauthn.signIn.finish(i.data.transactionId,s)},async signUpOrIn(e){var i;const s=await t.webauthn.signUpOrIn.start(e,window.location.origin);if(!s.ok)return s;if(!((i=s.data)===null||i===void 0)&&i.create){const n=await ai(s.data.options);return await t.webauthn.signUp.finish(s.data.transactionId,n)}{const n=await Yi(s.data.options);return await t.webauthn.signIn.finish(s.data.transactionId,n)}},async update(e,i){const s=await t.webauthn.update.start(e,window.location.origin,i);if(!s.ok)return s;const n=await ai(s.data.options);return await t.webauthn.update.finish(s.data.transactionId,n)},helpers:{create:ai,get:Yi,isSupported:Yn,conditional:od}}),(...t)=>{const e=co(...t);return Object.assign(e.signUp,t[0].webauthn.signUp),Object.assign(e.signIn,t[0].webauthn.signIn),Object.assign(e.signUpOrIn,t[0].webauthn.signUpOrIn),Object.assign(e.update,t[0].webauthn.update),e});const rd={config:"/fedcm/config"},ad=(t,e)=>({async oneTap(i,s,n,o){const r=i??"google",a=await t.oauth.startNative(r,n,!0);if(!a.ok)return a;const{clientId:d,stateId:c,nonce:u}=a.data,h=await async function(){return new Promise((v,f)=>{if(window.google)return void v(window.google.accounts.id);let p=document.getElementById("google-gsi-client-script");p||(p=document.createElement("script"),document.head.appendChild(p),p.async=!0,p.defer=!0,p.id="google-gsi-client-script",p.src="https://accounts.google.com/gsi/client"),p.onload=function(){window.google?v(window.google.accounts.id):f("Failed to load Google GSI client script - not loaded properly")},p.onerror=function(){f("Failed to load Google GSI client script - failed to load")}})}();return new Promise(v=>{var f,p;h.initialize(Object.assign(Object.assign({},s),{itp_support:(f=s==null?void 0:s.itp_support)===null||f===void 0||f,use_fedcm_for_prompt:(p=s==null?void 0:s.use_fedcm_for_prompt)===null||p===void 0||p,client_id:d,callback:m=>{v(t.oauth.finishNative(r,c,"","",m.credential))},nonce:u})),h.prompt(m=>{m!=null&&m.isSkippedMoment()&&(o==null||o())})})},async launch(i){var s;const n={identity:{context:i||"signin",providers:[{configURL:t.httpClient.buildUrl(e+rd.config),clientId:e}]}},o=await((s=navigator.credentials)===null||s===void 0?void 0:s.get(n));return t.refresh(o.token)},isSupported:()=>vt&&"IdentityCredential"in window});var ld=t=>Object.assign(Object.assign({},t.flow),{start:async(...e)=>{const i=await Yn(),s=Object.assign(Object.assign({location:window.location.href},e[1]),{deviceInfo:{webAuthnSupport:i},startOptionsVersion:1});return e[1]=s,t.flow.start(...e)}});const Je=function(...t){return e=>t.reduce((i,s)=>s(i),e)}(t=>e=>{var{fpKey:i,fpLoad:s}=e,n=Oe(e,["fpKey","fpLoad"]);return vt?(i&&s&&Qn(i).catch(()=>null),t(Ut(n,{beforeRequest:ed}))):t(n)},t=>e=>{var{autoRefresh:i}=e,s=Oe(e,["autoRefresh"]);if(!i)return t(s);const{clearAllTimers:n,setTimer:o}=(()=>{const c=[];return{clearAllTimers:()=>{for(;c.length;)clearTimeout(c.pop())},setTimer:(u,h)=>{c.push(setTimeout(u,h))}}})();let r,a;vt&&document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&new Date>r&&(Ne("Expiration time passed, refreshing session"),d.refresh(ri()||a))});const d=t(Ut(s,{afterRequest:async(c,u)=>{const{refreshJwt:h,sessionJwt:v}=await ci(u);if((u==null?void 0:u.status)===401)Ne("Received 401, canceling all timers"),n();else if(v){if(r=(b=>{try{const R=Dn(b);if(R.exp)return new Date(1e3*R.exp)}catch{return null}})(v),!r)return void Ne("Could not extract expiration time from session token");a=h;let p=((f=r)?f.getTime()-new Date().getTime():0)-2e4;p>Qi&&(Ne(`Timeout is too large (${p}ms), setting it to ${Qi}ms`),p=Qi),n();const m=new Date(Date.now()+p).toLocaleTimeString("en-US",{hour12:!1});Ne(`Setting refresh timer for ${m}. (${p}ms)`),o(()=>{Ne("Refreshing session due to timer"),d.refresh(ri()||h)},p)}var f}}));return St(d,["logout","logoutAll"],c=>async(...u)=>{const h=await c(...u);return Ne("Clearing all timers"),n(),h})},t=>e=>t(Object.assign(Object.assign({},e),{baseHeaders:Object.assign({"x-descope-sdk-name":"web-js","x-descope-sdk-version":"1.16.4"},e.baseHeaders)})),t=>e=>{const i=lo(),s=lo(),n=t(Ut(e,{afterRequest:async(r,a)=>{if((a==null?void 0:a.status)===401)i.pub(null),s.pub(null);else{const d=await ro(a);d&&s.pub(d);const{sessionJwt:c}=await ci(a);c&&i.pub(c)}}})),o=St(n,["logout","logoutAll"],r=>async(...a)=>{const d=await r(...a);return i.pub(null),s.pub(null),d});return Object.assign(o,{onSessionTokenChange:i.sub,onUserChange:s.sub})},t=>e=>{var{storeLastAuthenticatedUser:i=!0,keepLastAuthenticatedUserAfterLogout:s=!1}=e,n=Oe(e,["storeLastAuthenticatedUser","keepLastAuthenticatedUserAfterLogout"]);if(!i)return Object.assign(t(n),{getLastUserLoginId:as,getLastUserDisplayName:ls});const o=t(Ut(n,{afterRequest:async(a,d)=>{var c;const u=await ro(d),h=(c=u==null?void 0:u.loginIds)===null||c===void 0?void 0:c[0],v=u==null?void 0:u.name;h&&((f=>{ni(Ms,f)})(h),(f=>{ni(Us,f)})(v))}}));let r=St(o,["flow.start"],td);return r=St(r,["logout","logoutAll"],id(s)),Object.assign(r,{getLastUserLoginId:as,getLastUserDisplayName:ls})},t=>e=>{var{persistTokens:i,sessionTokenViaCookie:s,storagePrefix:n}=e,o=Oe(e,["persistTokens","sessionTokenViaCookie","storagePrefix"]);if(!i||!vt)return t(o);const r=t(Ut(o,{beforeRequest:(a=n,c=>Object.assign(c,{token:c.token||ri(a)})),afterRequest:async(c,u)=>{const h=/^\/v\d+\/mgmt\//.test(c.path);(u==null?void 0:u.status)===401?h||Zn(n):((v={},f,p)=>{var{refreshJwt:m,sessionJwt:b}=v,R=Oe(v,["refreshJwt","sessionJwt"]);f===void 0&&(f=!1),p===void 0&&(p=""),m&&ni(`${p}${xs}`,m),b&&(f?Xl(ft,b,R):ni(`${p}${ft}`,b))})(await ci(u),s,n)}}));var a;const d=St(r,["logout","logoutAll"],sd(n));return Object.assign(d,{getRefreshToken:()=>ri(n),getSessionToken:()=>ao(n)})})((...t)=>{const e=Zl(...t);return Object.assign(Object.assign({},e),{refresh:i=>{const s=ao();return e.refresh(i,{dcs:s?"t":"f"})},flow:ld(e),webauthn:nd(e),fedcm:ad(e,t[0].projectId)})}),yt=j.createContext(void 0),dd={"x-descope-sdk-name":"react","x-descope-sdk-version":"2.0.71"},uo=typeof window<"u";let As;const cd=t=>{const e=Je(Object.assign({persistTokens:uo,autoRefresh:uo},t));return As=e,e},ud=()=>cd({projectId:"temp pid",persistTokens:!1,autoRefresh:!1,storeLastAuthenticatedUser:!1});As=ud();const hd=U.lazy(async()=>((await ye(async()=>{const{default:t}=await Promise.resolve().then(()=>gc);return{default:t}},void 0)).default.sdkConfigOverrides={baseHeaders:dd,persistTokens:!1,hooks:{get beforeRequest(){return As.httpClient.hooks.beforeRequest},set beforeRequest(t){}}},{default:({projectId:t,flowId:e,baseUrl:i,baseStaticUrl:s,innerRef:n,tenant:o,theme:r,locale:a,debug:d,redirectUrl:c,client:u,form:h,styleId:v,autoFocus:f,validateOnBlur:p,storeLastAuthenticatedUser:m})=>j.createElement("descope-wc",{"project-id":t,"flow-id":e,"base-url":i,"base-static-url":s,ref:n,tenant:o,theme:r,locale:a,debug:d,client:u,form:h,"style-id":v,"redirect-url":c,"auto-focus":f,"validate-on-blur":p,"store-last-authenticated-user":m})}));j.forwardRef(({flowId:t,onSuccess:e,onError:i,onReady:s,logger:n,tenant:o,theme:r,locale:a,debug:d,client:c,form:u,telemetryKey:h,redirectUrl:v,autoFocus:f,validateOnBlur:p,errorTransformer:m,styleId:b},R)=>{const[I,P]=U.useState(null);U.useImperativeHandle(R,()=>I);const{projectId:D,baseUrl:q,baseStaticUrl:N,storeLastAuthenticatedUser:_,keepLastAuthenticatedUserAfterLogout:Q,sdk:Y}=j.useContext(yt),te=U.useCallback(async S=>{await Y.httpClient.hooks.afterRequest({},new Response(JSON.stringify(S.detail))),e&&e(S)},[e]);U.useEffect(()=>{const S=I;return S==null||S.addEventListener("success",te),i&&(S==null||S.addEventListener("error",i)),s&&(S==null||S.addEventListener("ready",s)),()=>{i&&(S==null||S.removeEventListener("error",i)),s&&(S==null||S.removeEventListener("ready",s)),S==null||S.removeEventListener("success",te)}},[I,i,te]),U.useEffect(()=>{const S=I;return S==null||S.addEventListener("success",te),()=>{S==null||S.removeEventListener("success",te)}},[I,te]),U.useEffect(()=>{const S=I;return i&&(S==null||S.addEventListener("error",i)),()=>{i&&(S==null||S.removeEventListener("error",i))}},[I,i]),U.useEffect(()=>{const S=I;return s&&(S==null||S.addEventListener("ready",s)),()=>{s&&(S==null||S.removeEventListener("error",s))}},[I,s]),U.useEffect(()=>{I&&(I.errorTransformer=m)},[I,m]),U.useEffect(()=>{I&&n&&(I.logger=n)},[I,n]);const{form:oe,client:ne}=U.useMemo(()=>({form:JSON.stringify(u||{}),client:JSON.stringify(c||{})}),[u,c]);return j.createElement("form",null,j.createElement(U.Suspense,{fallback:null},j.createElement(hd,{projectId:D,flowId:t,baseUrl:q,baseStaticUrl:N,innerRef:P,tenant:o,theme:r,locale:a,debug:d,form:oe,client:ne,telemetryKey:h,redirectUrl:v,autoFocus:f,styleId:b,validateOnBlur:p,storeLastAuthenticatedUser:_,keepLastAuthenticatedUserAfterLogout:Q})))});const gd=U.lazy(async()=>(await ye(()=>Promise.resolve().then(()=>fu),void 0),{default:({projectId:t,baseUrl:e,baseStaticUrl:i,innerRef:s,tenant:n,widgetId:o,theme:r,debug:a})=>j.createElement("descope-user-management-widget",{"project-id":t,"widget-id":o,"base-url":e,"base-static-url":i,theme:r,tenant:n,debug:a,ref:s})}));j.forwardRef(({logger:t,tenant:e,theme:i,debug:s,widgetId:n},o)=>{const[r,a]=U.useState(null);U.useImperativeHandle(o,()=>r);const{projectId:d,baseUrl:c,baseStaticUrl:u}=j.useContext(yt);return U.useEffect(()=>{r&&t&&(r.logger=t)},[r,t]),j.createElement(U.Suspense,{fallback:null},j.createElement(gd,{projectId:d,widgetId:n,baseUrl:c,baseStaticUrl:u,innerRef:a,tenant:e,theme:i,debug:s}))});const vd=U.lazy(async()=>(await ye(()=>Promise.resolve().then(()=>Vu),void 0),{default:({projectId:t,baseUrl:e,baseStaticUrl:i,innerRef:s,tenant:n,widgetId:o,theme:r,debug:a})=>j.createElement("descope-role-management-widget",{"project-id":t,"widget-id":o,"base-url":e,"base-static-url":i,theme:r,tenant:n,debug:a,ref:s})}));j.forwardRef(({logger:t,tenant:e,theme:i,debug:s,widgetId:n},o)=>{const[r,a]=U.useState(null);U.useImperativeHandle(o,()=>r);const{projectId:d,baseUrl:c,baseStaticUrl:u}=j.useContext(yt);return U.useEffect(()=>{r&&t&&(r.logger=t)},[r,t]),j.createElement(U.Suspense,{fallback:null},j.createElement(vd,{projectId:d,widgetId:n,baseUrl:c,baseStaticUrl:u,innerRef:a,tenant:e,theme:i,debug:s}))});const pd=U.lazy(async()=>(await ye(()=>Promise.resolve().then(()=>xh),void 0),{default:({projectId:t,baseUrl:e,baseStaticUrl:i,innerRef:s,tenant:n,widgetId:o,theme:r,debug:a})=>j.createElement("descope-access-key-management-widget",{"project-id":t,"widget-id":o,"base-url":e,"base-static-url":i,theme:r,tenant:n,debug:a,ref:s})}));j.forwardRef(({logger:t,tenant:e,theme:i,debug:s,widgetId:n},o)=>{const[r,a]=U.useState(null);U.useImperativeHandle(o,()=>r);const{projectId:d,baseUrl:c,baseStaticUrl:u}=j.useContext(yt);return U.useEffect(()=>{r&&t&&(r.logger=t)},[r,t]),j.createElement(U.Suspense,{fallback:null},j.createElement(pd,{projectId:d,widgetId:n,baseUrl:c,baseStaticUrl:u,innerRef:a,tenant:e,theme:i,debug:s}))});const fd=U.lazy(async()=>(await ye(()=>Promise.resolve().then(()=>Lh),void 0),{default:({projectId:t,baseUrl:e,baseStaticUrl:i,innerRef:s,tenant:n,widgetId:o,theme:r,debug:a})=>j.createElement("descope-audit-management-widget",{"project-id":t,"widget-id":o,"base-url":e,"base-static-url":i,theme:r,tenant:n,debug:a,ref:s})}));j.forwardRef(({logger:t,tenant:e,theme:i,debug:s,widgetId:n},o)=>{const[r,a]=U.useState(null);U.useImperativeHandle(o,()=>r);const{projectId:d,baseUrl:c,baseStaticUrl:u}=j.useContext(yt);return U.useEffect(()=>{r&&t&&(r.logger=t)},[r,t]),j.createElement(U.Suspense,{fallback:null},j.createElement(fd,{projectId:d,widgetId:n,baseUrl:c,baseStaticUrl:u,innerRef:a,tenant:e,theme:i,debug:s}))});const md=U.lazy(async()=>(await ye(()=>Promise.resolve().then(()=>Qh),void 0),{default:({projectId:t,baseUrl:e,baseStaticUrl:i,innerRef:s,widgetId:n,theme:o,debug:r})=>j.createElement("descope-user-profile-widget",{"project-id":t,"widget-id":n,"base-url":e,"base-static-url":i,theme:o,debug:r,ref:s})}));j.forwardRef(({logger:t,theme:e,debug:i,widgetId:s,onLogout:n},o)=>{const[r,a]=U.useState(null);U.useImperativeHandle(o,()=>r);const{projectId:d,baseUrl:c,baseStaticUrl:u}=j.useContext(yt);return U.useEffect(()=>{r&&t&&(r.logger=t)},[r,t]),U.useEffect(()=>{if(r&&n)return r.addEventListener("logout",n),()=>r.removeEventListener("logout",n)},[r,n]),j.createElement(U.Suspense,{fallback:null},j.createElement(md,{projectId:d,widgetId:s,baseUrl:c,baseStaticUrl:u,innerRef:a,theme:e,debug:i}))});function y(...t){return e=>t.reduce((i,s)=>s(i),e)}const F=t=>{const e=document.createElement("template");return e.innerHTML=t,e},bd=(...t)=>t.join("/").replace(/\/+/g,"/"),Bt=(t,e)=>t.length===e.length&&t.every((i,s)=>i===e[s]),W=t=>{let e,i;return(...s)=>(e&&Bt(e,s)||(e=s,i=t(...s)),i)},yd=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_.]+/g,"-").toLowerCase(),we=t=>(e,...i)=>e.reduce((s,n,o)=>{var r;return`${s}${n}${((r=i==null?void 0:i[o])===null||r===void 0?void 0:r[t>1?1:0])||""}`},""),Ze=(t,e=500)=>{let i;return function(...s){clearTimeout(i),i=setTimeout(()=>t.apply(this,s),e)}},w=t=>{const e=Symbol((i=>{const s=i.toString();let n=0;for(let o=0;o<s.length;o++)n=(n<<5)-n+s.charCodeAt(o),n&=n;return n.toString(16)})(t));return i=>{if(i[e])return i;const s=t(i);return s[e]=!0,s}};var fe,Fe,lt,ui;function ir(t,e){const i=Object.getOwnPropertyNames(t),s=Object.getOwnPropertyNames(e);if(i.length!==s.length)return!1;for(let n=0;n<i.length;n+=1){const o=i[n],r=t[o],a=e[o];if(r===null||a===null){if(r!==a)return!1}else if(typeof r=="object"&&typeof a=="object"){if(!ir(r,a))return!1}else if(r!==a)return!1}return!0}let wd=class{constructor(e={},{updateOnlyOnChange:i=!0}={}){fe.set(this,void 0),Fe.set(this,{}),lt.set(this,0),ui.set(this,!1),this.update=s=>{const n=typeof s=="function"?s(l(this,fe,"f")):s,o=Object.assign(Object.assign({},l(this,fe,"f")),n);if(!l(this,ui,"f")||!ir(l(this,fe,"f"),o)){const r=l(this,fe,"f");C(this,fe,o,"f"),Object.freeze(l(this,fe,"f")),setTimeout(()=>{Object.values(l(this,Fe,"f")).forEach(a=>a(o,r,((d,c)=>u=>d[u]!==c[u])(o,r)))},0)}},C(this,fe,e,"f"),C(this,ui,i,"f")}get current(){return Object.assign({},l(this,fe,"f"))}subscribe(e){return C(this,lt,l(this,lt,"f")+1,"f"),l(this,Fe,"f")[l(this,lt,"f")]=e,l(this,lt,"f").toString()}unsubscribe(e){const i=!!l(this,Fe,"f")[e];return i&&delete l(this,Fe,"f")[e],i}unsubscribeAll(){return C(this,Fe,{},"f"),!0}};fe=new WeakMap,Fe=new WeakMap,lt=new WeakMap,ui=new WeakMap;var qe,hi;let se=class{constructor(e,i){qe.set(this,void 0),this.nodeName="",C(this,qe,e,"f"),this.logger=i.logger}get asyncEle(){return(async(e,i)=>new Promise(s=>{const n=setInterval(()=>{const o=typeof e=="function"?e():e;o&&(clearInterval(n),s(o))},100);setTimeout(()=>{clearInterval(n),s(null)},i)}))(l(this,qe,"f"),1e3)}get ele(){var e,i;const s=typeof l(this,qe,"f")=="function"?l(this,qe,"f").call(this):l(this,qe,"f");return s?(s==null?void 0:s.localName)!==this.nodeName?((i=this.logger)===null||i===void 0||i.debug(`node name do not match, expected "${this.nodeName}", received "${s.localName}" `,Error()),null):s:((e=this.logger)===null||e===void 0||e.debug("no element for driver ",this.constructor.name,new Error),null)}};qe=new WeakMap;const kd=/^descope-grid-([^-]+)-column$/,Cd={text:class extends se{constructor(){super(...arguments),this.nodeName="descope-grid-text-column"}onSortDirectionChange(t){var e;return(e=this.ele)===null||e===void 0||e.addEventListener("direction-changed",t),()=>{var i;return(i=this.ele)===null||i===void 0?void 0:i.removeEventListener("selected-items-changed",t)}}},custom:class extends se{constructor(){super(...arguments),this.nodeName="descope-grid-custom-column"}onSortDirectionChange(t){var e;return(e=this.ele)===null||e===void 0||e.addEventListener("direction-changed",t),()=>{var i;return(i=this.ele)===null||i===void 0?void 0:i.removeEventListener("selected-items-changed",t)}}}};let Pi=class extends se{constructor(){super(...arguments),this.nodeName="descope-grid",hi.set(this,void 0)}onSelectedItemsChange(e){var i;return(i=this.ele)===null||i===void 0||i.addEventListener("selected-items-changed",e),()=>{var s;return(s=this.ele)===null||s===void 0?void 0:s.removeEventListener("selected-items-changed",e)}}get ele(){return super.ele}get data(){var e;return(e=this.ele)===null||e===void 0?void 0:e.data}set data(e){this.ele&&(this.ele.data=e)}get columns(){return this.ele?Array.from(this.ele.children).reduce((e,i)=>{var s;const n=(s=kd.exec(i.localName))===null||s===void 0?void 0:s[1],o=Cd[n];return o&&e.push(new o(i,{logger:this.logger})),e},[]):[]}filterColumns(e){var i,s;const n=(i=this.ele.columns)===null||i===void 0?void 0:i.filter(e);Bt(n,this.ele.columns)||(this.ele.columns=n,(s=l(this,hi,"f"))===null||s===void 0||s.call(this,n))}onColumnsChange(e){C(this,hi,e,"f")}set renderColumn(e){this.ele.renderColumn=e}};hi=new WeakMap;let x=class extends se{constructor(){super(...arguments),this.nodeName="descope-button"}onClick(e){var i;return(i=this.ele)===null||i===void 0||i.addEventListener("click",e),()=>{var s;return(s=this.ele)===null||s===void 0?void 0:s.removeEventListener("click",e)}}disable(){var e;(e=this.ele)===null||e===void 0||e.setAttribute("disabled","true")}enable(){var e;(e=this.ele)===null||e===void 0||e.removeAttribute("disabled")}};var jt;let Rd=class extends se{constructor(){super(...arguments),jt.set(this,void 0),this.nodeName="descope-modal"}close(){var e,i;(e=this.ele)===null||e===void 0||e.removeAttribute("opened"),(i=this.afterClose)===null||i===void 0||i.call(this)}async open(){var e,i;await((e=this.beforeOpen)===null||e===void 0?void 0:e.call(this)),(i=this.ele)===null||i===void 0||i.setAttribute("opened","true")}reset(){var e;this.ele&&(this.ele.innerHTML=""),l(this,jt,"f")&&((e=this.ele)===null||e===void 0||e.append(l(this,jt,"f").content.cloneNode(!0)))}setContent(e){C(this,jt,e,"f"),this.reset()}remove(){var e;(e=this.ele)===null||e===void 0||e.remove()}};jt=new WeakMap;let Kt=class extends se{constructor(){super(...arguments),this.nodeName="descope-multi-select-combo-box"}async setData(e){var i;(i=await this.asyncEle)===null||i===void 0||i.setAttribute("data",JSON.stringify(e.sort()))}},$d=class extends se{constructor(){super(...arguments),this.nodeName="descope-combo-box"}onInput(e){var i;return(i=this.ele)===null||i===void 0||i.addEventListener("input",e),()=>{var s;return(s=this.ele)===null||s===void 0?void 0:s.removeEventListener("input",e)}}get value(){var e;return(e=this.ele)===null||e===void 0?void 0:e.value}set value(e){this.ele&&(this.ele.value=e)}async setData(e){var i;(i=await this.asyncEle)===null||i===void 0||i.setAttribute("data",JSON.stringify(e.sort()))}},Id=class extends se{constructor(){super(...arguments),this.nodeName="descope-notification"}close(){var e;(e=this.ele)===null||e===void 0||e.removeAttribute("opened")}show(){var e;(e=this.ele)===null||e===void 0||e.setAttribute("opened","true")}setContent(e){this.ele.innerHTML="",this.ele.appendChild(e.content.cloneNode(!0))}remove(){var e;(e=this.ele)===null||e===void 0||e.remove()}},Ue=class extends se{constructor(){super(...arguments),this.nodeName="descope-text"}get ele(){return super.ele}get text(){var e;return(e=this.ele)===null||e===void 0?void 0:e.innerText}set text(e){this.ele&&(this.ele.innerText=e)}},Ht=class extends se{constructor(){super(...arguments),this.nodeName="descope-text-field"}onInput(e){var i;return(i=this.ele)===null||i===void 0||i.addEventListener("input",e),()=>{var s;return(s=this.ele)===null||s===void 0?void 0:s.removeEventListener("input",e)}}get value(){var e;return(e=this.ele)===null||e===void 0?void 0:e.value}set value(e){this.ele&&(this.ele.value=e)}disable(){var e;(e=this.ele)===null||e===void 0||e.setAttribute("disabled","true")}enable(){var e;(e=this.ele)===null||e===void 0||e.removeAttribute("disabled")}},xd=class extends se{constructor(){super(...arguments),this.nodeName="descope-avatar"}set displayName(e){var i;(i=this.ele)===null||i===void 0||i.setAttribute("display-name",e)}set image(e){var i;(i=this.ele)===null||i===void 0||i.setAttribute("img",e)}get flowId(){var e;return(e=this.ele)===null||e===void 0?void 0:e.getAttribute("flow-id")}onClick(e){var i;return(i=this.ele)===null||i===void 0||i.addEventListener("click",e),()=>{var s;return(s=this.ele)===null||s===void 0?void 0:s.removeEventListener("click",e)}}},js=class extends se{constructor(){super(...arguments),this.nodeName="descope-user-attribute"}set value(e){var i;(i=this.ele)===null||i===void 0||i.setAttribute("value",e)}set badgeLabel(e){var i;(i=this.ele)===null||i===void 0||i.setAttribute("badge-label",e)}get label(){var e;return((e=this.ele)===null||e===void 0?void 0:e.getAttribute("label"))||""}get editFlowId(){var e;return((e=this.ele)===null||e===void 0?void 0:e.getAttribute("edit-flow-id"))||""}get deleteFlowId(){var e;return((e=this.ele)===null||e===void 0?void 0:e.getAttribute("delete-flow-id"))||""}onEditClick(e){var i;return(i=this.ele)===null||i===void 0||i.addEventListener("edit-clicked",e),()=>{var s;return(s=this.ele)===null||s===void 0?void 0:s.removeEventListener("edit-clicked",e)}}onDeleteClick(e){var i;return(i=this.ele)===null||i===void 0||i.addEventListener("delete-clicked",e),()=>{var s;return(s=this.ele)===null||s===void 0?void 0:s.removeEventListener("delete-clicked",e)}}},sr=class extends se{constructor(){super(...arguments),this.nodeName="descope-user-auth-method"}set fulfilled(e){var i,s;e?(i=this.ele)===null||i===void 0||i.setAttribute("fulfilled","true"):(s=this.ele)===null||s===void 0||s.removeAttribute("fulfilled")}onButtonClick(e){var i;return(i=this.ele)===null||i===void 0||i.addEventListener("button-clicked",e),()=>{var s;return(s=this.ele)===null||s===void 0?void 0:s.removeEventListener("button-clicked",e)}}get flowId(){var e;return(e=this.ele)===null||e===void 0?void 0:e.getAttribute("flow-id")}},ke=class extends se{constructor(){super(...arguments),this.nodeName="descope-wc"}set projectId(e){var i;(i=this.ele)===null||i===void 0||i.setAttribute("project-id",e)}set baseUrl(e){var i;(i=this.ele)===null||i===void 0||i.setAttribute("base-url",e)}set flowId(e){var i;(i=this.ele)===null||i===void 0||i.setAttribute("flow-id",e)}onSuccess(e){var i;return(i=this.ele)===null||i===void 0||i.addEventListener("success",e),()=>{var s;return(s=this.ele)===null||s===void 0?void 0:s.removeEventListener("success",e)}}};const Sd=["error","warn","info","debug"],k=w(t=>{var e,i,s,n;return n=class extends t{constructor(){super(...arguments),e.add(this),i.set(this,l(this,e,"m",s).call(this,console))}set logger(r){C(this,i,l(this,e,"m",s).call(this,r),"f")}get logger(){return l(this,i,"f")}onLogEvent(r,a){}},i=new WeakMap,e=new WeakSet,s=function(r){return Sd.reduce((a,d)=>(a[d]=(...c)=>{var u;this.onLogEvent(d,c),(u=r[d])===null||u===void 0||u.call(r,...c)},a),{})},n}),_s=typeof localStorage<"u",Md="base.content.url",Ud="https://static.descope.com/pages",Ad=_s&&localStorage.getItem(Md)||"",jd="v2-beta",or=(t,e)=>!e&&`${t} cannot be empty, please make sure to set this attribute`,K=w(t=>{var e,i;return i=class extends t{constructor(){super(...arguments),e.set(this,!0)}connectedCallback(){var n,o;(n=super.connectedCallback)===null||n===void 0||n.call(this),!((o=this.shadowRoot)===null||o===void 0)&&o.isConnected&&l(this,e,"f")&&(C(this,e,!1,"f"),this.init())}async init(){}},e=new WeakMap,i}),_d=(t,e)=>{Array.from(t.attributes).forEach(s=>e(s.name)),new MutationObserver(s=>{s.forEach(n=>{n.type==="attributes"&&e(n.attributeName)})}).observe(t,{attributes:!0})},Xe=w(t=>{var e,i;const s=y(k,K)(t);return i=class extends s{constructor(){super(...arguments),e.set(this,{})}async init(){var o;await((o=super.init)===null||o===void 0?void 0:o.call(this)),_d(this,r=>{var a;(a=l(this,e,"f")[r])===null||a===void 0||a.forEach(d=>{d(r,this.getAttribute(r))})})}observeAttribute(o,r){l(this,e,"f")[o]||(l(this,e,"f")[o]=[]);const a=l(this,e,"f")[o].push(r);return()=>l(this,e,"f")[o].splice(a,1)}observeAttributes(o,r){const a=o.reduce((d,c)=>(d.push(this.observeAttribute(c,r)),d),[]);return()=>a.forEach(d=>d())}},e=new WeakMap,i}),B=t=>e=>{var i,s,n;const o=y(k,K,Xe)(e),r=Object.keys(t);return n=class extends o{constructor(...d){super(...d),i.add(this),this.observeAttributes(r,l(this,i,"m",s).bind(this))}async init(){var d;await((d=super.init)===null||d===void 0?void 0:d.call(this)),r.forEach(c=>l(this,i,"m",s).call(this,c,this.getAttribute(c)))}},i=new WeakSet,s=function(d,c){const u=t[d],h=typeof u=="function"?u(d,c):u;h&&this.logger.error(h)},n};B.missingAttrValidator=or;const wt=w(t=>{const e=y(B({"project-id":or}))(t);return class extends e{get projectId(){return this.getAttribute("project-id")}}}),kt=w(t=>class extends t{get baseUrl(){return this.getAttribute("base-url")||""}});function Od({projectId:t,filename:e,assetsFolder:i=jd,baseUrl:s}){const n=new URL(Ad||s||Ud);return n.pathname=bd(n.pathname,t,i,e),n.toString()}const Qe=w(t=>{const e=y(k,wt,kt)(t);return class extends e{async fetchStaticResource(s,n){const o=Od({projectId:this.projectId,filename:s,baseUrl:this.baseStaticUrl}),r=await fetch(o,{cache:"default"});return r.ok||this.logger.error(`Error fetching URL ${o} [${r.status}]`),{body:await r[n](),headers:Object.fromEntries(r.headers.entries())}}get baseStaticUrl(){return this.getAttribute("base-static-url")}}}),Ed="config.json",nr=w(t=>{var e,i,s;const n=y(Qe)(t);return s=class extends n{constructor(){super(...arguments),e.set(this,void 0),i.set(this,async()=>{try{const{body:r,headers:a}=await this.fetchStaticResource(Ed,"json");return{projectConfig:r,executionContext:{geo:a["x-geo"]}}}catch{this.logger.error("Cannot fetch config file","make sure that your projectId & flowId are correct")}})}get config(){return l(this,e,"f")||C(this,e,l(this,i,"f").call(this),"f"),l(this,e,"f")}},e=new WeakMap,i=new WeakMap,s}),Vt=w(t=>{var e,i,s,n,o,r,a;return a=class extends y(K,k)(t){constructor(){super(...arguments),e.add(this),i.set(this,void 0),this.attributeChangedCallback=(c,u,h)=>{var v;(v=super.attributeChangedCallback)===null||v===void 0||v.call(this,c,u,h),c==="debug"&&l(this,e,"m",o).call(this)}}get debug(){return this.getAttribute("debug")==="true"}onLogEvent(c,u){var h;(h=super.onLogEvent)===null||h===void 0||h.call(this,c,u),c==="error"&&l(this,e,"m",r).call(this,u[0]||"Error",u[1])}async init(){var c;await((c=super.init)===null||c===void 0?void 0:c.call(this)),l(this,e,"m",o).call(this)}},i=new WeakMap,e=new WeakSet,s=function(){var c;(c=l(this,i,"f"))===null||c===void 0||c.remove(),C(this,i,null,"f")},n=async function(){C(this,i,document.createElement("descope-debugger"),"f"),Object.assign(l(this,i,"f").style,{position:"fixed",top:"0",right:"0",height:"100vh",width:"100vw",pointerEvents:"none",zIndex:99999}),await Promise.resolve().then(function(){return Xd}),document.body.appendChild(l(this,i,"f"))},o=function(){this.debug?l(this,e,"m",n).call(this):l(this,e,"m",s).call(this)},r=function(c,u){var h;c&&((h=l(this,i,"f"))===null||h===void 0||h.updateData({title:c,description:u}))},a}),es="load-descope-ui",Wd="load-descope-ui-fallback-script",rr="base.ui.components.url",Ld=_s&&localStorage.getItem(rr)||"https://static.descope.com/npm/@descope/web-components-ui@<version>/dist/umd/index.js",Td=_s&&localStorage.getItem(rr)||"https://cdn.jsdelivr.net/npm/@descope/web-components-ui@<version>/dist/umd/index.js",Pd="<version>",ho=t=>{const e=document.createElement("script");return e.id=t,e},go=(t,e)=>t.replace(Pd,e),Dd=t=>[...Array.from(t.content.querySelectorAll("*")).reduce((e,i)=>i.localName.startsWith("descope-")?e.add(i.localName):e,new Set)],We=w(t=>{var e,i,s,n,o,r,a,d,c,u,h,v;const f=y(k,nr)(t);return v=class extends f{constructor(){super(...arguments),e.add(this),i.set(this,Symbol("errorCbs")),s.set(this,Symbol("loadCbs")),c.set(this,void 0)}get descopeUi(){return l(this,c,"f")||C(this,c,l(this,e,"m",h).call(this),"f"),l(this,c,"f")}async loadDescopeUiComponents(m){const b=Array.isArray(m)?m:Dd(m);return Promise.all(b.map(R=>l(this,e,"m",u).call(this,R)))}},i=new WeakMap,s=new WeakMap,c=new WeakMap,e=new WeakSet,n=async function(){var m;const b=await this.config,R=(m=b==null?void 0:b.projectConfig)===null||m===void 0?void 0:m.componentsVersion;return R?this.logger.debug(`Got component version "${R}"`):this.logger.error("Could not get components version"),R},o=function(m){const b=l(this,i,"f"),R=l(this,s,"f");m[b]=[],m[R]=[],Object.defineProperty(m,"onerror",{set(I){m[b].push(I)}}),Object.defineProperty(m,"onload",{set(I){m[R].push(I)}})},r=async function(m,b){this.logger.debug("Trying to load DescopeUI from a fallback URL");const R=ho(Wd);document.body.append(R),R.addEventListener("error",()=>{m.forEach(I=>I(`Cannot load DescopeUI from fallback URL, Make sure this URL is valid and return the correct script: "${R.src}"`))}),R.addEventListener("load",()=>{b.forEach(I=>I())}),R.src=go(Td,await l(this,e,"m",n).call(this))},a=function(m){m.addEventListener("error",()=>{m[l(this,i,"f")].forEach(b=>b(`Cannot load DescopeUI from main URL, Make sure this URL is valid and return the correct script: "${m.src}"`)),l(this,e,"m",r).call(this,m[l(this,i,"f")],m[l(this,s,"f")])}),m.addEventListener("load",()=>{m[l(this,s,"f")].forEach(b=>b())})},d=async function(){if(document.querySelector(`script#${es}`))this.logger.debug("DescopeUI loading script already exists",this);else{this.logger.debug("DescopeUI loading script does not exist, creating it",this);const m=ho(es);document.body.append(m),l(this,e,"m",o).call(this,m),l(this,e,"m",a).call(this,m),m.src=go(Ld,await l(this,e,"m",n).call(this))}return document.getElementById(es)},u=async function(m){if(!!customElements.get(m)){this.logger.debug(`Loading component "${m}" is skipped as it is already defined`);return}const R=await this.descopeUi;if(!R[m]){this.logger.error(`Cannot load UI component "${m}"`,`Descope UI does not have a component named "${m}", available components are: "${Object.keys(R).join(", ")}"`);return}try{return await R[m]()}catch(I){if(I.name==="NotSupportedError")console.debug(`Encountered an error while attempting to define the "${m}" component, it is likely that this component is already defined`);else throw I}},h=function(){return new Promise(m=>{globalThis.DescopeUI&&m(globalThis.DescopeUI),l(this,e,"m",d).call(this).then(b=>{b.onerror=this.logger.error,b.onload=()=>{this.logger.debug("DescopeUI was loaded"),m(globalThis.DescopeUI)},setTimeout(()=>{globalThis.DescopeUI&&m(globalThis.DescopeUI)})})})},v}),ts="content-root",li="root",Le=w(t=>class extends t{constructor(...i){var s,n;super(...i),this.attachShadow({mode:"open"}).innerHTML=`

          <style>
            #${li}, #${ts} {
              height: 100%;
            }
            #${li} {
              position: relative;
              height: fit-content;
            }
          </style>
          <div id="${li}">
            <div id="${ts}"></div>
          </div>
          `,this.contentRootElement=(s=this.shadowRoot)===null||s===void 0?void 0:s.getElementById(ts),this.rootElement=(n=this.shadowRoot)===null||n===void 0?void 0:n.getElementById(li)}}),ar="descope-modal",Nd=(t={})=>{const e=document.createElement(ar);return Object.keys(t).forEach(i=>{e.setAttribute(i,t[i])}),e},T=w(t=>{var e,i;const s=y(K,Le,We)(t);return i=class extends s{constructor(){super(...arguments),e.set(this,(()=>{const o=this.loadDescopeUiComponents.bind(this);return class extends Rd{setContent(a){o(a),super.setContent(a)}}})())}createModal(o){const a=Nd(Object.assign(Object.assign({},{}),o));return this.rootElement.append(a),new(l(this,e,"f"))(a,{logger:this.logger})}async init(){var o;this.loadDescopeUiComponents([ar]),await((o=super.init)===null||o===void 0?void 0:o.call(this))}},e=new WeakMap,i}),lr="descope-notification",Fd=(t={})=>{const e=document.createElement(lr);return Object.keys(t).forEach(i=>{e.setAttribute(i,t[i])}),e},Os=w(t=>{var e,i;const s=y(K,Le,We)(t);return i=class extends s{constructor(){super(...arguments),e.set(this,(()=>{const o=this.loadDescopeUiComponents.bind(this);return class extends Id{setContent(a){const d=typeof a=="string"?F(a):a;o(d),super.setContent(d)}}})())}createNotification(o){const a=Fd(Object.assign(Object.assign({},{}),o));return this.rootElement.append(a),new(l(this,e,"f"))(a,{logger:this.logger})}async init(){var o;await((o=super.init)===null||o===void 0?void 0:o.call(this)),this.loadDescopeUiComponents([lr])}},e=new WeakMap,i}),qd="theme",Bd=t=>{const e=document.createElement("link");e.href=t,e.rel="stylesheet",document.head.appendChild(e)};const Kd=(t,e)=>(e||!1)&&e!=="light"&&e!=="dark"&&'Supported theme values are "light", "dark", or leave empty for using the OS theme',Ct=w(t=>{var e,i,s,n,o,r,a,d,c,u,h;const v=y(B({theme:Kd}),Qe,K,We,nr,Le,Xe)(t);return h=class extends v{constructor(){super(...arguments),e.add(this),i.set(this,void 0),s.set(this,void 0)}get theme(){var p,m;const b=this.getAttribute("theme");return b==="os"?window.matchMedia&&((m=(p=window.matchMedia)===null||p===void 0?void 0:p.call(window,"(prefers-color-scheme: dark)"))===null||m===void 0?void 0:m.matches)?"dark":"light":b||"light"}get styleId(){return this.getAttribute("style-id")||qd}async init(){var p;await((p=super.init)===null||p===void 0?void 0:p.call(this)),l(this,e,"m",r).call(this),l(this,e,"m",a).call(this),l(this,e,"m",c).call(this),l(this,e,"m",u).call(this),this.observeAttributes(["theme"],()=>{l(this,e,"m",c).call(this),l(this,e,"m",u).call(this)}),this.observeAttributes(["style-id"],()=>{C(this,s,null,"f"),l(this,e,"m",c).call(this),l(this,e,"m",r).call(this),l(this,e,"m",a).call(this)})}},i=new WeakMap,s=new WeakMap,e=new WeakSet,n=async function(){try{const{body:p}=await this.fetchStaticResource(`${this.styleId}.json`,"json");return p}catch{this.logger.error("Cannot fetch theme file","make sure that your projectId & flowId are correct")}},o=function(){return l(this,s,"f")||(C(this,s,l(this,e,"m",n).call(this),"f"),l(this,s,"f").then(p=>this.logger.debug("Fetched theme",p))),l(this,s,"f")},r=async function(){var p,m;const b=await l(this,e,"a",o);b&&(l(this,i,"f")||(C(this,i,document.createElement("style"),"f"),l(this,i,"f").id="global-style",this.shadowRoot.appendChild(l(this,i,"f"))),l(this,i,"f").innerText=(((p=b==null?void 0:b.light)===null||p===void 0?void 0:p.globals)||"")+(((m=b==null?void 0:b.dark)===null||m===void 0?void 0:m.globals)||""))},a=async function(){var p,m;const b=Object.assign({},await l(this,e,"a",o));if(!b)return;const R=await this.descopeUi;R!=null&&R.componentsThemeManager&&(R.componentsThemeManager.themes={light:(p=b==null?void 0:b.light)===null||p===void 0?void 0:p.components,dark:(m=b==null?void 0:b.dark)===null||m===void 0?void 0:m.components})},d=async function(){var p,m;const{projectConfig:b}=await this.config||{},R=(p=b==null?void 0:b.styles)===null||p===void 0?void 0:p[this.styleId],I=b==null?void 0:b.cssTemplate,P=R||I;return(m=P==null?void 0:P[this.theme])===null||m===void 0?void 0:m.fonts},c=async function(){const p=await l(this,e,"m",d).call(this);p?Object.values(p).forEach(m=>{m.url&&(this.logger.debug(`Loading font from URL "${m.url}"`),Bd(m.url))}):this.logger.debug("No fonts to load")},u=async function(){this.rootElement.setAttribute("data-theme",this.theme);const p=await this.descopeUi;p!=null&&p.componentsThemeManager&&(p.componentsThemeManager.currentThemeName=this.theme)},h}),zt=t=>w(e=>{const i=Aa(t),s=Object.assign(Object.assign({},i.actions),t.asyncActions);return class extends y(k)(e){constructor(...o){super(...o);const r=ja({reducer:i.reducer,middleware:c=>c({thunk:{extraArgument:this},serializableCheck:!1}),devTools:!1}),a=c=>async(...u)=>{const h=await r.dispatch(c(...u));try{_a(h)}catch(v){this.logger.error(v.message,h.type,v.stack)}return h},d=Object.keys(s).reduce((c,u)=>(c[u]=a(s[u]),c),{});this.actions=d,this.subscribe=(c,u=h=>h)=>r.subscribe(()=>c(u(r.getState())))}}}),z=w(t=>class extends k(t){validateForm(i){return this.getFormInputs(i).every(s=>{var n,o;return(n=s.reportValidity)===null||n===void 0||n.call(s),(o=s.checkValidity)===null||o===void 0?void 0:o.call(s)})}getFormInputs(i){return i?Array.from(i.querySelectorAll("[name]")):(this.logger.debug("cannot get form inputs, no root element was received"),[])}getFormData(i){return this.getFormInputs(i).reduce((s,n)=>Object.assign(s,{[n.getAttribute("name")]:n.value}),{})}setFormData(i,s){this.getFormInputs(i).forEach(n=>{s.hasOwnProperty(n.getAttribute("name"))&&(n.value=s[n.getAttribute("name")])})}resetFormData(i){this.getFormInputs(i).forEach(s=>{s.value="",s.checked=!1})}getFormFieldNames(i){return this.getFormInputs(i).map(s=>s.name)}disableFormField(i,s){var n;(n=this.getFormInputs(i).find(o=>o.name===s))===null||n===void 0||n.setAttribute("disabled","true")}removeFormField(i,s){var n;(n=this.getFormInputs(i).find(o=>o.name===s))===null||n===void 0||n.remove()}}),Hd=w(t=>class extends t{get baseStaticUrl(){return this.getAttribute("base-static-url")||""}}),dr=(t,e,i,s={})=>{var n,o,r,a;return[Math.min(Math.max(e,(s.left==="all"?t.offsetWidth:(n=s.left)!==null&&n!==void 0?n:0)-t.offsetWidth),window.innerWidth-(s.right==="all"?t.offsetWidth:(o=s.right)!==null&&o!==void 0?o:0)),Math.min(Math.max(i,(s.top==="all"?t.offsetHeight:(r=s.top)!==null&&r!==void 0?r:0)-t.offsetHeight),window.innerHeight-(s.bottom==="all"?t.offsetHeight:(a=s.bottom)!==null&&a!==void 0?a:0))]},Vd=(t,e,i)=>{let s=0,n=0,o=0,r=0;function a(u){u.preventDefault(),s=o-u.clientX,n=r-u.clientY,o=u.clientX,r=u.clientY;const[h,v]=dr(t,t.offsetLeft-s,t.offsetTop-n,i);t.style.top=`${v}px`,t.style.left=`${h}px`}function d(){document.onmouseup=null,document.onmousemove=null}function c(u){u.preventDefault(),o=u.clientX,r=u.clientY,document.onmouseup=d,document.onmousemove=a}e?e.onmousedown=c:t.onmousedown=c},zd=t=>{t.onmousemove=e=>{var i;const s=e.target;(s.w&&s.w!==s.offsetWidth||s.h&&s.h!==s.offsetHeight)&&((i=t.onresize)===null||i===void 0||i.call(t,e)),s.w=s.offsetWidth,s.h=s.offsetHeight}};var Ve,_t,ae,Dt,gi,vi,cr,vo,ds,ur;const is=32,po=300,Gd=200,fo=200,hr=document.createElement("template");hr.innerHTML=`
<style>
  .debugger {
    width: ${po}px;
    height: ${Gd}px;
    background-color: #FAFAFA;
    position: fixed;
    font-family: "Helvetica Neue", sans-serif;
    box-shadow: rgba(0, 0, 0, 0.1) 0px 5px 10px;
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid lightgrey;
    pointer-events: initial;
    display: flex;
    flex-direction: column;
    min-width: ${fo}px;
    max-width: 600px;
    max-height: calc(100% - ${is*2}px);
    min-height: ${fo}px;
    resize: both;
  }

  .header {
    padding: 8px 16px;
    display: flex;
    align-items: center;
    background-color: #EEEEEE;
    cursor: move;
    border-bottom: 1px solid #e0e0e0;
  }

  .content {
    font-size: 14px;
    flex-grow: 1;
    overflow: auto;
  }

  .msg {
    border-bottom: 1px solid lightgrey;
    padding: 8px 16px;
    display: flex;
    gap: 5px;
    background-color: #FAFAFA;
  }

  .msg.collapsible {
    cursor: pointer;
  }

  .empty-state {
    padding: 8px 16px;
    background-color: #FAFAFA;
  }


  .msg.collapsible:not(.collapsed) {
    background-color: #F5F5F5;
  }

  .msg_title {
    padding-bottom: 5px;
    display: flex;
    gap: 8px;
    font-weight: 500;
  }

  .msg svg {
    padding: 1px;
    flex-shrink: 0;
    margin-top: -2px;
  }

  .msg_content {
    overflow: hidden;
    flex-grow: 1;
    margin-right:5px;
  }

  .msg_desc {
    color: #646464;
    cursor: initial;
    word-wrap: break-word;
  }

  .msg.collapsed .msg_desc {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .msg.collapsible.collapsed .chevron {
    transform: rotate(-45deg) translateX(-2px);
  }

  .msg.collapsible .chevron {
    content: "";
    width:6px;
    height:6px;
    border-bottom: 2px solid grey;
    border-right: 2px solid grey;
    transform: rotate(45deg) translateX(-1px);
    margin: 5px;
    flex-shrink:0;
  }
</style>

<div style="top:${is}px; left:${window.innerWidth-po-is}px;" class="debugger">
  <div class="header">
    <span>Debugger messages</span>
  </div>
  <div class="content">
    <div class="empty-state">
      No errors detected 
    </div>
  </div>
</div>
`;const Jd=`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5.99984 13.167L8.99984 10.167L11.9998 13.167L13.1665 12.0003L10.1665 9.00033L13.1665 6.00033L11.9998 4.83366L8.99984 7.83366L5.99984 4.83366L4.83317 6.00033L7.83317 9.00033L4.83317 12.0003L5.99984 13.167ZM8.99984 17.3337C7.84706 17.3337 6.76373 17.1148 5.74984 16.677C4.73595 16.2398 3.854 15.6462 3.104 14.8962C2.354 14.1462 1.76039 13.2642 1.32317 12.2503C0.885393 11.2364 0.666504 10.1531 0.666504 9.00033C0.666504 7.84755 0.885393 6.76421 1.32317 5.75033C1.76039 4.73644 2.354 3.85449 3.104 3.10449C3.854 2.35449 4.73595 1.7606 5.74984 1.32283C6.76373 0.885603 7.84706 0.666992 8.99984 0.666992C10.1526 0.666992 11.2359 0.885603 12.2498 1.32283C13.2637 1.7606 14.1457 2.35449 14.8957 3.10449C15.6457 3.85449 16.2393 4.73644 16.6765 5.75033C17.1143 6.76421 17.3332 7.84755 17.3332 9.00033C17.3332 10.1531 17.1143 11.2364 16.6765 12.2503C16.2393 13.2642 15.6457 14.1462 14.8957 14.8962C14.1457 15.6462 13.2637 16.2398 12.2498 16.677C11.2359 17.1148 10.1526 17.3337 8.99984 17.3337ZM8.99984 15.667C10.8609 15.667 12.4373 15.0212 13.729 13.7295C15.0207 12.4378 15.6665 10.8614 15.6665 9.00033C15.6665 7.13921 15.0207 5.56283 13.729 4.27116C12.4373 2.97949 10.8609 2.33366 8.99984 2.33366C7.13873 2.33366 5.56234 2.97949 4.27067 4.27116C2.979 5.56283 2.33317 7.13921 2.33317 9.00033C2.33317 10.8614 2.979 12.4378 4.27067 13.7295C5.56234 15.0212 7.13873 15.667 8.99984 15.667Z" fill="#ED404A"/>
</svg>
`;class Zd extends HTMLElement{constructor(){var e;super(),Ve.add(this),_t.set(this,new wd({messages:[]})),ae.set(this,void 0),Dt.set(this,void 0),gi.set(this,void 0),vi.set(this,{resize:l(this,Ve,"m",ur).bind(this)}),this.attachShadow({mode:"open"}),(e=this.shadowRoot)===null||e===void 0||e.appendChild(hr.content.cloneNode(!0)),C(this,ae,this.shadowRoot.querySelector(".debugger"),"f"),C(this,Dt,l(this,ae,"f").querySelector(".content"),"f"),C(this,gi,l(this,ae,"f").querySelector(".header"),"f")}updateData(e){l(this,_t,"f").update(i=>({messages:i.messages.concat(e)}))}connectedCallback(){Vd(l(this,ae,"f"),l(this,gi,"f"),{top:"all",bottom:100,left:100,right:100}),window.addEventListener("resize",l(this,vi,"f").resize),zd(l(this,ae,"f")),l(this,ae,"f").onresize=l(this,Ve,"m",ds).bind(this),l(this,_t,"f").subscribe(l(this,Ve,"m",cr).bind(this))}disconnectedCallback(){l(this,_t,"f").unsubscribeAll(),window.removeEventListener("resize",l(this,vi,"f").resize)}}_t=new WeakMap,ae=new WeakMap,Dt=new WeakMap,gi=new WeakMap,vi=new WeakMap,Ve=new WeakSet,cr=function(e){l(this,Ve,"m",vo).call(this,e),l(this,Ve,"m",ds).call(this)},vo=function(e){l(this,Dt,"f").innerHTML=e.messages.map(i=>`
    <div class="msg">
      ${Jd}
      <div class="msg_content">
        <div class="msg_title">
          ${i.title}
        </div>
        <div class="msg_desc">
          ${i.description||""}
        </div>
      </div>
      <div class="chevron"></div>
    </div>
  `).join("")},ds=function(){l(this,Dt,"f").querySelectorAll(".msg").forEach(e=>{const i=e,s=i.querySelector(".msg_desc"),n=20,o=s.scrollWidth>s.clientWidth,r=s.clientHeight>n;o||r?(i.classList.add("collapsible"),i.onclick=d=>{d.target.classList.contains("msg_desc")||i.classList.toggle("collapsed")}):(i.classList.remove("collapsible"),i.onclick=null)})},ur=function(){const[e,i]=dr(l(this,ae,"f"),Number.parseInt(l(this,ae,"f").style.left,10),Number.parseInt(l(this,ae,"f").style.top,10),{top:"all",bottom:100,left:100,right:100});l(this,ae,"f").style.top=`${i}px`,l(this,ae,"f").style.left=`${e}px`};customElements.get("descope-debugger")||customElements.define("descope-debugger",Zd);var Xd=Object.freeze({__proto__:null});const Ii=typeof localStorage<"u",gr="J151000",Qd=Ii&&localStorage.getItem("base.content.url")||"",vr="config.json",mo="base.ui.components.url";Ii&&localStorage.getItem(mo),Ii&&localStorage.getItem(mo);const pr="descope-login-flow",bo="code",yo="ra-challenge",wo="ra-callback",ko="ra-backup-callback",Co="ra-initiator",fr="data-exclude-field",mr="dls_last_auth",Ro="state_id",$o="saml_idp_state_id",Io="saml_idp_username",xo="descope_idp_initiated",So="sso_app_id",Mo="oidc_login_hint",Uo="oidc_prompt",Ao="oidc_error_redirect_uri",xi="data-type",Yd="redirect",jo="poll",_o="webauthnCreate",ec="webauthnGet",tc="loadForm",Oo="submit",Eo="polling",ic=["descope-multi-select-combo-box","descope-text-area"];var qt;function V(t){return new URLSearchParams(window.location.search).get(t)}function J(t){if(window.history.replaceState&&V(t)){const e=new URL(window.location.href),i=new URLSearchParams(e.search);i.delete(t),e.search=i.toString(),window.history.replaceState({},"",e.toString())}}function Si(t,e){return g(this,void 0,void 0,function*(){const i=yield fetch(t,{cache:"default"});if(!i.ok)throw Error(`Error fetching URL ${t} [${i.status}]`);return{body:yield i[e||"text"](),headers:Object.fromEntries(i.headers.entries())}})}(function(t){t.backward="backward",t.forward="forward"})(qt||(qt={}));function Mi({projectId:t,filename:e,assetsFolder:i="v2-beta",baseUrl:s}){const n=new URL(Qd||s||"https://static.descope.com/pages");return n.pathname=((...o)=>o.join("/").replace(/\/+/g,"/"))(n.pathname,t,i,e),n.toString()}function sc(t,e){if(!e)return;const i=+t,s=+e;return Number.isNaN(i)||Number.isNaN(s)?void 0:i>s?qt.forward:i<s?qt.backward:void 0}const br=()=>{const[t="",e=""]=(V(pr)||"").split("_");return{executionId:t,stepId:e}};function yr(){J(pr)}const wr=t=>t.replace(/-./g,e=>e[1].toUpperCase()),oc=()=>{const{executionId:t,stepId:e}=br();(t||e)&&yr();const i=V("t")||void 0;i&&J("t");const s=V(bo)||void 0;s&&J(bo);const n=V("err")||void 0;n&&J("err");const{redirectAuthCodeChallenge:o,redirectAuthCallbackUrl:r,redirectAuthBackupCallbackUri:a,redirectAuthInitiator:d}={redirectAuthCodeChallenge:V(yo),redirectAuthCallbackUrl:V(wo),redirectAuthBackupCallbackUri:V(ko),redirectAuthInitiator:V(Co)};(o||r||a||d)&&(J(yo),J(wo),J(ko),J(Co));const c=V(Ro);c&&J(Ro);const u=V($o);u&&J($o);const h=V(Io);u&&J(Io);const v=V(xo);v&&J(xo);const f=V(So);f&&J(So);const p=V(Mo);p&&J(Mo);const m=V(Uo);m&&J(Uo);const b=V(Ao);return b&&J(Ao),{executionId:t,stepId:e,token:i,code:s,exchangeError:n,redirectAuthCodeChallenge:o,redirectAuthCallbackUrl:r,redirectAuthBackupCallbackUri:a,redirectAuthInitiator:d,ssoQueryParams:{oidcIdpStateId:c,samlIdpStateId:u,samlIdpUsername:h,descopeIdpInitiated:v==="true",ssoAppId:f,oidcLoginHint:p,oidcPrompt:m,oidcErrorRedirectUri:b}}},Es=t=>{let e,i;return(...s)=>{return e&&(o=s,(n=e).length===o.length&&n.every((r,a)=>r===o[a]))||(e=s,i=t(...s)),i;var n,o}},Wo=(t,{oidcIdpStateId:e,samlIdpStateId:i,samlIdpUsername:s,ssoAppId:n,oidcLoginHint:o,oidcPrompt:r,oidcErrorRedirectUri:a})=>!(!t||e||i||s||n||o||r||a),nc=t=>t==null?void 0:t.submit(),Lo=(t,e)=>{const i=e.find(s=>t[s]);return i?t[i]:null},rc=(t,e=100)=>{let i;return function(...s){i||t.apply(this,s),clearTimeout(i),i=setTimeout(()=>{i=null},e)}};function ss(t){if(t)return{locale:t.toLowerCase(),fallback:t.toLowerCase()};const e=navigator.language;return e?e.includes("-")?{locale:e.toLowerCase(),fallback:e.split("-")[0].toLowerCase()}:{locale:e.toLowerCase(),fallback:e.toLowerCase()}:{locale:"",fallback:""}}var me,Be,dt,pi;function kr(t,e){const i=Object.getOwnPropertyNames(t),s=Object.getOwnPropertyNames(e);if(i.length!==s.length)return!1;for(let n=0;n<i.length;n+=1){const o=i[n],r=t[o],a=e[o];if(r===null||a===null){if(r!==a)return!1}else if(typeof r=="object"&&typeof a=="object"){if(!kr(r,a))return!1}else if(r!==a)return!1}return!0}let pt=class{constructor(e={},{updateOnlyOnChange:i=!0}={}){me.set(this,void 0),Be.set(this,{}),dt.set(this,0),pi.set(this,!1),this.update=s=>{const n=typeof s=="function"?s(l(this,me,"f")):s,o=Object.assign(Object.assign({},l(this,me,"f")),n);if(!l(this,pi,"f")||!kr(l(this,me,"f"),o)){const r=l(this,me,"f");C(this,me,o,"f"),Object.freeze(l(this,me,"f")),setTimeout(()=>{Object.values(l(this,Be,"f")).forEach(a=>a(o,r,((d,c)=>u=>d[u]!==c[u])(o,r)))},0)}},C(this,me,e,"f"),C(this,pi,i,"f")}get current(){return Object.assign({},l(this,me,"f"))}subscribe(e){return C(this,dt,l(this,dt,"f")+1,"f"),l(this,Be,"f")[l(this,dt,"f")]=e,l(this,dt,"f").toString()}unsubscribe(e){const i=!!l(this,Be,"f")[e];return i&&delete l(this,Be,"f")[e],i}unsubscribeAll(){return C(this,Be,{},"f"),!0}};me=new WeakMap,Be=new WeakMap,dt=new WeakMap,pi=new WeakMap;const ac=["disabled"],To=(t,e)=>{Object.entries(e||{}).forEach(([i,s])=>{Array.from(t.querySelectorAll(`*[name="${i}"]:not([${fr}])`)).forEach(n=>{n.value=s})})},os=(t,e)=>t.replace(/{{(.+?)}}/g,(i,s)=>{return n=e,s.split(".").reduce((o,r)=>(o==null?void 0:o[r])||"",n);var n}),Po=(t,e,i)=>{t.querySelectorAll(`[${xi}="${e}"]`).forEach(s=>{s.setAttribute("href",i)})},Do=(t,e,i)=>{var s,n;const o=(s=customElements.get(e))===null||s===void 0?void 0:s.cssVarList.url;i&&o&&((n=t==null?void 0:t.style)===null||n===void 0||n.setProperty(o,`url(data:image/jpg;base64,${i})`))},lc=(t,e,i,s,n,o)=>{var r,a;let d=e==null?void 0:e.errorText;try{d=(n==null?void 0:n({text:e==null?void 0:e.errorText,type:e==null?void 0:e.errorType}))||(e==null?void 0:e.errorText)}catch(c){o.error("Error transforming error message",c.message)}((c,u,h="")=>{c.querySelectorAll(`[${xi}="${u}"]`).forEach(v=>{v.textContent=h,v.classList[h?"remove":"add"]("hide")})})(t,"error-message",d),Po(t,"totp-link",(r=e==null?void 0:e.totp)===null||r===void 0?void 0:r.provisionUrl),Po(t,"notp-link",(a=e==null?void 0:e.notp)===null||a===void 0?void 0:a.redirectUrl),((c,u)=>{c.querySelectorAll("descope-text,descope-link,descope-enriched-text,descope-code-snippet").forEach(h=>{h.textContent=os(h.textContent,u);const v=h.getAttribute("href");v&&h.setAttribute("href",os(v,u))})})(t,e),((c,u,h)=>{u&&Object.keys(u).forEach(v=>{c.querySelectorAll(`[name=${v}]`).forEach(f=>{const p=u[v];Object.keys(p).forEach(m=>{let b=p[m];if(typeof b!="string")try{b=JSON.stringify(b)}catch(R){h.error(`Could not stringify value "${b}" for "${m}"`,R.message),b=""}f.setAttribute(m,b)})})})})(t,i,o),((c,u)=>{c.querySelectorAll("[data-has-dynamic-attr-values]").forEach(h=>{Array.from(h.attributes).forEach(v=>{v.value=os(v.value,u)})})})(t,e),((c,u)=>{Object.entries(u).forEach(([h,v])=>{c.querySelectorAll(`[name="${h}"]`).forEach(f=>{Object.entries(v).forEach(([p,m])=>{ac.includes(p)&&f.setAttribute(p,m)})})})})(t,s)},dc=Es(()=>g(void 0,void 0,void 0,function*(){var t,e,i,s,n;if(!window.PublicKeyCredential||!PublicKeyCredential.isConditionalMediationAvailable||!PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable)return!1;try{const o=Promise.all([(t=window.PublicKeyCredential)===null||t===void 0?void 0:t.isConditionalMediationAvailable(),(e=window.PublicKeyCredential)===null||e===void 0?void 0:e.isUserVerifyingPlatformAuthenticatorAvailable()]).then(a=>a.every(d=>!!d)),r=(()=>{var a;const d=(a=navigator==null?void 0:navigator.userAgentData)===null||a===void 0?void 0:a.brands,c=d==null?void 0:d.find(({brand:u,version:h})=>u==="Chromium"&&parseFloat(h));return c?c.version:0})()>=108;return yield(i=100,s=o,n=r,new Promise((a,d)=>{let c=!1;const u=setTimeout(()=>{c=!0,n!==void 0?a(n):d(new Error(`Promise timed out after ${i} ms`))},i);s.then(h=>{c||(clearTimeout(u),a(h))}).catch(h=>{c||(clearTimeout(u),d(h))})}))}catch(o){return console.error("Conditional login check failed",o),!1}})),No={"lastAuth.loginId":{"not-empty":t=>!!t.loginId,empty:t=>!t.loginId},idpInitiated:{"is-true":t=>!!t.code,"is-false":t=>!t.code},externalToken:{"is-true":t=>!!t.token,"is-false":t=>!t.token},abTestingKey:{"greater-than":(t,e)=>(t.abTestingKey||0)>e,"less-than":(t,e)=>(t.abTestingKey||0)<e}};function Fo(t){const e={};if(t)try{Object.assign(e,JSON.parse(localStorage.getItem(mr)))}catch{}return e}const qo="dls_ab_testing_id",cc=w(t=>{var e,i,s,n;return n=class extends t{constructor(){super(...arguments),e.add(this)}connectedCallback(){var o;l(this,e,"m",i).call(this)&&l(this,e,"m",s).call(this),(o=super.connectedCallback)===null||o===void 0||o.call(this)}},e=new WeakSet,i=function(){return!this.shadowRoot.host.closest("form")&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)},s=function(){const o=this.shadowRoot.host,r=document.createElement("form");r.style.width="100%",r.style.height="100%",o.parentElement.appendChild(r),r.appendChild(o)},n}),Cr=document.createElement("template");Cr.innerHTML=`
	<style>
		:host {
      all: initial;
			width: 100%;
      display: block;
		}

		#root {
			height: 100%;
			transition: opacity 300ms ease-in-out;
      display: flex;
		}

		#root[data-theme] {
			background-color: transparent;
		}

		.fade-out {
			opacity: 0.1;
		}

	</style>
	`;const Rr=(t,e="")=>Object.keys(t).reduce((i,s)=>{var n;if(typeof t[s]=="object"&&t[s]!==null&&!(!((n=t[s])===null||n===void 0)&&n.value))return Object.assign(Object.assign({},i),Rr(t[s],`${e+s}.`));const o=typeof t[s]=="object"?t[s]:{value:t[s]},r=Object.assign(Object.assign({},i),{[e+s]:o,[`form.${e}${s}`]:o});return s==="displayName"?Object.assign(Object.assign({},r),{[`${e}fullName`]:o,[`form.${e}fullName`]:o}):r},[]);var X,fi,mi,He,ct,Nt,_e,ut,Ui,$r,cs,Ir,Bo,xr,Sr,Ko,gt,Mr,us,Ur,Ar,jr;const uc=y(Ct,cc)(HTMLElement);class Ai extends uc{static get observedAttributes(){return["project-id","flow-id","base-url","tenant","locale","debug","storage-prefix","preview","redirect-url","auto-focus","store-last-authenticated-user","keep-last-authenticated-user-after-logout","validate-on-blur","style-id"]}constructor(e){super(),X.add(this),mi.set(this,!1),this.loggerWrapper={error:(i,s="")=>{this.logger.error(i,s,new Error),l(this,X,"m",Ar).call(this,i,s)},warn:(i,s="")=>{this.logger.warn(i,s)},info:(i,s="",n={})=>{this.logger.info(i,s,n)},debug:(i,s="")=>{this.logger.debug(i,s)}},He.set(this,new pt),ct.set(this,new pt),Nt.set(this,{}),this.getComponentsContext=()=>l(this,Nt,"f"),this.nextRequestStatus=new pt({isLoading:!1}),_e.set(this,void 0),ut.set(this,{popstate:l(this,X,"m",Ir).bind(this),componentsContext:l(this,X,"m",Mr).bind(this)}),Ui.set(this,void 0),gt.set(this,Es(()=>g(this,void 0,void 0,function*(){const i=Mi({projectId:this.projectId,filename:vr,baseUrl:this.baseStaticUrl});try{const{body:s,headers:n}=yield Si(i,"json");return{projectConfig:s,executionContext:{geo:n["x-geo"]}}}catch{return{isMissingConfig:!0}}}))),C(this,Ui,e,"f"),l(this,X,"m",$r).call(this)}get flowId(){return this.getAttribute("flow-id")}get client(){try{return JSON.parse(this.getAttribute("client"))||{}}catch{return{}}}get tenant(){return this.getAttribute("tenant")||void 0}get redirectUrl(){return this.getAttribute("redirect-url")||void 0}get debug(){return this.getAttribute("debug")==="true"}get locale(){return this.getAttribute("locale")||void 0}get autoFocus(){var e;const i=(e=this.getAttribute("auto-focus"))!==null&&e!==void 0?e:"true";return i==="skipFirstScreen"?i:i==="true"}get validateOnBlur(){return this.getAttribute("validate-on-blur")==="true"}get storeLastAuthenticatedUser(){var e;return((e=this.getAttribute("store-last-authenticated-user"))!==null&&e!==void 0?e:"true")==="true"}get keepLastAuthenticatedUserAfterLogout(){return this.getAttribute("keep-last-authenticated-user-after-logout")==="true"}get storagePrefix(){return this.getAttribute("storage-prefix")||""}get preview(){return!!this.getAttribute("preview")}get formConfig(){return(e=>{try{return Rr(JSON.parse(e))}catch{return{}}})(this.form)}get form(){return this.getAttribute("form")}get formConfigValues(){return e=this.formConfig,i="value",Object.fromEntries(Object.entries(e).map(([s,n])=>[s,n[i]]));var e,i}getExecutionContext(){return g(this,void 0,void 0,function*(){const{executionContext:e}=yield l(this,gt,"f").call(this);return e})}getProjectConfig(){return g(this,void 0,void 0,function*(){const{projectConfig:e}=yield l(this,gt,"f").call(this);return e})}getFlowConfig(){return g(this,void 0,void 0,function*(){var e,i;const s=yield this.getProjectConfig(),n=((e=s==null?void 0:s.flows)===null||e===void 0?void 0:e[this.flowId])||{};return(i=n.version)!==null&&i!==void 0||(n.version=0),n})}getTargetLocales(){return g(this,void 0,void 0,function*(){const e=yield this.getFlowConfig();return((e==null?void 0:e.targetLocales)||[]).map(i=>i.toLowerCase())})}init(){const e=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var i;if(yield(i=e.init)===null||i===void 0?void 0:i.call(this),l(this,ct,"f").subscribe(l(this,X,"m",Ur).bind(this)),l(this,ct,"f").update({isDebug:this.debug}),l(this,X,"m",cs).call(this),yield l(this,X,"m",Sr).call(this))return void this.loggerWrapper.error("This SDK version does not support your flows version","Make sure to upgrade your flows to the latest version or use an older SDK version");if((yield l(this,gt,"f").call(this)).isMissingConfig)return void this.loggerWrapper.error("Cannot get config file","Make sure that your projectId & flowId are correct");l(this,X,"m",jr).call(this);const{executionId:s,stepId:n,token:o,code:r,exchangeError:a,redirectAuthCallbackUrl:d,redirectAuthBackupCallbackUri:c,redirectAuthCodeChallenge:u,redirectAuthInitiator:h,ssoQueryParams:v}=oc();window.addEventListener("popstate",l(this,ut,"f").popstate),window.addEventListener("components-context",l(this,ut,"f").componentsContext),l(this,He,"f").subscribe(l(this,X,"m",xr).bind(this)),l(this,He,"f").update(Object.assign({projectId:this.projectId,flowId:this.flowId,baseUrl:this.baseUrl,tenant:this.tenant,redirectUrl:this.redirectUrl,locale:this.locale,stepId:n,executionId:s,token:o,code:r,exchangeError:a,redirectAuthCallbackUrl:d,redirectAuthBackupCallbackUri:c,redirectAuthCodeChallenge:u,redirectAuthInitiator:h},v)),C(this,mi,!0,"f")})}disconnectedCallback(){l(this,He,"f").unsubscribeAll(),l(this,ct,"f").unsubscribeAll(),l(this,X,"m",us).call(this),window.removeEventListener("popstate",l(this,ut,"f").popstate),window.removeEventListener("components-context",l(this,ut,"f").componentsContext)}attributeChangedCallback(e,i,s){if(this.shadowRoot.isConnected&&l(this,mi,"f")&&i!==s&&fi.observedAttributes.includes(e)){l(this,X,"m",cs).call(this);const n=i===null;l(this,He,"f").update(({stepId:o,executionId:r})=>{let a=o,d=r;return n||(d=null,a=null,yr()),{[wr(e)]:s,stepId:a,executionId:d}}),l(this,ct,"f").update({isDebug:this.debug})}}}function hc(t,e){return`sdkScriptsResults.${e?`${t}_${e}`:t}`}var Z,Ot,Se,bi,_r,Et,Or,xe,hs,Ho,Er,Wr,Lr,Tr,Pr,yi,Vo,Dr,Nr,Wt;fi=Ai,mi=new WeakMap,He=new WeakMap,ct=new WeakMap,Nt=new WeakMap,_e=new WeakMap,ut=new WeakMap,Ui=new WeakMap,gt=new WeakMap,X=new WeakSet,$r=function(){this.shadowRoot.appendChild(Cr.content.cloneNode(!0)),this.rootElement=this.shadowRoot.querySelector("#root")},cs=function(){const t=["base-url","tenant","locale","debug","redirect-url","auto-focus","store-last-authenticated-user","keep-last-authenticated-user-after-logout","preview","storage-prefix","form","client","validate-on-blur","style-id"];fi.observedAttributes.forEach(e=>{if(!t.includes(e)&&!this[wr(e)])throw Error(`${e} cannot be empty`)})},Ir=function(){const{stepId:t,executionId:e}=br();l(this,He,"f").update({stepId:t,executionId:e})},Bo=function(t,e){this.sdk=Je(Object.assign(Object.assign({persistTokens:!0,preview:this.preview,storagePrefix:this.storagePrefix,storeLastAuthenticatedUser:this.storeLastAuthenticatedUser,keepLastAuthenticatedUserAfterLogout:this.keepLastAuthenticatedUserAfterLogout},fi.sdkConfigOverrides),{projectId:t,baseUrl:e})),["start","next"].forEach(i=>{const s=this.sdk.flow[i];this.sdk.flow[i]=(...n)=>g(this,void 0,void 0,function*(){this.nextRequestStatus.update({isLoading:!0});try{return yield s(...n)}catch(o){return{error:{errorCode:gr,errorDescription:o.toString()}}}finally{this.nextRequestStatus.update({isLoading:!1})}})})},xr=function(t,e,i){return g(this,void 0,void 0,function*(){const{projectId:s,baseUrl:n}=t;if(i("projectId")||i("baseUrl")){if(!s)return;l(this,X,"m",Bo).call(this,s,n)}l(this,Ui,"f").call(this,t)})},Sr=function(){return g(this,void 0,void 0,function*(){return(yield l(this,gt,"f").call(this)).isMissingConfig&&(yield l(this,X,"m",Ko).call(this))})},Ko=function(){return g(this,void 0,void 0,function*(){const t=Mi({projectId:this.projectId,filename:vr,assetsFolder:"v2-alpha",baseUrl:this.baseStaticUrl});try{return yield Si(t,"json"),!0}catch{return!1}})},Mr=function(t){C(this,Nt,Object.assign(Object.assign({},l(this,Nt,"f")),t.detail),"f")},us=function(){var t;(t=l(this,_e,"f"))===null||t===void 0||t.remove(),C(this,_e,null,"f")},Ur=function(t){return g(this,arguments,void 0,function*({isDebug:e}){e?(C(this,_e,document.createElement("descope-debugger"),"f"),Object.assign(l(this,_e,"f").style,{position:"fixed",top:"0",right:"0",height:"100vh",width:"100vw",pointerEvents:"none",zIndex:99999}),yield ye(()=>Promise.resolve().then(()=>Yh),void 0),document.body.appendChild(l(this,_e,"f"))):l(this,X,"m",us).call(this)})},Ar=function(t,e){var i;t&&this.debug&&((i=l(this,_e,"f"))===null||i===void 0||i.updateData({title:t,description:e}))},jr=function(){this.rootElement.onkeydown=t=>{var e,i,s;const n=!!(!((e=this.shadowRoot.activeElement)===null||e===void 0)&&e.getAttribute("href")),o=ic.includes((s=(i=this.shadowRoot.activeElement)===null||i===void 0?void 0:i.localName)!==null&&s!==void 0?s:"");if(t.key!=="Enter"||n||o)return;t.preventDefault();const r=this.rootElement.querySelectorAll("descope-button");if(r.length===1&&r[0].getAttribute("auto-submit")!=="false")return void r[0].click();const a=Array.from(r).filter(c=>c.getAttribute("auto-submit")==="true");if(a.length===1)return void a[0].click();const d=Array.from(r).filter(c=>c.getAttribute("data-type")==="button");if(d.length===1)d[0].getAttribute("auto-submit")!=="false"&&d[0].click();else if(d.length===0){const c=Array.from(r).filter(u=>u.getAttribute("data-type")==="sso");c.length===1&&c[0].getAttribute("auto-submit")!=="false"&&c[0].click()}}},Ai.sdkConfigOverrides={baseHeaders:{"x-descope-sdk-name":"web-component","x-descope-sdk-version":"3.24.1"}};let Ws=class extends Ai{static set sdkConfigOverrides(e){Ai.sdkConfigOverrides=e}constructor(){const e=new pt({deferredRedirect:!1});super(e.update.bind(e)),Z.add(this),this.stepState=new pt({},{updateOnlyOnChange:!1}),Ot.set(this,void 0),Se.set(this,null),bi.set(this,{visibilitychange:l(this,Z,"m",_r).bind(this)}),Et.set(this,(i,s,n,o,r)=>{n===jo&&(this.logger.debug("polling - Scheduling polling request"),C(this,Ot,setTimeout(()=>g(this,void 0,void 0,function*(){var a,d;this.logger.debug("polling - Calling next");const c=yield this.sdk.flow.next(i,s,Eo,o,r,{});if(((a=c==null?void 0:c.error)===null||a===void 0?void 0:a.errorCode)===gr)return this.logger.debug("polling - Got a generic error due to exception in fetch call"),void l(this,Et,"f").call(this,i,s,n,o,r);this.logger.debug("polling - Got a response"),c!=null&&c.error&&this.logger.debug("polling - Response has an error",JSON.stringify(c.error,null,4)),l(this,xe,"f").call(this,c);const{action:u}=(d=c==null?void 0:c.data)!==null&&d!==void 0?d:{};l(this,Et,"f").call(this,i,s,u,o,r)}),2e3),"f"))}),Or.set(this,()=>{clearTimeout(l(this,Ot,"f")),C(this,Ot,null,"f")}),xe.set(this,i=>{var s,n,o,r,a,d,c,u,h,v,f;if(!(i!=null&&i.ok)){const ne=(s=i==null?void 0:i.response)===null||s===void 0?void 0:s.url,S=`${(n=i==null?void 0:i.response)===null||n===void 0?void 0:n.status} - ${(o=i==null?void 0:i.response)===null||o===void 0?void 0:o.statusText}`;return l(this,Z,"m",Wt).call(this,"error",(i==null?void 0:i.error)||{errorCode:"J151001",errorDescription:S,errorMessage:ne}),void this.loggerWrapper.error(((r=i==null?void 0:i.error)===null||r===void 0?void 0:r.errorDescription)||ne,((a=i==null?void 0:i.error)===null||a===void 0?void 0:a.errorMessage)||S)}(c=(d=i.data)===null||d===void 0?void 0:d.runnerLogs)===null||c===void 0||c.forEach(ne=>{const{level:S,title:de,log:pe}=ne;S&&this.loggerWrapper[S]?this.loggerWrapper[S](de,pe):this.loggerWrapper.info(de,pe)});const p=(v=(h=(u=i.data)===null||u===void 0?void 0:u.screen)===null||h===void 0?void 0:h.state)===null||v===void 0?void 0:v.errorText;!((f=i.data)===null||f===void 0)&&f.error?this.loggerWrapper.error(`[${i.data.error.code}]: ${i.data.error.description}`,`${p?`${p} - `:""}${i.data.error.message}`):p&&this.loggerWrapper.error(p);const{status:m,authInfo:b,lastAuth:R}=i.data;if(m==="completed")return this.storeLastAuthenticatedUser&&function(ne){ne!=null&&ne.authMethod&&Ii&&localStorage.setItem(mr,JSON.stringify(ne))}(R),void l(this,Z,"m",Wt).call(this,"success",b);const{executionId:I,stepId:P,stepName:D,action:q,screen:N,redirect:_,openInNewTabUrl:Q,webauthn:Y,error:te,samlIdpResponse:oe}=i.data;q!==jo?(this.loggerWrapper.info(`Step "${D||`#${P}`}" is ${m}`,"",{screen:N,status:m,stepId:P,stepName:D,action:q,error:te}),this.flowState.update({stepId:P,executionId:I,action:q,redirectTo:_==null?void 0:_.url,openInNewTabUrl:Q,screenId:N==null?void 0:N.id,screenState:N==null?void 0:N.state,webauthnTransactionId:Y==null?void 0:Y.transactionId,webauthnOptions:Y==null?void 0:Y.options,samlIdpResponseUrl:oe==null?void 0:oe.url,samlIdpResponseSamlResponse:oe==null?void 0:oe.samlResponse,samlIdpResponseRelayState:oe==null?void 0:oe.relayState})):this.flowState.update({action:q})}),hs.set(this,Es(()=>g(this,void 0,void 0,function*(){var i;try{const s=yield this.sdk.webauthn.signIn.start("",window.location.origin);return s.ok||this.loggerWrapper.warn("Webauthn start failed",(i=s==null?void 0:s.error)===null||i===void 0?void 0:i.errorMessage),s.data}catch(s){this.loggerWrapper.warn("Webauthn start failed",s.message)}}))),yi.set(this,rc((i,s)=>g(this,void 0,void 0,function*(){if(i.getAttribute("formnovalidate")==="true"||l(this,Z,"m",Wr).call(this)){const o=i==null?void 0:i.getAttribute("id");l(this,Z,"m",Tr).call(this,i);const r=yield l(this,Z,"m",Lr).call(this),a=(n=i,Array.from((n==null?void 0:n.attributes)||[]).reduce((f,p)=>{var m;const b=(m=new RegExp("^data-descope-(\\S+)$").exec(p.name))===null||m===void 0?void 0:m[1];return b?Object.assign(f,{[b]:p.value}):f},{})),d=this.getComponentsContext(),c=Object.assign(Object.assign(Object.assign(Object.assign({},d),a),r),{origin:window.location.origin}),u=yield this.getFlowConfig(),h=yield this.getProjectConfig(),v=yield s(o,u.version,h.componentsVersion,c);l(this,xe,"f").call(this,v),l(this,Z,"m",Pr).call(this,r)}var n}))),this.flowState=e}loadSdkScripts(){return g(this,void 0,void 0,function*(){const e=(yield this.getFlowConfig()).sdkScripts;e==null||e.forEach(i=>g(this,void 0,void 0,function*(){(yield function(s){return g(this,void 0,void 0,function*(){let n;switch(s){case"forter":return n=yield ye(()=>Promise.resolve().then(()=>ig),void 0),n.default;case"fingerprint":return n=yield ye(()=>Promise.resolve().then(()=>sg),void 0),n.default;case"fingerprintDescope":return n=yield ye(()=>Promise.resolve().then(()=>og),void 0),n.default;default:throw new Error(`Unknown script id: ${s}`)}})}(i.id))(i.initArgs,{baseUrl:this.baseUrl},s=>{this.dispatchEvent(new CustomEvent("components-context",{detail:{[hc(i.id,i.resultKey)]:s},bubbles:!0,composed:!0}))})}))})}init(){const e=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var i,s,n;this.shadowRoot.isConnected&&((i=this.flowState)===null||i===void 0||i.subscribe(this.onFlowChange.bind(this)),(s=this.stepState)===null||s===void 0||s.subscribe(this.onStepChange.bind(this)),window.addEventListener("visibilitychange",l(this,bi,"f").visibilitychange)),yield(n=e.init)===null||n===void 0?void 0:n.call(this)})}disconnectedCallback(){var e;super.disconnectedCallback(),this.flowState.unsubscribeAll(),this.stepState.unsubscribeAll(),(e=l(this,Se,"f"))===null||e===void 0||e.abort(),C(this,Se,null,"f"),window.removeEventListener("visibilitychange",l(this,bi,"f").visibilitychange)}getHtmlFilenameWithLocale(e,i){return g(this,void 0,void 0,function*(){let s;const n=ss(e),o=yield this.getTargetLocales();return o.includes(n.locale)?s=`${i}-${n.locale}.html`:o.includes(n.fallback)&&(s=`${i}-${n.fallback}.html`),s})}getPageContent(e,i){return g(this,void 0,void 0,function*(){if(i)try{const{body:s}=yield Si(i,"text");return s}catch(s){this.loggerWrapper.error(`Failed to fetch flow page from ${i}. Fallback to url ${e}`,s)}try{const{body:s}=yield Si(e,"text");return s}catch(s){this.loggerWrapper.error("Failed to fetch flow page",s.message)}return null})}onFlowChange(e,i,s){return g(this,void 0,void 0,function*(){var n,o;const{projectId:r,flowId:a,tenant:d,stepId:c,executionId:u,action:h,screenId:v,screenState:f,redirectTo:p,openInNewTabUrl:m,redirectUrl:b,token:R,code:I,exchangeError:P,webauthnTransactionId:D,webauthnOptions:q,redirectAuthCodeChallenge:N,redirectAuthCallbackUrl:_,redirectAuthBackupCallbackUri:Q,redirectAuthInitiator:Y,locale:te,samlIdpResponseUrl:oe,samlIdpResponseSamlResponse:ne,samlIdpResponseRelayState:S}=e,de=Oe(e,["projectId","flowId","tenant","stepId","executionId","action","screenId","screenState","redirectTo","openInNewTabUrl","redirectUrl","token","code","exchangeError","webauthnTransactionId","webauthnOptions","redirectAuthCodeChallenge","redirectAuthCallbackUrl","redirectAuthBackupCallbackUri","redirectAuthInitiator","locale","samlIdpResponseUrl","samlIdpResponseSamlResponse","samlIdpResponseRelayState"]);let pe,ei;const ti=(()=>{const E=localStorage.getItem(qo);if(!E){const ie=Math.floor(100*Math.random()+1);return localStorage.setItem(qo,ie.toString()),ie}return Number(E)})(),tt=this.sdk.getLastUserLoginId(),ce=yield this.getFlowConfig(),ii=yield this.getProjectConfig(),Bs=_&&N?{callbackUrl:_,codeChallenge:N,backupCallbackUri:Q}:void 0;if(!u&&(this.loadSdkScripts(),ce.fingerprintEnabled&&ce.fingerprintKey?yield Qn(ce.fingerprintKey,this.baseUrl):Yl(),ce.conditions?{startScreenId:pe,conditionInteractionId:ei}=((E,ie)=>{const re=ie==null?void 0:ie.find(({key:ee,operator:ue,predicate:Ua})=>{var Bi;if(ee==="ELSE")return!0;const Vs=(Bi=No[ee])===null||Bi===void 0?void 0:Bi[ue];return!!(Vs!=null&&Vs(E,Ua))});return re?{startScreenId:re.met.screenId,conditionInteractionId:re.met.interactionId}:{}})({loginId:tt,code:I,token:R,abTestingKey:ti},ce.conditions):ce.condition?{startScreenId:pe,conditionInteractionId:ei}=((E,ie)=>{var re;const ee=(re=No[E==null?void 0:E.key])===null||re===void 0?void 0:re[E.operator];if(!ee)return{};const ue=ee(ie,E.predicate)?E.met:E.unmet;return{startScreenId:ue==null?void 0:ue.screenId,conditionInteractionId:ue==null?void 0:ue.interactionId}})(ce.condition,{loginId:tt,code:I,token:R,abTestingKey:ti}):pe=ce.startScreenId,!Wo(pe,de))){const E=yield this.sdk.flow.start(a,Object.assign(Object.assign(Object.assign(Object.assign({tenant:d,redirectAuth:Bs},de),{client:this.client}),b&&{redirectUrl:b}),{lastAuth:Fo(tt),abTestingKey:ti,locale:ss(te).locale}),ei,"",ce.version,ii.componentsVersion,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.formConfigValues),I?{exchangeCode:I,idpInitiated:!0}:{}),de.descopeIdpInitiated&&{idpInitiated:!0}),R?{token:R}:{}),de.oidcLoginHint?{externalId:de.oidcLoginHint}:{}));return l(this,xe,"f").call(this,E),void(((n=E==null?void 0:E.data)===null||n===void 0?void 0:n.status)!=="completed"&&this.flowState.update({code:void 0,token:void 0}))}if(u&&(s("token")&&R||s("code")&&I||s("exchangeError")&&P)){const E=yield this.sdk.flow.next(u,c,Oo,ce.version,ii.componentsVersion,{token:R,exchangeCode:I,exchangeError:P});return l(this,xe,"f").call(this,E),void this.flowState.update({token:void 0,code:void 0,exchangeError:void 0})}if(h===tc&&["samlIdpResponseUrl","samlIdpResponseSamlResponse","samlIdpResponseRelayState"].some(E=>s(E))){if(!oe||!ne)return void this.loggerWrapper.error("Did not get saml idp params data to load");((E,ie,re,ee)=>{const ue=document.createElement("form");ue.method="POST",ue.action=E,ue.innerHTML=`
  <input type="hidden" role="saml-response" name="SAMLResponse" value="${ie}" />
  <input type="hidden" role="saml-relay-state" name="RelayState" value="${re}" />
  <input style="display: none;" id="SAMLSubmitButton" type="submit" value="Continue" />
  `,document.body.appendChild(ue),ee(ue)})(oe,ne,S||"",nc)}if(h===Yd&&(s("redirectTo")||s("deferredRedirect")))return p?Y==="android"&&document.hidden?void this.flowState.update({deferredRedirect:!0}):void window.location.assign(p):void this.loggerWrapper.error("Did not get redirect url");if(h===_o||h===ec){if(!D||!q)return void this.loggerWrapper.error("Did not get webauthn transaction id or options");let E,ie;(o=l(this,Se,"f"))===null||o===void 0||o.abort(),C(this,Se,null,"f");try{E=h===_o?yield this.sdk.webauthn.helpers.create(q):yield this.sdk.webauthn.helpers.get(q)}catch(ee){ee.name==="InvalidStateError"?this.loggerWrapper.warn("WebAuthn operation failed",ee.message):ee.name!=="NotAllowedError"&&this.loggerWrapper.error(ee.message),ie=ee.name}const re=yield this.sdk.flow.next(u,c,Oo,ce.version,ii.componentsVersion,{transactionId:D,response:E,failure:ie});l(this,xe,"f").call(this,re)}if(l(this,Et,"f").call(this,u,c,h,ce.version,ii.componentsVersion),!v&&!pe)return void this.loggerWrapper.warn("No screen was found to show");const Ks=pe||v,Hs=yield this.getHtmlFilenameWithLocale(te,Ks),{oidcLoginHint:$a,oidcPrompt:Ia,oidcErrorRedirectUri:xa,samlIdpUsername:Sa}=de,qi={direction:sc(c,i.stepId),screenState:Object.assign(Object.assign({},f),{form:Object.assign(Object.assign({},this.formConfigValues),f==null?void 0:f.form),lastAuth:{loginId:tt,name:this.sdk.getLastUserDisplayName()||tt}}),htmlUrl:Mi({projectId:r,filename:`${Ks}.html`,baseUrl:this.baseStaticUrl}),htmlLocaleUrl:Hs&&Mi({projectId:r,filename:Hs,baseUrl:this.baseStaticUrl}),samlIdpUsername:Sa,oidcLoginHint:$a,oidcPrompt:Ia,oidcErrorRedirectUri:xa,openInNewTabUrl:m},Ma=Fo(tt);Wo(pe,de)?qi.next=(E,ie,re,ee)=>this.sdk.flow.start(a,Object.assign(Object.assign(Object.assign(Object.assign({tenant:d,redirectAuth:Bs},de),{lastAuth:Ma,preview:this.preview,abTestingKey:ti,client:this.client}),b&&{redirectUrl:b}),{locale:ss(te).locale}),ei,E,ie,re,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.formConfigValues),ee),I&&{exchangeCode:I,idpInitiated:!0}),de.descopeIdpInitiated&&{idpInitiated:!0}),R&&{token:R})):(s("projectId")||s("baseUrl")||s("executionId")||s("stepId"))&&(qi.next=(...E)=>this.sdk.flow.next(u,c,...E)),this.stepState.update(qi)})}onStepChange(e,i){return g(this,void 0,void 0,function*(){var s,n;const{htmlUrl:o,htmlLocaleUrl:r,direction:a,next:d,screenState:c,openInNewTabUrl:u}=e,h=document.createElement("template");h.innerHTML=yield this.getPageContent(o,r);const v=h.content.cloneNode(!0),f=this.loadDescopeUiComponents(h);this.sdk.webauthn.helpers.isSupported()?yield l(this,Z,"m",Er).call(this,v,d):v.querySelectorAll(`descope-button[${xi}="biometrics"]`).forEach(b=>b.setAttribute("disabled","true")),!e.samlIdpUsername||!((s=c.form)===null||s===void 0)&&s.loginId||!((n=c.form)===null||n===void 0)&&n.email||(c.form||(c.form={}),c.form.loginId=e.samlIdpUsername,c.form.email=e.samlIdpUsername),lc(v,c,c.componentsConfig,this.formConfig,this.errorTransformer,this.loggerWrapper);const{geo:p}=yield this.getExecutionContext();((b,R)=>{Array.from(b.querySelectorAll('descope-phone-field[default-code="autoDetect"]')).forEach(I=>{I.setAttribute("default-code",R)})})(v,p);const m=()=>g(this,void 0,void 0,function*(){var b,R;yield f;const I=this.shadowRoot.querySelector("div");var P,D;P=I,D=(b=c==null?void 0:c.totp)===null||b===void 0?void 0:b.image,Do(P,"descope-totp-image",D),((N,_)=>{Do(N,"descope-notp-image",_)})(I,(R=c==null?void 0:c.notp)===null||R===void 0?void 0:R.image),this.rootElement.replaceChildren(v),setTimeout(()=>{((N,_)=>{To(N,_==null?void 0:_.inputs),To(N,_==null?void 0:_.form)})(this.rootElement,c)});const q=!i.htmlUrl;if(((N,_,Q)=>{if(_===!0||_==="skipFirstScreen"&&!Q){const Y=N.querySelector("*[name]");setTimeout(()=>{Y==null||Y.focus()})}})(this.rootElement,this.autoFocus,q),this.validateOnBlur&&(N=>{N.querySelectorAll("*[name]").forEach(_=>{_.addEventListener("blur",()=>{var Q;const Y=_.focus;_.focus=()=>{},(Q=_.reportValidity)===null||Q===void 0||Q.call(_),setTimeout(()=>{_.focus=Y})})})})(this.rootElement),l(this,Z,"m",Dr).call(this,d),q&&l(this,Z,"m",Wt).call(this,"ready",{}),l(this,Z,"m",Wt).call(this,"page-updated",{}),this.rootElement.querySelector(`[${xi}="polling"]`)){const N=yield this.getFlowConfig(),_=yield this.getProjectConfig(),Q=yield d(Eo,N.version,_.componentsVersion,{});l(this,xe,"f").call(this,Q)}u&&!i.openInNewTabUrl&&window.open(u,"_blank")});a?l(this,Z,"m",Nr).call(this,m,a):m()})}};Ot=new WeakMap,Se=new WeakMap,bi=new WeakMap,Et=new WeakMap,Or=new WeakMap,xe=new WeakMap,hs=new WeakMap,yi=new WeakMap,Z=new WeakSet,_r=function(){document.hidden||setTimeout(()=>{this.flowState.update({deferredRedirect:!1})},300)},Ho=function(t){const e=t.getAttribute("name");if(!["email"].includes(e)){const i=`user-${e}`;t.setAttribute("name",i),t.addEventListener("input",()=>{t.setAttribute("name",t.value?e:i)})}},Er=function(t,e){return g(this,void 0,void 0,function*(){var i;(i=l(this,Se,"f"))===null||i===void 0||i.abort();const s=t.querySelector('*[autocomplete="webauthn"]');if(s&&(yield dc())){const{options:n,transactionId:o}=(yield l(this,hs,"f").call(this))||{};if(n&&o){l(this,Z,"m",Ho).call(this,s),C(this,Se,new AbortController,"f");const r=yield this.getFlowConfig(),a=yield this.getProjectConfig();this.sdk.webauthn.helpers.conditional(n,l(this,Se,"f")).then(d=>g(this,void 0,void 0,function*(){const c=yield e(s.id,r.version,a.componentsVersion,{transactionId:o,response:d});l(this,xe,"f").call(this,c)})).catch(d=>{d.name!=="AbortError"&&this.loggerWrapper.error("Conditional login failed",d.message)})}}})},Wr=function(){let t=!0;return Array.from(this.shadowRoot.querySelectorAll("*[name]")).reverse().forEach(e=>{var i,s;e.localName!=="slot"&&((i=e.reportValidity)===null||i===void 0||i.call(e),t&&(t=(s=e.checkValidity)===null||s===void 0?void 0:s.call(e)))}),t},Lr=function(){return g(this,void 0,void 0,function*(){const t=Array.from(this.shadowRoot.querySelectorAll(`*[name]:not([${fr}])`));return(yield Promise.all(t.map(e=>g(this,void 0,void 0,function*(){return{name:e.getAttribute("name"),value:e.value}})))).reduce((e,i)=>Object.assign(Object.assign({},e),{[i.name]:i.value}),{})})},Tr=function(t){const e=this.nextRequestStatus.subscribe(({isLoading:i})=>{i?t.setAttribute("loading","true"):(this.nextRequestStatus.unsubscribe(e),t.removeAttribute("loading"))})},Pr=function(t={}){var e,i;const s=Lo(t,["externalId","email","phone"]),n=Lo(t,["newPassword","password"]);if(s&&n)try{if(!globalThis.PasswordCredential)return;const o=new globalThis.PasswordCredential({id:s,password:n});(i=(e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.store)===null||i===void 0||i.call(e,o)}catch(o){this.loggerWrapper.error("Could not store credentials",o.message)}},Vo=function(t){this.rootElement.querySelectorAll('descope-passcode[data-auto-submit="true"]').forEach(e=>{e.addEventListener("input",()=>{var i;!((i=e.checkValidity)===null||i===void 0)&&i.call(e)&&l(this,yi,"f").call(this,e,t)})})},Dr=function(t){this.rootElement.querySelectorAll("descope-button:not([data-exclude-next])").forEach(e=>{e.onclick=()=>{l(this,yi,"f").call(this,e,t)}}),l(this,Z,"m",Vo).call(this,t)},Nr=function(t,e){this.rootElement.addEventListener("transitionend",()=>{this.rootElement.classList.remove("fade-out"),t()},{once:!0});const i=e===qt.forward?"slide-forward":"slide-backward";Array.from(this.rootElement.getElementsByClassName("input-container")).forEach((s,n)=>{s.style["transition-delay"]=40*n+"ms",s.classList.add(i)}),this.rootElement.classList.add("fade-out")},Wt=function(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))},customElements.get("descope-wc")?console.log("descope-wc is already defined"):customElements.define("descope-wc",Ws);const gc=Object.freeze(Object.defineProperty({__proto__:null,default:Ws},Symbol.toStringTag,{value:"Module"})),Fr=(t,e)=>Object.entries(t).reduce((i,[s,n])=>{const[o,...r]=s.split(".");return e!==o?Object.assign(i,{[s]:n}):(i[o]||(i[o]={}),i[o][r.join(".")]=n,i)},{}),qr=(t,e)=>Object.fromEntries(Object.entries(t||{}).map(([i,s])=>[`${e}.${i}`,s])),Ls={enabled:"active",disabled:"disabled",invited:"invited"},Br=t=>t.tenantRoles.data,Di=t=>t.selectedUsersLoginIds,vc=t=>t.notifications,ji=t=>t.customAttributes.data,gs=M(t=>t.usersList.data,t=>t.map(e=>Object.assign(Object.assign(Object.assign({},e),qr(e==null?void 0:e.customAttributes,"customAttributes")),{status:Ls[e.status]||e.status,roles:e.roleNames}))),Gt=M(Di,gs,(t,e)=>e.filter(i=>t.includes(i.loginIds))),pc=M(Gt,t=>t.map(e=>e.userId)),Kr=M(Gt,t=>t.map(e=>e.status)),Jt=M(Gt,t=>t.every(e=>e.editable)),fc=M(Di,t=>!!t.length),Rt=M(Di,t=>t.length===1),Ni=M(Di,t=>{var e;return(e=t==null?void 0:t[0])===null||e===void 0?void 0:e[0]}),mc=M(Rt,Kr,(t,e)=>t&&e.every(i=>i===Ls.enabled)),bc=M(Kr,t=>t.every(e=>e===Ls.disabled)),Zt=M(Gt,t=>{var e;return t.length===1?t[0].name||t[0].email||((e=t[0].loginIds)===null||e===void 0?void 0:e[0]):`${t.length} users`}),yc=M(Rt,bc,Jt,(t,e,i)=>t&&e&&i),wc=M(Rt,mc,Jt,(t,e,i)=>t&&e&&i),kc=M(Rt,Jt,(t,e)=>t&&e),Cc=M(Rt,Jt,(t,e)=>t&&e),Rc=M(Rt,Jt,(t,e)=>t&&e),$c=fc,Re=t=>(...e)=>i=>{i.addCase(t.pending,(s,n)=>{e.forEach(({onPending:o})=>{o==null||o(s,n)})}),i.addCase(t.fulfilled,(s,n)=>{e.forEach(({onFulfilled:o})=>{o==null||o(s,n)})}),i.addCase(t.rejected,(s,n)=>{e.forEach(({onRejected:o})=>{o==null||o(s,n)})})},$e=t=>({onFulfilled:e=>{t(e).loading=!1},onPending:e=>{t(e).loading=!0,t(e).error=null},onRejected:(e,i)=>{t(e).loading=!1,t(e).error=i.error}}),Ye=({getErrorMsg:t,getSuccessMsg:e})=>({onFulfilled:(i,s)=>{e&&i.notifications.push({type:"success",msg:e(s)})},onRejected:(i,s)=>{t&&i.notifications.push({type:"error",msg:t(s)})}}),Hr=L("users/create",(t,{extra:{api:e}})=>e.user.create(t)),Ic=Re(Hr)({onFulfilled:(t,e)=>{t.usersList.data.unshift(e.payload)}},$e(t=>t.createUser),Ye({getSuccessMsg:()=>"User created successfully",getErrorMsg:t=>{var e;return`
      <div>
        <div>Failed to create user</div>
        ${(e=t.error)===null||e===void 0?void 0:e.message}
      </div>`}})),zo={action:Hr,reducer:Ic},Vr=L("users/delete",(t,{extra:{api:e}})=>e.user.deleteBatch(t)),xc=Re(Vr)({onFulfilled:(t,e)=>{t.usersList.data=t.usersList.data.filter(i=>!e.meta.arg.includes(i.userId)),t.selectedUsersLoginIds=[]}},$e(t=>t.deleteUser),Ye({getSuccessMsg:t=>we(t.meta.arg.length)`${["",t.meta.arg.length]} ${["U","u"]}ser${["","s"]} deleted successfully`,getErrorMsg:t=>we(t.meta.arg.length)`Failed to delete user${["","s"]}`})),Go={action:Vr,reducer:xc},zr=L("users/setTempPassword",(t,{extra:{api:e}})=>e.user.setTempPassword(t)),Sc=Re(zr)($e(t=>t.setTempUserPassword),Ye({getSuccessMsg:()=>"Successfully reset user password",getErrorMsg:t=>{var e;return`
      <div>
        <div>Failed to reset user's password</div>
        ${(e=t.error)===null||e===void 0?void 0:e.message}
      </div>`}})),Jo={action:zr,reducer:Sc},Gr=L("users/getCustomAttributes",(t,{extra:{api:e}})=>e.user.getCustomAttributes()),Mc=Re(Gr)({onFulfilled:(t,e)=>{t.customAttributes.data=e.payload}},$e(t=>t.customAttributes)),Zo={action:Gr,reducer:Mc},Jr=L("users/search",(t,{extra:{api:e},getState:i})=>{const s=i().searchParams;return e.user.search(Object.assign(Object.assign({},s),t))}),Uc=Re(Jr)({onPending:(t,e)=>{t.searchParams=Object.assign(Object.assign({},t.searchParams),e.meta.arg)},onFulfilled:(t,e)=>{t.usersList.data=e.payload}},$e(t=>t.usersList)),Xo={action:Jr,reducer:Uc},Zr=L("tenant/getTenantRoles",(t,{extra:{api:e}})=>e.tenant.getTenantRoles()),Ac=Re(Zr)({onFulfilled:(t,e)=>{t.tenantRoles.data=e.payload.roles}},$e(t=>t.tenantRoles)),Qo={action:Zr,reducer:Ac},Xr=L("users/update",(t,{extra:{api:e}})=>e.user.update(t)),jc=Re(Xr)({onFulfilled:(t,e)=>{const i=t.usersList.data.findIndex(s=>Bt(s.loginIds,e.payload.loginIds));i!==-1&&(t.usersList.data[i]=e.payload)}},$e(t=>t.updateUser),Ye({getSuccessMsg:()=>"User updated successfully",getErrorMsg:t=>{var e;return`
      <div>
        <div>Failed to update user</div>
        ${(e=t.error)===null||e===void 0?void 0:e.message}
      </div>`}})),Yo={action:Xr,reducer:jc},Qr=L("users/enable",(t,{extra:{api:e}})=>e.user.enable(t)),_c=Re(Qr)({onFulfilled:(t,e)=>{var i;const s=t.usersList.data.findIndex(n=>{var o;return Bt(n.loginIds,(o=e.payload.user)===null||o===void 0?void 0:o.loginIds)});s!==-1&&(t.usersList.data[s].status=(i=e.payload.user)===null||i===void 0?void 0:i.status)}},$e(t=>t.enableUser),Ye({getSuccessMsg:()=>"User enabled successfully",getErrorMsg:t=>{var e;return`
      <div>
        <div>Failed to enable user</div>
        ${(e=t.error)===null||e===void 0?void 0:e.message}
      </div>`}})),en={action:Qr,reducer:_c},Yr=L("users/disable",(t,{extra:{api:e}})=>e.user.disable(t)),Oc=Re(Yr)({onFulfilled:(t,e)=>{var i;const s=t.usersList.data.findIndex(n=>{var o;return Bt(n.loginIds,(o=e.payload.user)===null||o===void 0?void 0:o.loginIds)});s!==-1&&(t.usersList.data[s].status=(i=e.payload.user)===null||i===void 0?void 0:i.status)}},$e(t=>t.disableUser),Ye({getSuccessMsg:()=>"User disabled successfully",getErrorMsg:t=>{var e;return`
      <div>
        <div>Failed to disable user</div>
        ${(e=t.error)===null||e===void 0?void 0:e.message}
      </div>`}})),tn={action:Yr,reducer:Oc},sn=L("users/removePasskey",(t,{extra:{api:e}})=>e.user.removePasskey(t)),on={action:sn,reducer:Re(sn)($e(t=>t.removePasskey),Ye({getSuccessMsg:()=>"Successfully removed user's passkey",getErrorMsg:t=>{var e;return`
      <div>
        <div>Failed to remove user's passkey</div>
        ${(e=t.error)===null||e===void 0?void 0:e.message}
      </div>`}}))},nn={usersList:{data:[],loading:!1,error:null},createUser:{loading:!1,error:null},updateUser:{loading:!1,error:null},deleteUser:{loading:!1,error:null},enableUser:{loading:!1,error:null},disableUser:{loading:!1,error:null},removePasskey:{loading:!1,error:null},setTempUserPassword:{loading:!1,error:null},customAttributes:{loading:!1,error:null,data:[]},tenantRoles:{loading:!1,error:null,data:[]},searchParams:{text:"",sort:[]},selectedUsersLoginIds:[],notifications:[]},Ie={search:"/v1/mgmt/user/search",deleteBatch:"/v1/mgmt/user/delete/batch",create:"/v1/mgmt/user/create",update:"/v1/mgmt/user/update",status:"/v1/mgmt/user/update/status",setTempPassword:"/v1/mgmt/user/password/set/temporary",removePasskey:"/v1/mgmt/user/passkeys/delete",customAttributes:"/v1/mgmt/user/customattributes"},Ec={roles:"/v1/mgmt/role/all"},be=t=>g(void 0,void 0,void 0,function*(){const e=yield t.text(),i=JSON.parse(e);if(!t.ok){const s=`${i.errorDescription}${i.errorMessage?`: ${i.errorMessage}`:""}`;throw Error(s||`${t.status} ${t.statusText}`)}t.json=()=>Promise.resolve(i),t.text=()=>Promise.resolve(e)}),Wc=t=>g(void 0,[t],void 0,function*({text:e,sort:i}){return new Promise(s=>{const n=[];for(let o=1;o<10;o+=1)n.push({loginIds:[`user${o}@company.com`],externalIds:[`user${o}@company.com`],userId:`user-${o}`,name:`User ${o}`,email:`user${o}@company.com`,roleNames:[`Role ${o}`],phone:`+1-202-555-010${o}`,verifiedEmail:!0,verifiedPhone:!0,userTenants:[],status:"enabled",editable:!0,createdTime:new Date().getTime(),customAttributes:{},familyName:"",givenName:"",middleName:"",picture:"",password:!0,SAML:!1,test:!1,TOTP:!1,webauthn:!1});i.forEach(o=>{n.sort((r,a)=>{var d,c;return o.desc?(c=a[o.field])===null||c===void 0?void 0:c.localeCompare(r[o.field]):(d=r[o.field])===null||d===void 0?void 0:d.localeCompare(a[o.field])})}),s(n.filter(o=>o.name.toLowerCase().includes(e.toLowerCase())||o.phone.toLowerCase().includes(e.toLowerCase())||o.status.toLowerCase().includes(e.toLowerCase())||e.toLowerCase()==="active"||o.familyName.toLowerCase().includes(e.toLowerCase())||o.givenName.toLowerCase().includes(e.toLowerCase())||o.middleName.toLowerCase().includes(e.toLowerCase())||o.email.toLowerCase().includes(e.toLowerCase())))})}),Lc=t=>g(void 0,[t],void 0,function*({loginId:e,email:i,phone:s,displayName:n,roles:o,customAttributes:r,picture:a,verifiedEmail:d,verifiedPhone:c,givenName:u,middleName:h,familyName:v}){return new Promise(f=>{const p=Math.random().toString(10).substring(15);f({loginIds:[e],externalIds:[e],userId:`user-${p}`,email:i,phone:s,name:n,roleNames:o,customAttributes:r,picture:a,verifiedEmail:d,verifiedPhone:c,givenName:u,middleName:h,familyName:v,createdTime:new Date().getTime(),editable:!0,password:!0,SAML:!1,status:"enabled",test:!1,TOTP:!1,userTenants:[],webauthn:!1})})}),Tc=t=>g(void 0,[t],void 0,function*({loginId:e,email:i,phone:s,displayName:n,roles:o,customAttributes:r,picture:a,verifiedEmail:d,verifiedPhone:c,givenName:u,middleName:h,familyName:v}){return new Promise(f=>{f({loginIds:[e],externalIds:[e],userId:e,email:i,phone:s,name:n,roleNames:o,customAttributes:r,picture:a,verifiedEmail:d,verifiedPhone:c,givenName:u,middleName:h,familyName:v,createdTime:new Date().getTime(),editable:!0,password:!0,SAML:!1,status:"enabled",test:!1,TOTP:!1,userTenants:[],webauthn:!1})})}),Pc=()=>g(void 0,void 0,void 0,function*(){}),Dc=()=>g(void 0,void 0,void 0,function*(){return new Promise(t=>{t({cleartext:Math.random().toString(20).substring(2)})})}),Nc=()=>g(void 0,void 0,void 0,function*(){}),Fc=t=>g(void 0,void 0,void 0,function*(){return new Promise(e=>{e({user:{loginIds:[t],status:"enabled"}})})}),qc=t=>g(void 0,void 0,void 0,function*(){return new Promise(e=>{e({user:{loginIds:[t],status:"disabled"}})})}),Bc=()=>g(void 0,void 0,void 0,function*(){return new Promise(t=>{t([])})}),Kc=t=>new Promise(e=>{const i=[];for(let s=1;s<5;s+=1)i.push({name:`Role ${s}`,description:`Role description ${s}`,createdTime:new Date,permissionNames:[`Permission ${s}`],tenantId:t});e({roles:i})}),Hc=({httpClient:t,tenant:e,mock:i})=>({search:(...s)=>g(void 0,[...s],void 0,function*({page:n,limit:o=1e4,customAttributes:r,statuses:a,emails:d,phones:c,text:u,sort:h}={}){if(i)return Wc({page:n,limit:o,customAttributes:r,statuses:a,emails:d,phones:c,text:u,sort:h});const v=yield t.post(Ie.search,{limit:o,page:n,withTestUser:!1,customAttributes:r,statuses:a,emails:d,phones:c,text:u,sort:h},{queryParams:{tenant:e}});return yield be(v),(yield v.json()).users}),deleteBatch:s=>g(void 0,void 0,void 0,function*(){if(i)return Pc();const n=yield t.post(Ie.deleteBatch,{userIds:s},{queryParams:{tenant:e}});return yield be(n),n.json()}),create:s=>g(void 0,[s],void 0,function*({loginId:n,email:o,phone:r,displayName:a,roles:d,customAttributes:c,picture:u,verifiedEmail:h,verifiedPhone:v,givenName:f,middleName:p,familyName:m,additionalLoginIds:b,sendSMS:R,sendMail:I,inviteUrl:P,invite:D}){if(i)return Lc({loginId:n,email:o,phone:r,displayName:a,roles:d,customAttributes:c,picture:u,verifiedEmail:h,verifiedPhone:v,givenName:f,middleName:p,familyName:m,additionalLoginIds:b,sendSMS:R,sendMail:I,inviteUrl:P,invite:D});const q=yield t.post(Ie.create,{loginId:n,email:o,phone:r,displayName:a,givenName:f,middleName:p,familyName:m,roleNames:d,userTenants:[{tenantId:e}],customAttributes:c,picture:u,verifiedEmail:h,verifiedPhone:v,additionalLoginIds:b,sendSMS:R,sendMail:I,inviteUrl:P,invite:D},{queryParams:{tenant:e}});return yield be(q),(yield q.json()).user}),update:s=>g(void 0,[s],void 0,function*({loginId:n,email:o,phone:r,displayName:a,roles:d,customAttributes:c,picture:u,verifiedEmail:h,verifiedPhone:v,givenName:f,middleName:p,familyName:m,additionalLoginIds:b}){if(i)return Tc({loginId:n,email:o,phone:r,displayName:a,roles:d,customAttributes:c,picture:u,verifiedEmail:h,verifiedPhone:v,givenName:f,middleName:p,familyName:m,additionalLoginIds:b});const R=yield t.post(Ie.update,{loginId:n,email:o,phone:r,displayName:a,givenName:f,middleName:p,familyName:m,roleNames:d,customAttributes:c,picture:u,verifiedEmail:h,verifiedPhone:v,additionalLoginIds:b},{queryParams:{tenant:e}});return yield be(R),(yield R.json()).user}),enable:s=>g(void 0,void 0,void 0,function*(){if(i)return Fc(s);const n=yield t.post(Ie.status,{loginId:s,status:"enabled"},{queryParams:{tenant:e}});return yield be(n),n.json()}),disable:s=>g(void 0,void 0,void 0,function*(){if(i)return qc(s);const n=yield t.post(Ie.status,{loginId:s,status:"disabled"},{queryParams:{tenant:e}});return yield be(n),n.json()}),removePasskey:s=>g(void 0,void 0,void 0,function*(){if(i)return Nc();const n=yield t.post(Ie.removePasskey,{loginId:s},{queryParams:{tenant:e}});return yield be(n),n.json()}),setTempPassword:s=>g(void 0,void 0,void 0,function*(){if(i)return Dc();const n=yield t.post(Ie.setTempPassword,{loginId:s},{queryParams:{tenant:e}});return yield be(n),n.json()}),getCustomAttributes:()=>g(void 0,void 0,void 0,function*(){if(i)return Bc();const s=yield t.get(Ie.customAttributes,{queryParams:{tenant:e}});return yield be(s),(yield s.json()).data})}),Vc=({httpClient:t,tenant:e,mock:i})=>({getTenantRoles:()=>g(void 0,void 0,void 0,function*(){if(i)return Kc(e);const s=yield t.get(Ec.roles,{queryParams:{tenant:e}});return yield be(s),s.json()})}),zc=w(t=>{var e,i,s,n;const o=y(wt,Xe,k,kt,B({tenant:B.missingAttrValidator}))(t);return n=class extends o{constructor(){super(...arguments),e.add(this),i.set(this,void 0)}get tenant(){return this.getAttribute("tenant")}get widgetId(){return this.getAttribute("widget-id")}get mock(){return this.getAttribute("mock")}get api(){return l(this,i,"f")||l(this,e,"m",s).call(this),l(this,i,"f")}init(){const r=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var a;yield(a=r.init)===null||a===void 0?void 0:a.call(this),this.observeAttributes(["project-id","base-url","tenant"],()=>{l(this,i,"f")&&l(this,e,"m",s).call(this)})})}},i=new WeakMap,e=new WeakSet,s=function(){this.logger.debug("creating an sdk instance"),C(this,i,((r,a,d,c)=>{const u=Je(Object.assign(Object.assign({},r),{persistTokens:!0,baseHeaders:{"x-descope-widget-type":"user-management-widget","x-descope-widget-id":c,"x-descope-widget-version":"0.4.121"}}));return{user:Hc({httpClient:u.httpClient,tenant:a,mock:d}),tenant:Vc({httpClient:u.httpClient,tenant:a,mock:d})}})({projectId:this.projectId,baseUrl:this.baseUrl},this.tenant,this.mock==="true",this.widgetId),"f")},n}),H=w(t=>{const e=y(zt({name:"widget",initialState:nn,reducers:{setSelectedUsersIds:(i,{payload:s})=>{i.selectedUsersLoginIds=s},clearNotifications:i=>{i.notifications=[]}},extraReducers:i=>{zo.reducer(i),Yo.reducer(i),en.reducer(i),tn.reducer(i),Go.reducer(i),Xo.reducer(i),Jo.reducer(i),on.reducer(i),Zo.reducer(i),Qo.reducer(i)},asyncActions:{searchUsers:Xo.action,createUser:zo.action,updateUser:Yo.action,enableUser:en.action,disableUser:tn.action,deleteUsers:Go.action,removePasskey:on.action,getCustomAttributes:Zo.action,getTenantRoles:Qo.action,setTempUserPassword:Jo.action}}),K,k,zc)(t);return class extends e{constructor(...i){super(...i),this.state=nn,this.subscribe(s=>{this.logger.debug("State update:",s),this.state=s})}}}),Gc=w(t=>{const e=y(Qe,B({"widget-id":B.missingAttrValidator}))(t);return class extends e{get widgetId(){return this.getAttribute("widget-id")}fetchWidgetPage(i){return g(this,void 0,void 0,function*(){return(yield this.fetchStaticResource(`user-management-widget/${this.widgetId}/${i}`,"text")).body})}}}),G=w(t=>{var e,i,s;return s=class extends y(k,K,We,Le,Gc,H)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){return g(this,void 0,void 0,function*(){})}init(){const n=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var o;yield(o=n.init)===null||o===void 0?void 0:o.call(this),yield Promise.all([l(this,e,"m",i).call(this),this.actions.searchUsers(),this.actions.getTenantRoles(),this.actions.getCustomAttributes()]),this.onWidgetRootReady()})}},e=new WeakSet,i=function(){return g(this,void 0,void 0,function*(){const n=F(yield this.fetchWidgetPage("root.html"));yield this.loadDescopeUiComponents(n),this.contentRootElement.append(n.content.cloneNode(!0))})},s}),Jc=w(t=>{var e,i,s,n,o,r;return r=class extends y(H,T,z,k,G)(t){constructor(){super(...arguments),e.add(this),i.set(this,void 0),o.set(this,()=>g(this,void 0,void 0,function*(){yield l(this,i,"f").setData(Br(this.state).map(({name:a})=>({value:a,label:a})))}))}onWidgetRootReady(){const a=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var d;yield(d=a.onWidgetRootReady)===null||d===void 0?void 0:d.call(this),l(this,e,"m",s).call(this)})}},i=new WeakMap,o=new WeakMap,e=new WeakSet,s=function(){return g(this,void 0,void 0,function*(){this.createUserModal=this.createModal(),this.createUserModal.setContent(F(yield this.fetchWidgetPage("create-user-modal.html"))),new x(()=>{var a;return(a=this.createUserModal.ele)===null||a===void 0?void 0:a.querySelector('[data-id="modal-cancel"]')},{logger:this.logger}).onClick(()=>{this.createUserModal.close(),this.resetFormData(this.createUserModal.ele)}),new x(()=>{var a;return(a=this.createUserModal.ele)===null||a===void 0?void 0:a.querySelector('[data-id="modal-submit"]')},{logger:this.logger}).onClick(()=>g(this,void 0,void 0,function*(){if(this.validateForm(this.createUserModal.ele)){const a=this.getFormData(this.createUserModal.ele);this.actions.createUser(Object.assign(Object.assign({},Fr(a,"customAttributes")),{invite:!0,verifiedEmail:!0,verifiedPhone:!0})),this.createUserModal.close(),this.resetFormData(this.createUserModal.ele)}})),C(this,i,new Kt(()=>{var a;return(a=this.createUserModal.ele)===null||a===void 0?void 0:a.querySelector('[data-id="roles-multiselect"]')},{logger:this.logger}),"f"),l(this,o,"f").call(this),this.createUserModal.beforeOpen=()=>g(this,void 0,void 0,function*(){yield l(this,o,"f").call(this),l(this,e,"m",n).call(this)})})},n=function(){const a=ji(this.state);this.getFormFieldNames(this.createUserModal.ele).forEach(d=>{const[c,u]=d.split(".");if(c!=="customAttributes")return;const h=a.find(v=>v.name===u);h?h.editable||this.disableFormField(this.createUserModal.ele,d):this.removeFormField(this.createUserModal.ele,d)})},r}),Zc=w(t=>{var e,i,s;return s=class extends y(k,Jc,G)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){const n=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var o;yield(o=n.onWidgetRootReady)===null||o===void 0?void 0:o.call(this),l(this,e,"m",i).call(this)})}},e=new WeakSet,i=function(){var n;this.createButton=new x((n=this.shadowRoot)===null||n===void 0?void 0:n.querySelector('[data-id="create-user"]'),{logger:this.logger}),this.createButton.onClick(()=>this.createUserModal.open())},s}),Xc=w(t=>{var e,i,s;return s=class extends y(H,T,k,G)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){const n=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var o;yield(o=n.onWidgetRootReady)===null||o===void 0?void 0:o.call(this),yield l(this,e,"m",i).call(this)})}},e=new WeakSet,i=function(){return g(this,void 0,void 0,function*(){var n;this.deleteUsersModal=this.createModal(),this.deleteUsersModal.setContent(F(yield this.fetchWidgetPage("delete-users-modal.html"))),new x(()=>{var d;return(d=this.deleteUsersModal.ele)===null||d===void 0?void 0:d.querySelector('[data-id="modal-cancel"]')},{logger:this.logger}).onClick(()=>this.deleteUsersModal.close()),new x(()=>{var d;return(d=this.deleteUsersModal.ele)===null||d===void 0?void 0:d.querySelector('[data-id="modal-submit"]')},{logger:this.logger}).onClick(()=>{const d=pc(this.state);this.actions.deleteUsers(d),this.deleteUsersModal.close()});const a=new Ue((n=this.deleteUsersModal.ele)===null||n===void 0?void 0:n.querySelector('[data-id="body-text"]'),{logger:this.logger});this.deleteUsersModal.beforeOpen=()=>{const d=Zt(this.state);a.text=`Delete ${d}?`}})},s}),Qc=w(t=>{var e,i,s,n;return n=class extends y(k,G,H,Xc)(t){constructor(){super(...arguments),e.add(this),s.set(this,W(o=>{o?this.deleteButton.enable():this.deleteButton.disable()}))}onWidgetRootReady(){const o=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var r;l(this,e,"m",i).call(this),yield(r=o.onWidgetRootReady)===null||r===void 0?void 0:r.call(this),this.subscribe(l(this,s,"f").bind(this),$c)})}},s=new WeakMap,e=new WeakSet,i=function(){var o;this.deleteButton=new x((o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector('[data-id="delete-users"]'),{logger:this.logger}),this.deleteButton.disable(),this.deleteButton.onClick(()=>{this.deleteUsersModal.open()})},n}),Yc=w(t=>{var e,i,s,n,o;return o=class extends y(H,T,k,z,G)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){const r=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var a;yield(a=r.onWidgetRootReady)===null||a===void 0?void 0:a.call(this),yield l(this,e,"m",n).call(this)})}},e=new WeakSet,i=function(){new x(()=>{var r;return(r=this.disableUserModal.ele)===null||r===void 0?void 0:r.querySelector('[data-id="modal-cancel"]')},{logger:this.logger}).onClick(()=>this.disableUserModal.close())},s=function(){new x(()=>{var r;return(r=this.disableUserModal.ele)===null||r===void 0?void 0:r.querySelector('[data-id="modal-submit"]')},{logger:this.logger}).onClick(()=>{const r=Ni(this.state);this.actions.disableUser(r),this.disableUserModal.close()})},n=function(){return g(this,void 0,void 0,function*(){var r;this.disableUserModal=this.createModal(),this.disableUserModal.setContent(F(yield this.fetchWidgetPage("disable-user-modal.html"))),l(this,e,"m",i).call(this),l(this,e,"m",s).call(this);const a=new Ue((r=this.disableUserModal.ele)===null||r===void 0?void 0:r.querySelector('[data-id="body-text"]'),{logger:this.logger});this.disableUserModal.beforeOpen=()=>g(this,void 0,void 0,function*(){const d=Zt(this.state);a.text=`Disable ${d}?`})})},o}),eu=w(t=>{var e,i,s,n;return n=class extends y(k,G,H,Yc,z)(t){constructor(){super(...arguments),e.add(this),s.set(this,W(o=>{o?this.disableButton.enable():this.disableButton.disable()}))}onWidgetRootReady(){const o=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var r;l(this,e,"m",i).call(this),yield(r=o.onWidgetRootReady)===null||r===void 0?void 0:r.call(this),this.subscribe(l(this,s,"f").bind(this),wc)})}},s=new WeakMap,e=new WeakSet,i=function(){var o;this.disableButton=new x((o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector('[data-id="disable-user"]'),{logger:this.logger}),this.disableButton.disable(),this.disableButton.onClick(()=>{this.disableUserModal.open()})},n}),tu=t=>{if(!t)return t;const e=Oa(t),i=new RegExp(`(\\+?${e==null?void 0:e.countryCallingCode})(.*)`);return e.number.replace(i,"$1-$2")},iu=w(t=>{var e,i,s,n,o,r,a,d,c,u;return u=class extends y(H,T,k,z,G)(t){constructor(){super(...arguments),e.add(this),i.set(this,void 0),s.set(this,void 0),r.set(this,()=>g(this,void 0,void 0,function*(){yield l(this,s,"f").setData(Br(this.state).map(({name:h})=>({value:h,label:h})))})),d.set(this,()=>{var h,v;const f=(h=Gt(this.state))===null||h===void 0?void 0:h[0],p=Object.assign({loginId:(v=f==null?void 0:f.loginIds)===null||v===void 0?void 0:v.join(", "),displayName:f==null?void 0:f.name,email:f==null?void 0:f.email,phone:tu(f==null?void 0:f.phone),roles:f==null?void 0:f.roles},qr(f.customAttributes,"customAttributes"));this.setFormData(this.editUserModal.ele,p)})}onWidgetRootReady(){const h=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var v;yield(v=h.onWidgetRootReady)===null||v===void 0?void 0:v.call(this),yield l(this,e,"m",c).call(this)})}},i=new WeakMap,s=new WeakMap,r=new WeakMap,d=new WeakMap,e=new WeakSet,n=function(){new x(()=>{var h;return(h=this.editUserModal.ele)===null||h===void 0?void 0:h.querySelector('[data-id="modal-cancel"]')},{logger:this.logger}).onClick(()=>this.editUserModal.close())},o=function(){new x(()=>{var h;return(h=this.editUserModal.ele)===null||h===void 0?void 0:h.querySelector('[data-id="modal-submit"]')},{logger:this.logger}).onClick(()=>{if(this.validateForm(this.editUserModal.ele)){const h=this.getFormData(this.editUserModal.ele),{loginId:v}=h,f=Oe(h,["loginId"]);this.actions.updateUser(Object.assign({loginId:v.split(", ")[0]},Fr(f,"customAttributes"))),this.editUserModal.close(),this.resetFormData(this.editUserModal.ele)}})},a=function(){const h=ji(this.state);this.getFormFieldNames(this.editUserModal.ele).forEach(v=>{const[f,p]=v.split(".");if(f!=="customAttributes")return;const m=h.find(b=>b.name===p);m?m.editable||this.disableFormField(this.editUserModal.ele,v):this.removeFormField(this.editUserModal.ele,v)})},c=function(){return g(this,void 0,void 0,function*(){var h;this.editUserModal=this.createModal(),this.editUserModal.setContent(F(yield this.fetchWidgetPage("edit-user-modal.html"))),l(this,e,"m",n).call(this),l(this,e,"m",o).call(this),C(this,i,new Ht((h=this.editUserModal.ele)===null||h===void 0?void 0:h.querySelector('[name="loginId"]'),{logger:this.logger}),"f"),C(this,s,new Kt(()=>{var v;return(v=this.editUserModal.ele)===null||v===void 0?void 0:v.querySelector('[data-id="roles-multiselect"]')},{logger:this.logger}),"f"),this.editUserModal.beforeOpen=()=>g(this,void 0,void 0,function*(){yield l(this,r,"f").call(this),l(this,i,"f").disable(),l(this,d,"f").call(this),l(this,e,"m",a).call(this)})})},u}),su=w(t=>{var e,i,s,n;return n=class extends y(k,G,H,iu,z)(t){constructor(){super(...arguments),e.add(this),s.set(this,W(o=>{o?this.editButton.enable():this.editButton.disable()}))}onWidgetRootReady(){const o=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var r;l(this,e,"m",i).call(this),yield(r=o.onWidgetRootReady)===null||r===void 0?void 0:r.call(this),this.subscribe(l(this,s,"f").bind(this),kc)})}},s=new WeakMap,e=new WeakSet,i=function(){var o;this.editButton=new x((o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector('[data-id="edit-user"]'),{logger:this.logger}),this.editButton.disable(),this.editButton.onClick(()=>{this.editUserModal.open()})},n}),ou=w(t=>{var e,i,s,n,o;return o=class extends y(H,T,k,z,G)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){const r=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var a;yield(a=r.onWidgetRootReady)===null||a===void 0?void 0:a.call(this),yield l(this,e,"m",n).call(this)})}},e=new WeakSet,i=function(){new x(()=>{var r;return(r=this.enableUserModal.ele)===null||r===void 0?void 0:r.querySelector('[data-id="modal-cancel"]')},{logger:this.logger}).onClick(()=>this.enableUserModal.close())},s=function(){new x(()=>{var r;return(r=this.enableUserModal.ele)===null||r===void 0?void 0:r.querySelector('[data-id="modal-submit"]')},{logger:this.logger}).onClick(()=>{const r=Ni(this.state);this.actions.enableUser(r),this.enableUserModal.close()})},n=function(){return g(this,void 0,void 0,function*(){var r;this.enableUserModal=this.createModal(),this.enableUserModal.setContent(F(yield this.fetchWidgetPage("enable-user-modal.html"))),l(this,e,"m",i).call(this),l(this,e,"m",s).call(this);const a=new Ue((r=this.enableUserModal.ele)===null||r===void 0?void 0:r.querySelector('[data-id="body-text"]'),{logger:this.logger});this.enableUserModal.beforeOpen=()=>g(this,void 0,void 0,function*(){const d=Zt(this.state);a.text=`Activate ${d}?`})})},o}),nu=w(t=>{var e,i,s,n;return n=class extends y(k,G,H,ou,z)(t){constructor(){super(...arguments),e.add(this),s.set(this,W(o=>{o?this.enableButton.enable():this.enableButton.disable()}))}onWidgetRootReady(){const o=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var r;l(this,e,"m",i).call(this),yield(r=o.onWidgetRootReady)===null||r===void 0?void 0:r.call(this),this.subscribe(l(this,s,"f").bind(this),yc)})}},s=new WeakMap,e=new WeakSet,i=function(){var o;this.enableButton=new x((o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector('[data-id="enable-user"]'),{logger:this.logger}),this.enableButton.disable(),this.enableButton.onClick(()=>{this.enableUserModal.open()})},n}),ru=w(t=>{var e,i,s,n;return n=class extends y(k,G,H)(t){constructor(){super(...arguments),e.add(this),i.set(this,Ze(()=>{this.actions.searchUsers({text:this.searchInput.value})}))}onWidgetRootReady(){const o=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var r;yield(r=o.onWidgetRootReady)===null||r===void 0?void 0:r.call(this),l(this,e,"m",s).call(this)})}},i=new WeakMap,e=new WeakSet,s=function(){var o;this.searchInput=new Ht((o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector('[data-id="search-input"]'),{logger:this.logger}),this.searchInput.onInput(l(this,i,"f"))},n}),au={success:new DOMParser().parseFromString(`<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
<g id="Checkmark">
<path id="Shape" d="M10.0485 15.6396C9.5799 15.171 8.8201 15.171 8.35147 15.6396C7.88284 16.1082 7.88284 16.868 8.35147 17.3367L12.7072 21.6924C13.1759 22.1611 13.9357 22.1611 14.4043 21.6924L24.7152 11.3815C25.1838 10.9129 25.1838 10.1531 24.7152 9.68448C24.2466 9.21585 23.4868 9.21585 23.0181 9.68448L13.5558 19.1469L10.0485 15.6396Z" fill="currentcolor"/>
</g>
</svg>
`,"image/svg+xml").firstChild,error:new DOMParser().parseFromString(`<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
<g id="Icon">
<path id="Vector" d="M15.9998 26.6558C10.1118 26.6558 5.34375 21.8878 5.34375 15.9998C5.34375 10.1118 10.1118 5.34375 15.9998 5.34375C21.8878 5.34375 26.6558 10.1118 26.6558 15.9998C26.6558 21.8878 21.8878 26.6558 15.9998 26.6558ZM15.9998 24.4798C20.6718 24.4798 24.4798 20.7038 24.4798 15.9998C24.4798 11.3278 20.7038 7.51975 15.9998 7.51975C11.3278 7.51975 7.51975 11.2958 7.51975 15.9998C7.51975 20.6718 11.2958 24.4798 15.9998 24.4798ZM15.3278 9.34375H16.6718C17.0558 9.34375 17.3438 9.63175 17.3118 9.98375L16.9598 16.9278C16.9598 17.1838 16.7678 17.3438 16.5438 17.3438H15.4558C15.2318 17.3438 15.0398 17.1518 15.0398 16.9278L14.6878 9.98375C14.6878 9.63175 14.9758 9.34375 15.3278 9.34375ZM15.4558 19.4558H16.5438C16.9278 19.4558 17.2158 19.7438 17.1838 20.1278V21.1838C17.1838 21.5678 16.8958 21.8558 16.5438 21.8558H15.4558C15.0718 21.8558 14.7838 21.5678 14.7838 21.1838V20.1278C14.7838 19.7438 15.0718 19.4558 15.4558 19.4558Z" fill="currentcolor"/>
</g>
</svg>
`,"image/svg+xml").firstChild},lu=w(t=>{var e,i,s,n,o;return o=class extends y(k,H,Os,K)(t){constructor(){super(...arguments),e.add(this),n.set(this,W(r=>{r.length&&(r.forEach(({type:a,msg:d})=>{const c=l(this,e,"m",s).call(this,a);c.setContent(l(this,e,"m",i).call(this,{type:a,msg:d})),c.show()}),setTimeout(()=>this.actions.clearNotifications()))}))}init(){const r=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var a;yield(a=r.init)===null||a===void 0?void 0:a.call(this),this.subscribe(l(this,n,"f").bind(this),vc)})}},n=new WeakMap,e=new WeakSet,i=function({type:r,msg:a}){const d=au[r],c=Object.assign(new DOMParser().parseFromString(`<svg width="2em" height="2em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<g id="Icon">
<path id="Shape" d="M10.6712 12L7.27521 8.60406C6.90826 8.23711 6.90826 7.64216 7.27521 7.27521C7.64216 6.90826 8.23711 6.90826 8.60406 7.27521L12 10.6712L15.3959 7.27521C15.7629 6.90826 16.3578 6.90826 16.7248 7.27521C17.0917 7.64216 17.0917 8.23711 16.7248 8.60406L13.3288 12L16.7248 15.3959C17.0917 15.7629 17.0917 16.3578 16.7248 16.7248C16.3578 17.0917 15.7629 17.0917 15.3959 16.7248L12 13.3288L8.60406 16.7248C8.23711 17.0917 7.64216 17.0917 7.27521 16.7248C6.90826 16.3578 6.90826 15.7629 7.27521 15.3959L10.6712 12Z" fill="currentcolor"/>
</g>
</svg>
`,"image/svg+xml").firstChild,{slot:"close"});return`${(d==null?void 0:d.outerHTML)||""}${a}${c.outerHTML}`},s=function(r){return this.createNotification({mode:r,duration:r==="error"?0:3e3,position:"bottom-start",size:"sm"})},o}),du=w(t=>{var e,i,s,n,o;return o=class extends y(H,T,k,z,G)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){const r=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var a;yield(a=r.onWidgetRootReady)===null||a===void 0?void 0:a.call(this),yield l(this,e,"m",n).call(this)})}},e=new WeakSet,i=function(){new x(()=>{var r;return(r=this.removePasskeyModal.ele)===null||r===void 0?void 0:r.querySelector('[data-id="modal-cancel"]')},{logger:this.logger}).onClick(()=>this.removePasskeyModal.close())},s=function(){new x(()=>{var r;return(r=this.removePasskeyModal.ele)===null||r===void 0?void 0:r.querySelector('[data-id="modal-submit"]')},{logger:this.logger}).onClick(()=>{const r=Ni(this.state);this.actions.removePasskey(r),this.removePasskeyModal.close()})},n=function(){return g(this,void 0,void 0,function*(){var r;this.removePasskeyModal=this.createModal(),this.removePasskeyModal.setContent(F(yield this.fetchWidgetPage("remove-passkey-modal.html"))),l(this,e,"m",i).call(this),l(this,e,"m",s).call(this);const a=new Ue((r=this.removePasskeyModal.ele)===null||r===void 0?void 0:r.querySelector('[data-id="body-text"]'),{logger:this.logger});this.removePasskeyModal.beforeOpen=()=>g(this,void 0,void 0,function*(){const d=Zt(this.state);a.text=`Remove passkey for ${d}?`})})},o}),cu=w(t=>{var e,i,s,n;return n=class extends y(k,G,H,du,z)(t){constructor(){super(...arguments),e.add(this),s.set(this,W(o=>{o?this.removePasskeyButton.enable():this.removePasskeyButton.disable()}))}onWidgetRootReady(){const o=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var r;l(this,e,"m",i).call(this),yield(r=o.onWidgetRootReady)===null||r===void 0?void 0:r.call(this),this.subscribe(l(this,s,"f").bind(this),Cc)})}},s=new WeakMap,e=new WeakSet,i=function(){var o;this.removePasskeyButton=new x((o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector('[data-id="remove-passkey"]'),{logger:this.logger}),this.removePasskeyButton.disable(),this.removePasskeyButton.onClick(()=>{this.removePasskeyModal.open()})},n}),uu=w(t=>{var e,i,s,n,o,r,a,d;return d=class extends y(H,k,G)(t){constructor(){super(...arguments),e.add(this),n.set(this,W(c=>{this.usersTable.data=c})),o.set(this,Ze((c,u)=>{const h=[],{value:v}=u;if(v){const f=c.path;h.push({field:f,desc:v==="desc"})}this.actions.searchUsers({sort:h})})),r.set(this,W(c=>{this.usersTable.filterColumns(u=>{var h;const[v,f]=((h=u.path)===null||h===void 0?void 0:h.split("."))||[];return v!=="customAttributes"||!!(c!=null&&c.find(p=>p.name===f))})}))}onWidgetRootReady(){const c=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var u;yield(u=c.onWidgetRootReady)===null||u===void 0?void 0:u.call(this),l(this,e,"m",s).call(this),l(this,n,"f").call(this,gs(this.state)),l(this,r,"f").call(this,ji(this.state)),this.subscribe(l(this,r,"f").bind(this),ji),this.subscribe(l(this,n,"f").bind(this),gs)})}},n=new WeakMap,o=new WeakMap,r=new WeakMap,e=new WeakSet,i=function(){const c=v=>{var f;return(f=this.usersTable.ele)===null||f===void 0?void 0:f.querySelector(`[path="${v}"]`)},u=v=>{var f;const p=`descope-grid-${v}-column`;return(f=this.usersTable.ele)===null||f===void 0?void 0:f.querySelector(p)},h=this.usersTable.renderColumn;this.usersTable.renderColumn=({path:v,header:f,type:p,attrs:m})=>{const b=c(v)||u(p);if(!b)return h({path:v,header:f,type:p,attrs:m});const R=b.cloneNode(!0),I=Object.assign(Object.assign({},m),{header:f});return Object.entries(I).forEach(([P,D])=>{R.setAttribute(P,D)}),R.outerHTML}},s=function(){var c;this.usersTable=new Pi((c=this.shadowRoot)===null||c===void 0?void 0:c.querySelector('[data-id="users-table"]'),{logger:this.logger}),this.usersTable.onSelectedItemsChange(u=>{this.actions.setSelectedUsersIds(u.detail.value.map(({loginIds:h})=>h))}),this.usersTable.onColumnsChange(l(this,e,"m",a).bind(this)),l(this,e,"m",i).call(this),l(this,e,"m",a).call(this)},a=function(){this.usersTable.columns.forEach(c=>{c.onSortDirectionChange(u=>{l(this,o,"f").call(this,u.target,u.detail)})})},d}),hu=w(t=>{var e,i,s;return s=class extends y(H,T,k,z,G)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){const n=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var o;yield(o=n.onWidgetRootReady)===null||o===void 0?void 0:o.call(this),yield l(this,e,"m",i).call(this)})}},e=new WeakSet,i=function(){return g(this,void 0,void 0,function*(){this.generatedPasswordModal=this.createModal(),this.generatedPasswordModal.setContent(F(yield this.fetchWidgetPage("generated-password-modal.html"))),new x(()=>{var n;return(n=this.generatedPasswordModal.ele)===null||n===void 0?void 0:n.querySelector('[data-id="modal-close"]')},{logger:this.logger}).onClick(()=>{navigator.clipboard.writeText(this.getFormData(this.generatedPasswordModal.ele)["generated-password"]),this.resetFormData(this.generatedPasswordModal.ele),this.generatedPasswordModal.close()})})},s}),gu=w(t=>{var e,i,s,n,o;return o=class extends y(H,T,k,z,G,hu)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){const r=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var a;yield(a=r.onWidgetRootReady)===null||a===void 0?void 0:a.call(this),yield l(this,e,"m",n).call(this)})}},e=new WeakSet,i=function(){new x(()=>{var r;return(r=this.resetPasswordModal.ele)===null||r===void 0?void 0:r.querySelector('[data-id="modal-cancel"]')},{logger:this.logger}).onClick(()=>this.resetPasswordModal.close())},s=function(){new x(()=>{var r;return(r=this.resetPasswordModal.ele)===null||r===void 0?void 0:r.querySelector('[data-id="modal-submit"]')},{logger:this.logger}).onClick(()=>g(this,void 0,void 0,function*(){var r;const a=Ni(this.state),d=yield this.actions.setTempUserPassword(a);this.resetPasswordModal.close(),this.setFormData(this.generatedPasswordModal.ele,{"generated-password":(r=d==null?void 0:d.payload)===null||r===void 0?void 0:r.cleartext}),this.generatedPasswordModal.open()}))},n=function(){return g(this,void 0,void 0,function*(){var r;this.resetPasswordModal=this.createModal(),this.resetPasswordModal.setContent(F(yield this.fetchWidgetPage("reset-password-modal.html"))),l(this,e,"m",i).call(this),l(this,e,"m",s).call(this);const a=new Ue((r=this.resetPasswordModal.ele)===null||r===void 0?void 0:r.querySelector('[data-id="body-text"]'),{logger:this.logger});this.resetPasswordModal.beforeOpen=()=>g(this,void 0,void 0,function*(){const d=Zt(this.state);a.text=`This will generate a new temporary password for ${d}?`})})},o}),vu=w(t=>{var e,i,s,n;return n=class extends y(k,G,H,gu,z)(t){constructor(){super(...arguments),e.add(this),s.set(this,W(o=>{o?this.resetPasswordButton.enable():this.resetPasswordButton.disable()}))}onWidgetRootReady(){const o=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var r;l(this,e,"m",i).call(this),yield(r=o.onWidgetRootReady)===null||r===void 0?void 0:r.call(this),this.subscribe(l(this,s,"f").bind(this),Rc)})}},s=new WeakMap,e=new WeakSet,i=function(){var o;this.resetPasswordButton=new x((o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector('[data-id="reset-password"]'),{logger:this.logger}),this.resetPasswordButton.disable(),this.resetPasswordButton.onClick(()=>{this.resetPasswordModal.open()})},n}),pu=w(t=>class extends y(Vt,Ct,uu,Zc,Qc,su,nu,eu,vu,cu,ru,lu)(t){init(){const e=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var i;yield(i=e.init)===null||i===void 0?void 0:i.call(this)})}}),ea=y(t=>class extends pu(t){})(HTMLElement);customElements.define("descope-user-management-widget",ea);const fu=Object.freeze(Object.defineProperty({__proto__:null,default:ea},Symbol.toStringTag,{value:"Module"})),Ts=t=>t.selectedRolesIds,mu=t=>t.notifications,ta=t=>t.tenantPermissions.data||[],vs=M(t=>t.rolesList.data,t=>t.map(e=>{var i;return Object.assign(Object.assign({},e),{editable:((i=e==null?void 0:e.tenantId)===null||i===void 0?void 0:i.length)===0?"no":"yes"})})),_i=M(Ts,vs,(t,e)=>e.filter(i=>t.includes(i.name))),bu=M(Ts,t=>!!t.length),yu=M(Ts,t=>t.length===1),wu=M(_i,t=>t.length===1?t[0].name:`${t.length} roles`),Xt=t=>(...e)=>i=>{i.addCase(t.pending,(s,n)=>{e.forEach(({onPending:o})=>{o==null||o(s,n)})}),i.addCase(t.fulfilled,(s,n)=>{e.forEach(({onFulfilled:o})=>{o==null||o(s,n)})}),i.addCase(t.rejected,(s,n)=>{e.forEach(({onRejected:o})=>{o==null||o(s,n)})})},Qt=t=>({onFulfilled:e=>{t(e).loading=!1},onPending:e=>{t(e).loading=!0,t(e).error=null},onRejected:(e,i)=>{t(e).loading=!1,t(e).error=i.error}}),Ps=({getErrorMsg:t,getSuccessMsg:e})=>({onFulfilled:(i,s)=>{e&&i.notifications.push({type:"success",msg:e(s)})},onRejected:(i,s)=>{t&&i.notifications.push({type:"error",msg:t(s)})}}),ia=L("roles/create",(t,{extra:{api:e}})=>e.role.create(t)),ku=Xt(ia)({onFulfilled:(t,e)=>{t.rolesList.data.unshift(e.payload)}},Qt(t=>t.createRole),Ps({getSuccessMsg:()=>"Role created successfully",getErrorMsg:t=>{var e;return`
      <div>
        <div>Failed to create role</div>
        ${(e=t.error)===null||e===void 0?void 0:e.message}
      </div>`}})),rn={action:ia,reducer:ku},sa=L("roles/delete",(t,{extra:{api:e}})=>e.role.deleteBatch(t)),Cu=Xt(sa)({onFulfilled:(t,e)=>{t.rolesList.data=t.rolesList.data.filter(i=>{var s;return((s=i==null?void 0:i.tenantId)===null||s===void 0?void 0:s.length)===0||!e.meta.arg.includes(i.name)}),t.selectedRolesIds=[]}},Qt(t=>t.deleteRole),Ps({getSuccessMsg:t=>we(t.meta.arg.length)`${["",t.meta.arg.length]} ${["R","r"]}ole${["","s"]} deleted successfully`,getErrorMsg:t=>we(t.meta.arg.length)`Failed to delete role${["","s"]}`})),an={action:sa,reducer:Cu},oa=L("roles/search",(t,{extra:{api:e},getState:i})=>{const s=i().searchParams;return e.role.search(Object.assign(Object.assign({},s),t))}),Ru=Xt(oa)({onPending:(t,e)=>{t.searchParams=Object.assign(Object.assign({},t.searchParams),e.meta.arg)},onFulfilled:(t,e)=>{t.rolesList.data=e.payload}},Qt(t=>t.rolesList)),ln={action:oa,reducer:Ru},na=L("roles/update",(t,{extra:{api:e}})=>e.role.update(t)),$u=Xt(na)({onFulfilled:(t,e)=>{const i=t.rolesList.data.findIndex(s=>s.name===e.payload.oldName);i!==-1&&(t.rolesList.data[i]=e.payload)}},Qt(t=>t.updateRole),Ps({getSuccessMsg:()=>"Role updated successfully",getErrorMsg:t=>{var e;return`
      <div>
        <div>Failed to update role</div>
        ${(e=t.error)===null||e===void 0?void 0:e.message}
      </div>`}})),dn={action:na,reducer:$u},cn=L("tenant/getTenantPermissions",(t,{extra:{api:e}})=>e.tenant.getTenantPermissions()),un={action:cn,reducer:Xt(cn)({onFulfilled:(t,e)=>{t.tenantPermissions.data=e.payload.permissions}},Qt(t=>t.tenantPermissions))},hn={rolesList:{data:[],loading:!1,error:null},createRole:{loading:!1,error:null},updateRole:{loading:!1,error:null},deleteRole:{loading:!1,error:null},tenantPermissions:{loading:!1,error:null,data:[]},searchParams:{text:"",sort:[]},selectedRolesIds:[],notifications:[]},di={search:"/v1/mgmt/role/search",deleteBatch:"/v1/mgmt/role/delete/batch",create:"/v1/mgmt/role/create",update:"/v1/mgmt/role/update"},Iu={permissions:"/v1/mgmt/permission/all"},Lt=t=>g(void 0,void 0,void 0,function*(){const e=yield t.text(),i=JSON.parse(e);if(!t.ok){const s=`${i.errorDescription}${i.errorMessage?`: ${i.errorMessage}`:""}`;throw Error(s||`${t.status} ${t.statusText}`)}t.json=()=>Promise.resolve(i),t.text=()=>Promise.resolve(e)}),xu=(t,e)=>g(void 0,[t,e],void 0,function*({text:i,sort:s},n){return new Promise(o=>{const r=[];for(let a=1;a<10;a+=1)r.push({name:`Role ${a}`,description:`Role description ${a}`,permissionNames:[`Permission ${a}`],createdTime:new Date,tenantId:n});s.forEach(a=>{r.sort((d,c)=>{var u,h;return a.desc?(h=c[a.field])===null||h===void 0?void 0:h.localeCompare(d[a.field]):(u=d[a.field])===null||u===void 0?void 0:u.localeCompare(c[a.field])})}),o(r.filter(a=>a.name.toLowerCase().includes(i.toLowerCase())||a.description.toLowerCase().includes(i.toLowerCase())))})}),Su=(t,e)=>g(void 0,[t,e],void 0,function*({name:i,description:s,permissionNames:n},o){return new Promise(r=>{r({name:i,description:s,permissionNames:n,createdTime:new Date,tenantId:o})})}),Mu=(t,e)=>g(void 0,[t,e],void 0,function*({name:i,newName:s,description:n,permissionNames:o},r){return new Promise(a=>{a({name:s,description:n,permissionNames:o,createdTime:new Date,oldName:i,tenantId:r})})}),Uu=()=>g(void 0,void 0,void 0,function*(){}),Au=()=>new Promise(t=>{const e=[];for(let i=1;i<5;i+=1)e.push({name:`Permission ${i}`});t({permissions:e})}),ju=({httpClient:t,tenant:e,mock:i})=>({search:(...s)=>g(void 0,[...s],void 0,function*({page:n,limit:o=1e4,text:r,sort:a}={}){if(i)return xu({page:n,limit:o,text:r,sort:a},e);const d=yield t.post(di.search,{limit:o,page:n,text:r,sort:a},{queryParams:{tenant:e}});return yield Lt(d),(yield d.json()).roles}),deleteBatch:s=>g(void 0,void 0,void 0,function*(){if(i)return Uu();const n=yield t.post(di.deleteBatch,{roleNames:s},{queryParams:{tenant:e}});return yield Lt(n),n.json()}),create:s=>g(void 0,[s],void 0,function*({name:n,description:o,permissionNames:r}){if(i)return Su({name:n,description:o,permissionNames:r},e);const a=yield t.post(di.create,{name:n,description:o,permissionNames:r,tenantId:e},{queryParams:{tenant:e}});return yield Lt(a),yield a.json()}),update:s=>g(void 0,[s],void 0,function*({name:n,newName:o,description:r,permissionNames:a}){if(i)return Mu({name:n,newName:o,description:r,permissionNames:a},e);const d=yield t.post(di.update,{name:n,newName:o,description:r,permissionNames:a,tenantId:e},{queryParams:{tenant:e}});yield Lt(d);const c=yield d.json();return c.oldName=n,c})}),_u=({httpClient:t,tenant:e,mock:i})=>({getTenantPermissions:()=>g(void 0,void 0,void 0,function*(){if(i)return Au();const s=yield t.get(Iu.permissions,{queryParams:{tenant:e}});return yield Lt(s),s.json()})}),Ou=w(t=>{var e,i,s,n;const o=y(wt,Xe,k,kt,B({tenant:B.missingAttrValidator}))(t);return n=class extends o{constructor(){super(...arguments),e.add(this),i.set(this,void 0)}get tenant(){return this.getAttribute("tenant")}get widgetId(){return this.getAttribute("widget-id")}get mock(){return this.getAttribute("mock")}get api(){return l(this,i,"f")||l(this,e,"m",s).call(this),l(this,i,"f")}init(){const r=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var a;yield(a=r.init)===null||a===void 0?void 0:a.call(this),this.observeAttributes(["project-id","base-url","tenant"],()=>{l(this,i,"f")&&l(this,e,"m",s).call(this)})})}},i=new WeakMap,e=new WeakSet,s=function(){this.logger.debug("creating an sdk instance"),C(this,i,((r,a,d,c)=>{const u=Je(Object.assign(Object.assign({},r),{persistTokens:!0,baseHeaders:{"x-descope-widget-type":"role-management-widget","x-descope-widget-id":c,"x-descope-widget-version":"0.1.118"}}));return{role:ju({httpClient:u.httpClient,tenant:a,mock:d}),tenant:_u({httpClient:u.httpClient,tenant:a,mock:d})}})({projectId:this.projectId,baseUrl:this.baseUrl},this.tenant,this.mock==="true",this.widgetId),"f")},n}),Ae=w(t=>{const e=y(zt({name:"widget",initialState:hn,reducers:{setSelectedRolesIds:(i,{payload:s})=>{i.selectedRolesIds=s},clearNotifications:i=>{i.notifications=[]}},extraReducers:i=>{rn.reducer(i),dn.reducer(i),an.reducer(i),ln.reducer(i),un.reducer(i)},asyncActions:{searchRoles:ln.action,createRole:rn.action,updateRole:dn.action,deleteRoles:an.action,getTenantPermissions:un.action}}),K,k,Ou)(t);return class extends e{constructor(...i){super(...i),this.state=hn,this.subscribe(s=>{this.logger.debug("State update:",s),this.state=s})}}}),Eu=w(t=>{const e=y(Qe,B({"widget-id":B.missingAttrValidator}))(t);return class extends e{get widgetId(){return this.getAttribute("widget-id")}fetchWidgetPage(i){return g(this,void 0,void 0,function*(){return(yield this.fetchStaticResource(`role-management-widget/${this.widgetId}/${i}`,"text")).body})}}}),Te=w(t=>{var e,i,s;return s=class extends y(k,K,We,Le,Eu,Ae)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){return g(this,void 0,void 0,function*(){})}init(){const n=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var o;yield(o=n.init)===null||o===void 0?void 0:o.call(this),yield Promise.all([l(this,e,"m",i).call(this),this.actions.searchRoles(),this.actions.getTenantPermissions()]),this.onWidgetRootReady()})}},e=new WeakSet,i=function(){return g(this,void 0,void 0,function*(){const n=F(yield this.fetchWidgetPage("root.html"));yield this.loadDescopeUiComponents(n),this.contentRootElement.append(n.content.cloneNode(!0))})},s}),Wu=w(t=>{var e,i,s,n,o;return o=class extends y(Ae,T,z,k,Te)(t){constructor(){super(...arguments),e.add(this),i.set(this,void 0),n.set(this,()=>g(this,void 0,void 0,function*(){var r;yield l(this,i,"f").setData((r=ta(this.state))===null||r===void 0?void 0:r.map(({name:a})=>({value:a,label:a})))}))}onWidgetRootReady(){const r=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var a;yield(a=r.onWidgetRootReady)===null||a===void 0?void 0:a.call(this),l(this,e,"m",s).call(this)})}},i=new WeakMap,n=new WeakMap,e=new WeakSet,s=function(){return g(this,void 0,void 0,function*(){this.createRoleModal=this.createModal(),this.createRoleModal.setContent(F(yield this.fetchWidgetPage("create-role-modal.html"))),new x(()=>{var r;return(r=this.createRoleModal.ele)===null||r===void 0?void 0:r.querySelector('[data-id="modal-cancel"]')},{logger:this.logger}).onClick(()=>{this.createRoleModal.close(),this.resetFormData(this.createRoleModal.ele)}),new x(()=>{var r;return(r=this.createRoleModal.ele)===null||r===void 0?void 0:r.querySelector('[data-id="modal-submit"]')},{logger:this.logger}).onClick(()=>g(this,void 0,void 0,function*(){this.validateForm(this.createRoleModal.ele)&&(this.actions.createRole(Object.assign({},this.getFormData(this.createRoleModal.ele))),this.createRoleModal.close(),this.resetFormData(this.createRoleModal.ele))})),C(this,i,new Kt(()=>{var r;return(r=this.createRoleModal.ele)===null||r===void 0?void 0:r.querySelector('[data-id="permissions-multiselect"]')},{logger:this.logger}),"f"),l(this,n,"f").call(this)})},o}),Lu=w(t=>{var e,i,s;return s=class extends y(k,Wu,Te)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){const n=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var o;yield(o=n.onWidgetRootReady)===null||o===void 0?void 0:o.call(this),l(this,e,"m",i).call(this)})}},e=new WeakSet,i=function(){var n;this.createButton=new x((n=this.shadowRoot)===null||n===void 0?void 0:n.querySelector('[data-id="create-role"]'),{logger:this.logger}),this.createButton.onClick(()=>this.createRoleModal.open())},s}),Tu=w(t=>{var e,i,s;return s=class extends y(Ae,T,k,Te)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){const n=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var o;yield(o=n.onWidgetRootReady)===null||o===void 0?void 0:o.call(this),yield l(this,e,"m",i).call(this)})}},e=new WeakSet,i=function(){return g(this,void 0,void 0,function*(){var n;this.deleteRolesModal=this.createModal(),this.deleteRolesModal.setContent(F(yield this.fetchWidgetPage("delete-roles-modal.html"))),new x(()=>{var d;return(d=this.deleteRolesModal.ele)===null||d===void 0?void 0:d.querySelector('[data-id="modal-cancel"]')},{logger:this.logger}).onClick(()=>this.deleteRolesModal.close()),new x(()=>{var d;return(d=this.deleteRolesModal.ele)===null||d===void 0?void 0:d.querySelector('[data-id="modal-submit"]')},{logger:this.logger}).onClick(()=>{const d=_i(this.state);this.actions.deleteRoles(d==null?void 0:d.map(c=>c.name)),this.deleteRolesModal.close()});const a=new Ue((n=this.deleteRolesModal.ele)===null||n===void 0?void 0:n.querySelector('[data-id="body-text"]'),{logger:this.logger});this.deleteRolesModal.beforeOpen=()=>{const d=wu(this.state);a.text=`Delete ${d}?`}})},s}),Pu=w(t=>{var e,i,s,n;return n=class extends y(k,Te,Ae,Tu)(t){constructor(){super(...arguments),e.add(this),s.set(this,W(o=>{o?this.deleteButton.enable():this.deleteButton.disable()}))}onWidgetRootReady(){const o=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var r;yield(r=o.onWidgetRootReady)===null||r===void 0?void 0:r.call(this),l(this,e,"m",i).call(this),this.subscribe(l(this,s,"f").bind(this),bu)})}},s=new WeakMap,e=new WeakSet,i=function(){var o;this.deleteButton=new x((o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector('[data-id="delete-roles"]'),{logger:this.logger}),this.deleteButton.disable(),this.deleteButton.onClick(()=>{this.deleteRolesModal.open()})},n}),Du=w(t=>{var e,i,s,n,o,r,a,d;return d=class extends y(Ae,T,k,z,Te)(t){constructor(){super(...arguments),e.add(this),i.set(this,void 0),o.set(this,()=>g(this,void 0,void 0,function*(){var c;yield l(this,i,"f").setData((c=ta(this.state))===null||c===void 0?void 0:c.map(({name:u})=>({value:u,label:u})))})),r.set(this,()=>{var c;const u=(c=_i(this.state))===null||c===void 0?void 0:c[0],h={name:u==null?void 0:u.name,description:u==null?void 0:u.description,permissionNames:u==null?void 0:u.permissionNames};this.setFormData(this.editRoleModal.ele,h)})}onWidgetRootReady(){const c=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var u;yield(u=c.onWidgetRootReady)===null||u===void 0?void 0:u.call(this),yield l(this,e,"m",a).call(this)})}},i=new WeakMap,o=new WeakMap,r=new WeakMap,e=new WeakSet,s=function(){new x(()=>{var c;return(c=this.editRoleModal.ele)===null||c===void 0?void 0:c.querySelector('[data-id="modal-cancel"]')},{logger:this.logger}).onClick(()=>this.editRoleModal.close())},n=function(){new x(()=>{var c;return(c=this.editRoleModal.ele)===null||c===void 0?void 0:c.querySelector('[data-id="modal-submit"]')},{logger:this.logger}).onClick(()=>{var c;if(this.validateForm(this.editRoleModal.ele)){const u=this.getFormData(this.editRoleModal.ele),{name:h}=u,v=Oe(u,["name"]),f=(c=_i(this.state))===null||c===void 0?void 0:c[0];this.actions.updateRole(Object.assign({newName:h,name:f.name},v)),this.editRoleModal.close(),this.resetFormData(this.editRoleModal.ele)}})},a=function(){return g(this,void 0,void 0,function*(){this.editRoleModal=this.createModal(),this.editRoleModal.setContent(F(yield this.fetchWidgetPage("edit-role-modal.html"))),l(this,e,"m",s).call(this),l(this,e,"m",n).call(this),C(this,i,new Kt(()=>{var c;return(c=this.editRoleModal.ele)===null||c===void 0?void 0:c.querySelector('[data-id="permissions-multiselect"]')},{logger:this.logger}),"f"),this.editRoleModal.beforeOpen=()=>g(this,void 0,void 0,function*(){yield l(this,o,"f").call(this),l(this,r,"f").call(this)})})},d}),Nu=w(t=>{var e,i,s,n;return n=class extends y(k,Te,Ae,Du,z)(t){constructor(){super(...arguments),e.add(this),s.set(this,W(o=>{o?this.editButton.enable():this.editButton.disable()}))}onWidgetRootReady(){const o=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var r;yield(r=o.onWidgetRootReady)===null||r===void 0?void 0:r.call(this),l(this,e,"m",i).call(this),this.subscribe(l(this,s,"f").bind(this),yu)})}},s=new WeakMap,e=new WeakSet,i=function(){var o;this.editButton=new x((o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector('[data-id="edit-role"]'),{logger:this.logger}),this.editButton.disable(),this.editButton.onClick(()=>{this.editRoleModal.open()})},n}),Fu=w(t=>{var e,i,s,n;return n=class extends y(k,Te,Ae)(t){constructor(){super(...arguments),e.add(this),i.set(this,Ze(()=>{this.actions.searchRoles({text:this.searchInput.value})}))}onWidgetRootReady(){const o=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var r;yield(r=o.onWidgetRootReady)===null||r===void 0?void 0:r.call(this),l(this,e,"m",s).call(this)})}},i=new WeakMap,e=new WeakSet,s=function(){var o;this.searchInput=new Ht((o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector('[data-id="search-input"]'),{logger:this.logger}),this.searchInput.onInput(l(this,i,"f"))},n}),qu={success:new DOMParser().parseFromString(`<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
<g id="Checkmark">
<path id="Shape" d="M10.0485 15.6396C9.5799 15.171 8.8201 15.171 8.35147 15.6396C7.88284 16.1082 7.88284 16.868 8.35147 17.3367L12.7072 21.6924C13.1759 22.1611 13.9357 22.1611 14.4043 21.6924L24.7152 11.3815C25.1838 10.9129 25.1838 10.1531 24.7152 9.68448C24.2466 9.21585 23.4868 9.21585 23.0181 9.68448L13.5558 19.1469L10.0485 15.6396Z" fill="currentcolor"/>
</g>
</svg>
`,"image/svg+xml").firstChild,error:new DOMParser().parseFromString(`<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
<g id="Icon">
<path id="Vector" d="M15.9998 26.6558C10.1118 26.6558 5.34375 21.8878 5.34375 15.9998C5.34375 10.1118 10.1118 5.34375 15.9998 5.34375C21.8878 5.34375 26.6558 10.1118 26.6558 15.9998C26.6558 21.8878 21.8878 26.6558 15.9998 26.6558ZM15.9998 24.4798C20.6718 24.4798 24.4798 20.7038 24.4798 15.9998C24.4798 11.3278 20.7038 7.51975 15.9998 7.51975C11.3278 7.51975 7.51975 11.2958 7.51975 15.9998C7.51975 20.6718 11.2958 24.4798 15.9998 24.4798ZM15.3278 9.34375H16.6718C17.0558 9.34375 17.3438 9.63175 17.3118 9.98375L16.9598 16.9278C16.9598 17.1838 16.7678 17.3438 16.5438 17.3438H15.4558C15.2318 17.3438 15.0398 17.1518 15.0398 16.9278L14.6878 9.98375C14.6878 9.63175 14.9758 9.34375 15.3278 9.34375ZM15.4558 19.4558H16.5438C16.9278 19.4558 17.2158 19.7438 17.1838 20.1278V21.1838C17.1838 21.5678 16.8958 21.8558 16.5438 21.8558H15.4558C15.0718 21.8558 14.7838 21.5678 14.7838 21.1838V20.1278C14.7838 19.7438 15.0718 19.4558 15.4558 19.4558Z" fill="currentcolor"/>
</g>
</svg>
`,"image/svg+xml").firstChild},Bu=w(t=>{var e,i,s,n,o;return o=class extends y(k,Ae,Os,K)(t){constructor(){super(...arguments),e.add(this),n.set(this,W(r=>{r.length&&(r.forEach(({type:a,msg:d})=>{const c=l(this,e,"m",s).call(this,a);c.setContent(l(this,e,"m",i).call(this,{type:a,msg:d})),c.show()}),setTimeout(()=>this.actions.clearNotifications()))}))}init(){const r=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var a;yield(a=r.init)===null||a===void 0?void 0:a.call(this),this.subscribe(l(this,n,"f").bind(this),mu)})}},n=new WeakMap,e=new WeakSet,i=function({type:r,msg:a}){const d=qu[r],c=Object.assign(new DOMParser().parseFromString(`<svg width="2em" height="2em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<g id="Icon">
<path id="Shape" d="M10.6712 12L7.27521 8.60406C6.90826 8.23711 6.90826 7.64216 7.27521 7.27521C7.64216 6.90826 8.23711 6.90826 8.60406 7.27521L12 10.6712L15.3959 7.27521C15.7629 6.90826 16.3578 6.90826 16.7248 7.27521C17.0917 7.64216 17.0917 8.23711 16.7248 8.60406L13.3288 12L16.7248 15.3959C17.0917 15.7629 17.0917 16.3578 16.7248 16.7248C16.3578 17.0917 15.7629 17.0917 15.3959 16.7248L12 13.3288L8.60406 16.7248C8.23711 17.0917 7.64216 17.0917 7.27521 16.7248C6.90826 16.3578 6.90826 15.7629 7.27521 15.3959L10.6712 12Z" fill="currentcolor"/>
</g>
</svg>
`,"image/svg+xml").firstChild,{slot:"close"});return`${(d==null?void 0:d.outerHTML)||""}${a}${c.outerHTML}`},s=function(r){return this.createNotification({mode:r,duration:r==="error"?0:3e3,position:"bottom-start",size:"sm"})},o}),Ku=w(t=>{var e,i,s,n,o;return o=class extends y(Ae,k,Te)(t){constructor(){super(...arguments),e.add(this),s.set(this,W(r=>{this.rolesTable.data=r})),n.set(this,Ze((r,a)=>{const d=[],{value:c}=a;if(c){const u=r.path;d.push({field:u,desc:c==="desc"})}this.actions.searchRoles({sort:d})}))}onWidgetRootReady(){const r=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var a;yield(a=r.onWidgetRootReady)===null||a===void 0?void 0:a.call(this),l(this,e,"m",i).call(this),this.rolesTable.columns.forEach(d=>{d.onSortDirectionChange(c=>{l(this,n,"f").call(this,c.target,c.detail)})}),l(this,s,"f").call(this,vs(this.state)),this.subscribe(l(this,s,"f").bind(this),vs)})}},s=new WeakMap,n=new WeakMap,e=new WeakSet,i=function(){var r;this.rolesTable=new Pi((r=this.shadowRoot)===null||r===void 0?void 0:r.querySelector('[data-id="roles-table"]'),{logger:this.logger}),this.rolesTable.onSelectedItemsChange(a=>{this.actions.setSelectedRolesIds(a.detail.value.map(({name:d})=>d))})},o}),Hu=w(t=>class extends y(Vt,Ct,Ku,Lu,Pu,Nu,Fu,Bu)(t){init(){const e=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var i;yield(i=e.init)===null||i===void 0?void 0:i.call(this)})}}),ra=y(t=>class extends Hu(t){})(HTMLElement);customElements.define("descope-role-management-widget",ra);const Vu=Object.freeze(Object.defineProperty({__proto__:null,default:ra},Symbol.toStringTag,{value:"Module"})),Ds=t=>t.selectedAccessKeysIds,zu=t=>t.notifications,ps=M(t=>t.accessKeysList.data,t=>t.map(e=>Object.assign(Object.assign({},e),{expireTimeFormatted:e!=null&&e.expireTime?new Date(1e3*((e==null?void 0:e.expireTime)||0)).toLocaleString():"Never",createdTimeFormatted:new Date(1e3*((e==null?void 0:e.createdTime)||0)).toLocaleString(),status:e!=null&&e.expireTime&&new Date(1e3*((e==null?void 0:e.expireTime)||0))<new Date?"expired":e==null?void 0:e.status}))),Yt=M(Ds,ps,(t,e)=>e.filter(i=>t.includes(i.id))),Gu=M(Ds,t=>!!t.length),Ju=M(Yt,t=>t.every(e=>e.editable)),Ns=M(Ju,Gu,(t,e)=>t&&e);M(Ds,t=>t.length===1);const Fs=M(Yt,t=>t.length===1?t[0].name:`${t.length} access keys`),$t=t=>(...e)=>i=>{i.addCase(t.pending,(s,n)=>{e.forEach(({onPending:o})=>{o==null||o(s,n)})}),i.addCase(t.fulfilled,(s,n)=>{e.forEach(({onFulfilled:o})=>{o==null||o(s,n)})}),i.addCase(t.rejected,(s,n)=>{e.forEach(({onRejected:o})=>{o==null||o(s,n)})})},It=t=>({onFulfilled:e=>{t(e).loading=!1},onPending:e=>{t(e).loading=!0,t(e).error=null},onRejected:(e,i)=>{t(e).loading=!1,t(e).error=i.error}}),Fi=({getErrorMsg:t,getSuccessMsg:e})=>({onFulfilled:(i,s)=>{e&&i.notifications.push({type:"success",msg:e(s)})},onRejected:(i,s)=>{t&&i.notifications.push({type:"error",msg:t(s)})}}),aa=L("accessKeys/create",(t,{extra:{api:e}})=>e.accesskey.create(t)),Zu=$t(aa)({onFulfilled:(t,e)=>{t.accessKeysList.data.unshift(e.payload.key)}},It(t=>t.createAccessKey),Fi({getSuccessMsg:()=>"Access Key created successfully",getErrorMsg:t=>{var e;return`
      <div>
        <div>Failed to create access key</div>
        ${(e=t.error)===null||e===void 0?void 0:e.message}
      </div>`}})),gn={action:aa,reducer:Zu},la=L("accessKeys/delete",(t,{extra:{api:e}})=>e.accesskey.deleteBatch(t)),Xu=$t(la)({onFulfilled:(t,e)=>{t.accessKeysList.data=t.accessKeysList.data.filter(i=>!e.meta.arg.includes(i.id)),t.selectedAccessKeysIds=[]}},It(t=>t.deleteAccessKey),Fi({getSuccessMsg:t=>we(t.meta.arg.length)`${["",t.meta.arg.length]} ${["A","a"]}ccess key${["","s"]} deleted successfully`,getErrorMsg:t=>we(t.meta.arg.length)`Failed to delete access key${["","s"]}`})),vn={action:la,reducer:Xu},da=L("accessKeys/search",(t,{extra:{api:e},getState:i})=>{const s=i().searchParams;return e.accesskey.search(Object.assign(Object.assign({},s),t))}),Qu=$t(da)({onPending:(t,e)=>{t.searchParams=Object.assign(Object.assign({},t.searchParams),e.meta.arg)},onFulfilled:(t,e)=>{t.accessKeysList.data=e.payload}},It(t=>t.accessKeysList)),pn={action:da,reducer:Qu},ca=L("accessKeys/activate",(t,{extra:{api:e}})=>e.accesskey.activate(t)),Yu=$t(ca)({onFulfilled:(t,e)=>{t.accessKeysList.data.forEach(i=>{e.meta.arg.includes(i.id)&&(i.status="active")})}},It(t=>t.activateAccessKey),Fi({getSuccessMsg:t=>we(t.meta.arg.length)`${["",t.meta.arg.length]} ${["A","a"]}ccess key${["","s"]} activated successfully`,getErrorMsg:t=>we(t.meta.arg.length)`Failed to activate access key${["","s"]}`})),fn={action:ca,reducer:Yu},ua=L("accessKeys/deactivate",(t,{extra:{api:e}})=>e.accesskey.deactivate(t)),eh=$t(ua)({onFulfilled:(t,e)=>{t.accessKeysList.data.forEach(i=>{e.meta.arg.includes(i.id)&&(i.status="inactive")})}},It(t=>t.deactivateAccessKey),Fi({getSuccessMsg:t=>we(t.meta.arg.length)`${["",t.meta.arg.length]} ${["A","a"]}ccess key${["","s"]} deactivated successfully`,getErrorMsg:t=>we(t.meta.arg.length)`Failed to deactivate access key${["","s"]}`})),mn={action:ua,reducer:eh},bn=L("tenant/getTenantRoles",(t,{extra:{api:e}})=>e.tenant.getTenantRoles()),yn={action:bn,reducer:$t(bn)({onFulfilled:(t,e)=>{t.tenantRoles.data=e.payload.roles}},It(t=>t.tenantRoles))},wn={accessKeysList:{data:[],loading:!1,error:null},createAccessKey:{loading:!1,error:null},activateAccessKey:{loading:!1,error:null},deactivateAccessKey:{loading:!1,error:null},deleteAccessKey:{loading:!1,error:null},tenantRoles:{loading:!1,error:null,data:[]},searchParams:{text:"",sort:[]},selectedAccessKeysIds:[],notifications:[]},At={search:"/v1/mgmt/accesskey/search",deleteBatch:"/v1/mgmt/accesskey/delete/batch",create:"/v1/mgmt/accesskey/create",deactivate:"/v1/mgmt/accesskey/deactivate/batch",activate:"/v1/mgmt/accesskey/activate/batch"},th={roles:"/v1/mgmt/role/all"},ht=t=>g(void 0,void 0,void 0,function*(){const e=yield t.text(),i=JSON.parse(e);if(!t.ok){const s=`${i.errorDescription}${i.errorMessage?`: ${i.errorMessage}`:""}`;throw Error(s||`${t.status} ${t.statusText}`)}t.json=()=>Promise.resolve(i),t.text=()=>Promise.resolve(e)}),ih=(...t)=>g(void 0,[...t],void 0,function*({text:e,sort:i}={}){return new Promise(s=>{const n=[];for(let o=1;o<10;o+=1)n.push({id:`access-key-id-${o}`,name:`Access Key ${o}`,createdBy:`User ${o}`,editable:!0,expireTime:new Date().getTime()/1e3+2592e3,createdTime:new Date().getTime()/1e3,roleNames:[`Role ${o}`],status:"active",clientId:`Client ID ${o}`,boundUserId:`User ${o}`});i.forEach(o=>{n.sort((r,a)=>{var d,c;return o.desc?(c=a[o.field])===null||c===void 0?void 0:c.localeCompare(r[o.field]):(d=r[o.field])===null||d===void 0?void 0:d.localeCompare(a[o.field])})}),s(n.filter(o=>o.name.toLowerCase().includes(e.toLowerCase())||o.createdBy.toLowerCase().includes(e.toLowerCase())))})}),sh=(t,e)=>g(void 0,[t,e],void 0,function*({name:i,roleNames:s,userId:n},o){const r=Math.random().toString(10).substring(15);return new Promise(a=>{a({cleartext:Math.random().toString(20).substring(2),key:{id:`access-key-id-${r}`,name:i||`Access Key ${r}`,createdBy:n||`User ${r}`,editable:!0,expireTime:o,createdTime:new Date().getTime()/1e3,roleNames:s,status:"active",clientId:`Client ID ${r}`,boundUserId:n||`User ${r}`}})})}),oh=()=>g(void 0,void 0,void 0,function*(){}),nh=()=>g(void 0,void 0,void 0,function*(){}),rh=()=>g(void 0,void 0,void 0,function*(){}),ah=t=>new Promise(e=>{const i=[];for(let s=1;s<5;s+=1)i.push({name:`Role ${s}`,description:`Role description ${s}`,createdTime:new Date,permissionNames:[`Permission ${s}`],tenantId:t});e({roles:i})}),lh=({httpClient:t,tenant:e,mock:i})=>({search:(...s)=>g(void 0,[...s],void 0,function*({page:n,limit:o=1e4,text:r,sort:a}={}){if(i)return ih({page:n,limit:o,text:r,sort:a});const d=yield t.post(At.search,{limit:o,page:n,text:r,sort:a},{queryParams:{tenant:e}});return yield ht(d),(yield d.json()).keys}),deleteBatch:s=>g(void 0,void 0,void 0,function*(){if(i)return rh();const n=yield t.post(At.deleteBatch,{ids:s},{queryParams:{tenant:e}});return yield ht(n),n.json()}),create:s=>g(void 0,[s],void 0,function*({name:n,expiration:o,roleNames:r,userId:a}){const d=new Date;d.setDate(d.getDate()+ +o);const c=o[0]==="0"?0:Math.floor(d.getTime()/1e3);if(i)return sh({name:n,expiration:o,roleNames:r,userId:a},c);const u=yield t.post(At.create,{name:n,expireTime:c,roleNames:r,userId:a},{queryParams:{tenant:e}});return yield ht(u),yield u.json()}),activate:s=>g(void 0,void 0,void 0,function*(){if(i)return oh();const n=yield t.post(At.activate,{ids:s},{queryParams:{tenant:e}});return yield ht(n),yield n.json()}),deactivate:s=>g(void 0,void 0,void 0,function*(){if(i)return nh();const n=yield t.post(At.deactivate,{ids:s},{queryParams:{tenant:e}});return yield ht(n),yield n.json()})}),dh=({httpClient:t,tenant:e,mock:i})=>({getTenantRoles:()=>g(void 0,void 0,void 0,function*(){if(i)return ah(e);const s=yield t.get(th.roles,{queryParams:{tenant:e}});return yield ht(s),s.json()})}),ch=w(t=>{var e,i,s,n;const o=y(wt,Xe,k,kt,B({tenant:B.missingAttrValidator}))(t);return n=class extends o{constructor(){super(...arguments),e.add(this),i.set(this,void 0)}get tenant(){return this.getAttribute("tenant")}get widgetId(){return this.getAttribute("widget-id")}get mock(){return this.getAttribute("mock")}get api(){return l(this,i,"f")||l(this,e,"m",s).call(this),l(this,i,"f")}init(){const r=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var a;yield(a=r.init)===null||a===void 0?void 0:a.call(this),this.observeAttributes(["project-id","base-url","tenant"],()=>{l(this,i,"f")&&l(this,e,"m",s).call(this)})})}},i=new WeakMap,e=new WeakSet,s=function(){this.logger.debug("creating an sdk instance"),C(this,i,((r,a,d,c)=>{const u=Je(Object.assign(Object.assign({},r),{persistTokens:!0,baseHeaders:{"x-descope-widget-type":"access-key-management-widget","x-descope-widget-id":c,"x-descope-widget-version":"0.1.120"}}));return{accesskey:lh({httpClient:u.httpClient,tenant:a,mock:d}),tenant:dh({httpClient:u.httpClient,tenant:a,mock:d})}})({projectId:this.projectId,baseUrl:this.baseUrl},this.tenant,this.mock==="true",this.widgetId),"f")},n}),ge=w(t=>{const e=y(zt({name:"widget",initialState:wn,reducers:{setSelectedAccessKeysIds:(i,{payload:s})=>{i.selectedAccessKeysIds=s},clearNotifications:i=>{i.notifications=[]}},extraReducers:i=>{gn.reducer(i),vn.reducer(i),pn.reducer(i),fn.reducer(i),mn.reducer(i),yn.reducer(i)},asyncActions:{searchAccessKeys:pn.action,createAccessKey:gn.action,activateAccessKeys:fn.action,deactivateAccessKeys:mn.action,deleteAccessKeys:vn.action,getTenantRoles:yn.action}}),K,k,ch)(t);return class extends e{constructor(...i){super(...i),this.state=wn,this.subscribe(s=>{this.logger.debug("State update:",s),this.state=s})}}}),uh=w(t=>{const e=y(Qe,B({"widget-id":B.missingAttrValidator}))(t);return class extends e{get widgetId(){return this.getAttribute("widget-id")}fetchWidgetPage(i){return g(this,void 0,void 0,function*(){return(yield this.fetchStaticResource(`access-key-management-widget/${this.widgetId}/${i}`,"text")).body})}}}),ve=w(t=>{var e,i,s;return s=class extends y(k,K,We,Le,uh,ge)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){return g(this,void 0,void 0,function*(){})}init(){const n=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var o;yield(o=n.init)===null||o===void 0?void 0:o.call(this),yield Promise.all([l(this,e,"m",i).call(this),this.actions.searchAccessKeys(),this.actions.getTenantRoles()]),this.onWidgetRootReady()})}},e=new WeakSet,i=function(){return g(this,void 0,void 0,function*(){const n=F(yield this.fetchWidgetPage("root.html"));yield this.loadDescopeUiComponents(n),this.contentRootElement.append(n.content.cloneNode(!0))})},s}),hh=w(t=>{var e,i,s,n,o;return o=class extends y(ge,k,ve)(t){constructor(){super(...arguments),e.add(this),s.set(this,W(r=>{this.accessKeysTable.data=r})),n.set(this,Ze((r,a)=>{const d=[],{value:c}=a;if(c){const u=r.path;d.push({field:u,desc:c==="desc"})}this.actions.searchAccessKeys({sort:d})}))}onWidgetRootReady(){const r=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var a;yield(a=r.onWidgetRootReady)===null||a===void 0?void 0:a.call(this),l(this,e,"m",i).call(this),this.accessKeysTable.columns.forEach(d=>{d.onSortDirectionChange(c=>{l(this,n,"f").call(this,c.target,c.detail)})}),l(this,s,"f").call(this,ps(this.state)),this.subscribe(l(this,s,"f").bind(this),ps)})}},s=new WeakMap,n=new WeakMap,e=new WeakSet,i=function(){var r;this.accessKeysTable=new Pi((r=this.shadowRoot)===null||r===void 0?void 0:r.querySelector('[data-id="access-keys-table"]'),{logger:this.logger}),this.accessKeysTable.onSelectedItemsChange(a=>{this.actions.setSelectedAccessKeysIds(a.detail.value.map(({id:d})=>d))})},o}),gh=w(t=>{var e,i,s;return s=class extends y(ge,T,k,ve)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){const n=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var o;yield(o=n.onWidgetRootReady)===null||o===void 0?void 0:o.call(this),yield l(this,e,"m",i).call(this)})}},e=new WeakSet,i=function(){return g(this,void 0,void 0,function*(){var n;this.activateAccessKeysModal=this.createModal(),this.activateAccessKeysModal.setContent(F(yield this.fetchWidgetPage("activate-access-keys-modal.html"))),new x(()=>{var d;return(d=this.activateAccessKeysModal.ele)===null||d===void 0?void 0:d.querySelector('[data-id="modal-cancel"]')},{logger:this.logger}).onClick(()=>this.activateAccessKeysModal.close()),new x(()=>{var d;return(d=this.activateAccessKeysModal.ele)===null||d===void 0?void 0:d.querySelector('[data-id="modal-submit"]')},{logger:this.logger}).onClick(()=>{const d=Yt(this.state);this.actions.activateAccessKeys(d==null?void 0:d.map(c=>c.id)),this.activateAccessKeysModal.close()});const a=new Ue((n=this.activateAccessKeysModal.ele)===null||n===void 0?void 0:n.querySelector('[data-id="body-text"]'),{logger:this.logger});this.activateAccessKeysModal.beforeOpen=()=>{const d=Fs(this.state);a.text=`Activate ${d}?`}})},s}),vh=w(t=>{var e,i,s,n;return n=class extends y(k,ve,ge,gh)(t){constructor(){super(...arguments),e.add(this),s.set(this,W(o=>{o?this.activateButton.enable():this.activateButton.disable()}))}onWidgetRootReady(){const o=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var r;yield(r=o.onWidgetRootReady)===null||r===void 0?void 0:r.call(this),l(this,e,"m",i).call(this),this.subscribe(l(this,s,"f").bind(this),Ns)})}},s=new WeakMap,e=new WeakSet,i=function(){var o;this.activateButton=new x((o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector('[data-id="activate-access-keys"]'),{logger:this.logger}),this.activateButton.disable(),this.activateButton.onClick(()=>{this.activateAccessKeysModal.open()})},n}),ph=w(t=>{var e,i,s;return s=class extends y(ge,T,z,k,ve)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){const n=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var o;yield(o=n.onWidgetRootReady)===null||o===void 0?void 0:o.call(this),l(this,e,"m",i).call(this)})}},e=new WeakSet,i=function(){return g(this,void 0,void 0,function*(){this.createdAccessKeyModal=this.createModal(),this.createdAccessKeyModal.setContent(F(yield this.fetchWidgetPage("created-access-key-modal.html"))),new x(()=>{var n;return(n=this.createdAccessKeyModal.ele)===null||n===void 0?void 0:n.querySelector('[data-id="modal-close"]')},{logger:this.logger}).onClick(()=>{navigator.clipboard.writeText(this.getFormData(this.createdAccessKeyModal.ele)["generated-key"]),this.resetFormData(this.createdAccessKeyModal.ele),this.createdAccessKeyModal.close()})})},s}),fh=w(t=>{var e,i,s,n,o;return o=class extends y(ge,T,z,k,ve,ph)(t){constructor(){super(...arguments),e.add(this),i.set(this,void 0),n.set(this,()=>g(this,void 0,void 0,function*(){var r,a;yield l(this,i,"f").setData((a=this.state,(r=a.tenantRoles.data||[])===null||r===void 0?void 0:r.map(({name:d})=>({value:d,label:d}))))}))}onWidgetRootReady(){const r=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var a;yield(a=r.onWidgetRootReady)===null||a===void 0?void 0:a.call(this),l(this,e,"m",s).call(this)})}},i=new WeakMap,n=new WeakMap,e=new WeakSet,s=function r(){return g(this,void 0,void 0,function*(){this.createAccessKeyModal=this.createModal(),this.createAccessKeyModal.setContent(F(yield this.fetchWidgetPage("create-access-key-modal.html"))),new x(()=>{var a;return(a=this.createAccessKeyModal.ele)===null||a===void 0?void 0:a.querySelector('[data-id="modal-cancel"]')},{logger:this.logger}).onClick(()=>{this.createAccessKeyModal.close(),this.resetFormData(this.createAccessKeyModal.ele)}),new x(()=>{var a;return(a=this.createAccessKeyModal.ele)===null||a===void 0?void 0:a.querySelector('[data-id="modal-submit"]')},{logger:this.logger}).onClick(()=>g(this,void 0,void 0,function*(){var a;if(this.validateForm(this.createAccessKeyModal.ele)){const d=yield this.actions.createAccessKey(Object.assign({},this.getFormData(this.createAccessKeyModal.ele)));this.createAccessKeyModal.close(),this.setFormData(this.createdAccessKeyModal.ele,{"generated-key":(a=d==null?void 0:d.payload)===null||a===void 0?void 0:a.cleartext}),this.createdAccessKeyModal.open()}})),C(this,i,new Kt(()=>{var a;return(a=this.createAccessKeyModal.ele)===null||a===void 0?void 0:a.querySelector('[data-id="roles-multiselect"]')},{logger:this.logger}),"f"),l(this,n,"f").call(this),this.createAccessKeyModal.afterClose=()=>{l(this,e,"m",r).call(this)}})},o}),mh=w(t=>{var e,i,s;return s=class extends y(k,fh,ve)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){const n=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var o;yield(o=n.onWidgetRootReady)===null||o===void 0?void 0:o.call(this),l(this,e,"m",i).call(this)})}},e=new WeakSet,i=function(){var n;this.createButton=new x((n=this.shadowRoot)===null||n===void 0?void 0:n.querySelector('[data-id="create-access-key"]'),{logger:this.logger}),this.createButton.onClick(()=>this.createAccessKeyModal.open())},s}),bh=w(t=>{var e,i,s;return s=class extends y(ge,T,k,ve)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){const n=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var o;yield(o=n.onWidgetRootReady)===null||o===void 0?void 0:o.call(this),yield l(this,e,"m",i).call(this)})}},e=new WeakSet,i=function(){return g(this,void 0,void 0,function*(){var n;this.deactivateAccessKeysModal=this.createModal(),this.deactivateAccessKeysModal.setContent(F(yield this.fetchWidgetPage("deactivate-access-keys-modal.html"))),new x(()=>{var d;return(d=this.deactivateAccessKeysModal.ele)===null||d===void 0?void 0:d.querySelector('[data-id="modal-cancel"]')},{logger:this.logger}).onClick(()=>this.deactivateAccessKeysModal.close()),new x(()=>{var d;return(d=this.deactivateAccessKeysModal.ele)===null||d===void 0?void 0:d.querySelector('[data-id="modal-submit"]')},{logger:this.logger}).onClick(()=>{const d=Yt(this.state);this.actions.deactivateAccessKeys(d==null?void 0:d.map(c=>c.id)),this.deactivateAccessKeysModal.close()});const a=new Ue((n=this.deactivateAccessKeysModal.ele)===null||n===void 0?void 0:n.querySelector('[data-id="body-text"]'),{logger:this.logger});this.deactivateAccessKeysModal.beforeOpen=()=>{const d=Fs(this.state);a.text=`Deactivate ${d}?`}})},s}),yh=w(t=>{var e,i,s,n;return n=class extends y(k,ve,ge,bh)(t){constructor(){super(...arguments),e.add(this),s.set(this,W(o=>{o?this.deactivateButton.enable():this.deactivateButton.disable()}))}onWidgetRootReady(){const o=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var r;yield(r=o.onWidgetRootReady)===null||r===void 0?void 0:r.call(this),l(this,e,"m",i).call(this),this.subscribe(l(this,s,"f").bind(this),Ns)})}},s=new WeakMap,e=new WeakSet,i=function(){var o;this.deactivateButton=new x((o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector('[data-id="deactivate-access-keys"]'),{logger:this.logger}),this.deactivateButton.disable(),this.deactivateButton.onClick(()=>{this.deactivateAccessKeysModal.open()})},n}),wh=w(t=>{var e,i,s;return s=class extends y(ge,T,k,ve)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){const n=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var o;yield(o=n.onWidgetRootReady)===null||o===void 0?void 0:o.call(this),yield l(this,e,"m",i).call(this)})}},e=new WeakSet,i=function(){return g(this,void 0,void 0,function*(){var n;this.deleteAccessKeysModal=this.createModal(),this.deleteAccessKeysModal.setContent(F(yield this.fetchWidgetPage("delete-access-keys-modal.html"))),new x(()=>{var d;return(d=this.deleteAccessKeysModal.ele)===null||d===void 0?void 0:d.querySelector('[data-id="modal-cancel"]')},{logger:this.logger}).onClick(()=>this.deleteAccessKeysModal.close()),new x(()=>{var d;return(d=this.deleteAccessKeysModal.ele)===null||d===void 0?void 0:d.querySelector('[data-id="modal-submit"]')},{logger:this.logger}).onClick(()=>{const d=Yt(this.state);this.actions.deleteAccessKeys(d==null?void 0:d.map(c=>c.id)),this.deleteAccessKeysModal.close()});const a=new Ue((n=this.deleteAccessKeysModal.ele)===null||n===void 0?void 0:n.querySelector('[data-id="body-text"]'),{logger:this.logger});this.deleteAccessKeysModal.beforeOpen=()=>{const d=Fs(this.state);a.text=`Delete ${d}?`}})},s}),kh=w(t=>{var e,i,s,n;return n=class extends y(k,ve,ge,wh)(t){constructor(){super(...arguments),e.add(this),s.set(this,W(o=>{o?this.deleteButton.enable():this.deleteButton.disable()}))}onWidgetRootReady(){const o=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var r;yield(r=o.onWidgetRootReady)===null||r===void 0?void 0:r.call(this),l(this,e,"m",i).call(this),this.subscribe(l(this,s,"f").bind(this),Ns)})}},s=new WeakMap,e=new WeakSet,i=function(){var o;this.deleteButton=new x((o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector('[data-id="delete-access-keys"]'),{logger:this.logger}),this.deleteButton.disable(),this.deleteButton.onClick(()=>{this.deleteAccessKeysModal.open()})},n}),Ch=w(t=>{var e,i,s,n;return n=class extends y(k,ve,ge)(t){constructor(){super(...arguments),e.add(this),i.set(this,Ze(()=>{this.actions.searchAccessKeys({text:this.searchInput.value})}))}onWidgetRootReady(){const o=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var r;yield(r=o.onWidgetRootReady)===null||r===void 0?void 0:r.call(this),l(this,e,"m",s).call(this)})}},i=new WeakMap,e=new WeakSet,s=function(){var o;this.searchInput=new Ht((o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector('[data-id="search-input"]'),{logger:this.logger}),this.searchInput.onInput(l(this,i,"f"))},n}),Rh={success:new DOMParser().parseFromString(`<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
<g id="Checkmark">
<path id="Shape" d="M10.0485 15.6396C9.5799 15.171 8.8201 15.171 8.35147 15.6396C7.88284 16.1082 7.88284 16.868 8.35147 17.3367L12.7072 21.6924C13.1759 22.1611 13.9357 22.1611 14.4043 21.6924L24.7152 11.3815C25.1838 10.9129 25.1838 10.1531 24.7152 9.68448C24.2466 9.21585 23.4868 9.21585 23.0181 9.68448L13.5558 19.1469L10.0485 15.6396Z" fill="currentcolor"/>
</g>
</svg>
`,"image/svg+xml").firstChild,error:new DOMParser().parseFromString(`<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
<g id="Icon">
<path id="Vector" d="M15.9998 26.6558C10.1118 26.6558 5.34375 21.8878 5.34375 15.9998C5.34375 10.1118 10.1118 5.34375 15.9998 5.34375C21.8878 5.34375 26.6558 10.1118 26.6558 15.9998C26.6558 21.8878 21.8878 26.6558 15.9998 26.6558ZM15.9998 24.4798C20.6718 24.4798 24.4798 20.7038 24.4798 15.9998C24.4798 11.3278 20.7038 7.51975 15.9998 7.51975C11.3278 7.51975 7.51975 11.2958 7.51975 15.9998C7.51975 20.6718 11.2958 24.4798 15.9998 24.4798ZM15.3278 9.34375H16.6718C17.0558 9.34375 17.3438 9.63175 17.3118 9.98375L16.9598 16.9278C16.9598 17.1838 16.7678 17.3438 16.5438 17.3438H15.4558C15.2318 17.3438 15.0398 17.1518 15.0398 16.9278L14.6878 9.98375C14.6878 9.63175 14.9758 9.34375 15.3278 9.34375ZM15.4558 19.4558H16.5438C16.9278 19.4558 17.2158 19.7438 17.1838 20.1278V21.1838C17.1838 21.5678 16.8958 21.8558 16.5438 21.8558H15.4558C15.0718 21.8558 14.7838 21.5678 14.7838 21.1838V20.1278C14.7838 19.7438 15.0718 19.4558 15.4558 19.4558Z" fill="currentcolor"/>
</g>
</svg>
`,"image/svg+xml").firstChild},$h=w(t=>{var e,i,s,n,o;return o=class extends y(k,ge,Os,K)(t){constructor(){super(...arguments),e.add(this),n.set(this,W(r=>{r.length&&(r.forEach(({type:a,msg:d})=>{const c=l(this,e,"m",s).call(this,a);c.setContent(l(this,e,"m",i).call(this,{type:a,msg:d})),c.show()}),setTimeout(()=>this.actions.clearNotifications()))}))}init(){const r=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var a;yield(a=r.init)===null||a===void 0?void 0:a.call(this),this.subscribe(l(this,n,"f").bind(this),zu)})}},n=new WeakMap,e=new WeakSet,i=function({type:r,msg:a}){const d=Rh[r],c=Object.assign(new DOMParser().parseFromString(`<svg width="2em" height="2em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<g id="Icon">
<path id="Shape" d="M10.6712 12L7.27521 8.60406C6.90826 8.23711 6.90826 7.64216 7.27521 7.27521C7.64216 6.90826 8.23711 6.90826 8.60406 7.27521L12 10.6712L15.3959 7.27521C15.7629 6.90826 16.3578 6.90826 16.7248 7.27521C17.0917 7.64216 17.0917 8.23711 16.7248 8.60406L13.3288 12L16.7248 15.3959C17.0917 15.7629 17.0917 16.3578 16.7248 16.7248C16.3578 17.0917 15.7629 17.0917 15.3959 16.7248L12 13.3288L8.60406 16.7248C8.23711 17.0917 7.64216 17.0917 7.27521 16.7248C6.90826 16.3578 6.90826 15.7629 7.27521 15.3959L10.6712 12Z" fill="currentcolor"/>
</g>
</svg>
`,"image/svg+xml").firstChild,{slot:"close"});return`${(d==null?void 0:d.outerHTML)||""}${a}${c.outerHTML}`},s=function(r){return this.createNotification({mode:r,duration:r==="error"?0:3e3,position:"bottom-start",size:"sm"})},o}),Ih=w(t=>class extends y(Vt,Ct,hh,mh,kh,Ch,vh,yh,$h)(t){init(){const e=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var i;yield(i=e.init)===null||i===void 0?void 0:i.call(this)})}}),ha=y(t=>class extends Ih(t){})(HTMLElement);customElements.define("descope-access-key-management-widget",ha);const xh=Object.freeze(Object.defineProperty({__proto__:null,default:ha},Symbol.toStringTag,{value:"Module"})),kn=t=>t.selectedAuditId,fs=M(t=>t.auditList.data,t=>t.map(e=>Object.assign(Object.assign({},e),{occurredFormatted:e!=null&&e.occurred?new Date(Number(e==null?void 0:e.occurred)||0).toLocaleString():"N/A"})));M(kn,fs,(t,e)=>e.find(i=>t===i.id)),M(kn,t=>!!t);const ga=L("audit/search",(t,{extra:{api:e},getState:i})=>{const s=i().searchParams;return e.audit.search(Object.assign(Object.assign({},s),t))}),Sh=(t=>(...e)=>i=>{i.addCase(t.pending,(s,n)=>{e.forEach(({onPending:o})=>{o==null||o(s,n)})}),i.addCase(t.fulfilled,(s,n)=>{e.forEach(({onFulfilled:o})=>{o==null||o(s,n)})}),i.addCase(t.rejected,(s,n)=>{e.forEach(({onRejected:o})=>{o==null||o(s,n)})})})(ga)({onPending:(t,e)=>{t.searchParams=Object.assign(Object.assign({},t.searchParams),e.meta.arg)},onFulfilled:(t,e)=>{t.auditList.data=e.payload}},(rt=t=>t.auditList,{onFulfilled:t=>{rt(t).loading=!1},onPending:t=>{rt(t).loading=!0,rt(t).error=null},onRejected:(t,e)=>{rt(t).loading=!1,rt(t).error=e.error}}));var rt;const Cn={action:ga,reducer:Sh},Rn={auditList:{data:[],loading:!1,error:null},searchParams:{text:"",sort:[]},selectedAuditId:""},Mh={search:"/v1/mgmt/audit/search"},Uh=t=>g(void 0,[t],void 0,function*({text:e,sort:i}){return new Promise(s=>{const n=[];for(let o=1;o<9;o+=1)n.push({id:`Audit ${o}`,action:`Action ${o}`,actorId:`Actor ${o}`,type:"info",method:`Method ${o}`,userId:`User ${o}`,device:`Device ${o}`,geo:`Geo ${o}`,remoteAddress:`127.0.0.${o}`,externalIds:[`Login ID ${o}`],occurred:new Date().getTime()});i.forEach(o=>{n.sort((r,a)=>{var d,c;return o.desc?(c=a[o.field])===null||c===void 0?void 0:c.localeCompare(r[o.field]):(d=r[o.field])===null||d===void 0?void 0:d.localeCompare(a[o.field])})}),s(n.filter(o=>o.id.toLowerCase().includes(e.toLowerCase())||o.action.toLowerCase().includes(e.toLowerCase())||o.type.toLowerCase().includes(e.toLowerCase())||o.device.toLowerCase().includes(e.toLowerCase())||o.method.toLowerCase().includes(e.toLowerCase())||o.geo.toLowerCase().includes(e.toLowerCase())||o.remoteAddress.toLowerCase().includes(e.toLowerCase())||o.externalIds.includes(e.toLowerCase())||o.userId.toLowerCase().includes(e.toLowerCase())))})}),Ah=({httpClient:t,tenant:e,mock:i})=>({search:(...s)=>g(void 0,[...s],void 0,function*({page:n,limit:o=1e4,text:r,sort:a,from:d}={}){if(i)return Uh({page:n,limit:o,text:r,sort:a});const c=yield t.post(Mh.search,{limit:o,page:n,text:r,sort:a,from:d},{queryParams:{tenant:e}});return yield(u=>g(void 0,void 0,void 0,function*(){const h=yield u.text(),v=JSON.parse(h);if(!u.ok){const f=`${v.errorDescription}${v.errorMessage?`: ${v.errorMessage}`:""}`;throw Error(f||`${u.status} ${u.statusText}`)}u.json=()=>Promise.resolve(v),u.text=()=>Promise.resolve(h)}))(c),(yield c.json()).audits})}),jh=w(t=>{var e,i,s,n;const o=y(wt,Xe,k,kt,B({tenant:B.missingAttrValidator}))(t);return n=class extends o{constructor(){super(...arguments),e.add(this),i.set(this,void 0)}get tenant(){return this.getAttribute("tenant")}get widgetId(){return this.getAttribute("widget-id")}get mock(){return this.getAttribute("mock")}get api(){return l(this,i,"f")||l(this,e,"m",s).call(this),l(this,i,"f")}init(){const r=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var a;yield(a=r.init)===null||a===void 0?void 0:a.call(this),this.observeAttributes(["project-id","base-url","tenant"],()=>{l(this,i,"f")&&l(this,e,"m",s).call(this)})})}},i=new WeakMap,e=new WeakSet,s=function(){this.logger.debug("creating an sdk instance"),C(this,i,((r,a,d,c)=>{const u=Je(Object.assign(Object.assign({},r),{persistTokens:!0,baseHeaders:{"x-descope-widget-type":"audit-management-widget","x-descope-widget-id":c,"x-descope-widget-version":"0.1.83"}}));return{audit:Ah({httpClient:u.httpClient,tenant:a,mock:d})}})({projectId:this.projectId,baseUrl:this.baseUrl},this.tenant,this.mock==="true",this.widgetId),"f")},n}),qs=w(t=>{const e=y(zt({name:"widget",initialState:Rn,reducers:{setSelectedAuditId:(i,{payload:s})=>{i.selectedAuditId=s}},extraReducers:i=>{Cn.reducer(i)},asyncActions:{searchAudit:Cn.action}}),K,k,jh)(t);return class extends e{constructor(...i){super(...i),this.state=Rn,this.subscribe(s=>{this.logger.debug("State update:",s),this.state=s})}}}),_h=w(t=>{const e=y(Qe,B({"widget-id":B.missingAttrValidator}))(t);return class extends e{get widgetId(){return this.getAttribute("widget-id")}fetchWidgetPage(i){return g(this,void 0,void 0,function*(){return(yield this.fetchStaticResource(`audit-management-widget/${this.widgetId}/${i}`,"text")).body})}}}),va=w(t=>{var e,i,s;return s=class extends y(k,K,We,Le,_h,qs)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){return g(this,void 0,void 0,function*(){})}init(){const n=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var o;yield(o=n.init)===null||o===void 0?void 0:o.call(this),yield Promise.all([l(this,e,"m",i).call(this)]),this.onWidgetRootReady()})}},e=new WeakSet,i=function(){return g(this,void 0,void 0,function*(){const n=F(yield this.fetchWidgetPage("root.html"));yield this.loadDescopeUiComponents(n),this.contentRootElement.append(n.content.cloneNode(!0))})},s}),Oh=w(t=>{var e,i,s,n,o;return o=class extends y(k,va,qs)(t){constructor(){super(...arguments),e.add(this),i.set(this,Ze(()=>{const r=this.rangeInput.value,a=new Date;let d;switch(r){case"minuets15":d=a.setMinutes(a.getMinutes()-15);break;case"hour":d=a.setHours(a.getHours()-1);break;case"hour6":d=a.setHours(a.getHours()-6);break;case"day":default:d=a.setDate(a.getDate()-1);break;case"day3":d=a.setDate(a.getDate()-3);break;case"week":d=a.setDate(a.getDate()-7);break;case"week2":d=a.setDate(a.getDate()-14);break;case"month":d=a.setMonth(a.getMonth()-1)}this.actions.searchAudit({text:this.searchInput.value,from:Math.floor(new Date(d).getTime())})}))}onWidgetRootReady(){const r=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var a;yield(a=r.onWidgetRootReady)===null||a===void 0?void 0:a.call(this),l(this,e,"m",s).call(this),l(this,e,"m",n).call(this)})}},i=new WeakMap,e=new WeakSet,s=function(){var r;this.searchInput=new Ht((r=this.shadowRoot)===null||r===void 0?void 0:r.querySelector('[data-id="search-input"]'),{logger:this.logger}),this.searchInput.onInput(l(this,i,"f"))},n=function(){var r;this.rangeInput=new $d((r=this.shadowRoot)===null||r===void 0?void 0:r.querySelector('[data-id="range-input"]'),{logger:this.logger}),this.rangeInput.onInput(l(this,i,"f"))},o}),Eh=w(t=>{var e,i,s,n;return n=class extends y(qs,k,va)(t){constructor(){super(...arguments),e.add(this),s.set(this,W(o=>{this.auditTable.data=o}))}onWidgetRootReady(){const o=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var r;yield(r=o.onWidgetRootReady)===null||r===void 0?void 0:r.call(this),l(this,e,"m",i).call(this),l(this,s,"f").call(this,fs(this.state)),this.subscribe(l(this,s,"f").bind(this),fs)})}},s=new WeakMap,e=new WeakSet,i=function(){var o;this.auditTable=new Pi((o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector('[data-id="audit-table"]'),{logger:this.logger}),this.auditTable.onSelectedItemsChange(r=>{this.actions.setSelectedAuditId(r.detail.value.map(({id:a})=>a))})},n}),Wh=w(t=>class extends y(Vt,Ct,Eh,Oh)(t){init(){const e=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var i;yield(i=e.init)===null||i===void 0?void 0:i.call(this)})}}),pa=y(t=>class extends Wh(t){})(HTMLElement);customElements.define("descope-audit-management-widget",pa);const Lh=Object.freeze(Object.defineProperty({__proto__:null,default:pa},Symbol.toStringTag,{value:"Module"})),Pe=t=>t.me.data,$n=M(Pe,t=>t.picture),In=M(Pe,t=>t.email),xn=M(Pe,t=>t.verifiedEmail),Oi=M(Pe,t=>t.name),Sn=M(Pe,t=>t.phone),Mn=M(Pe,t=>t.verifiedPhone),Un=M(Pe,t=>t.webauthn);M(Pe,t=>t.password);const fa=t=>(...e)=>i=>{i.addCase(t.pending,(s,n)=>{e.forEach(({onPending:o})=>{o==null||o(s,n)})}),i.addCase(t.fulfilled,(s,n)=>{e.forEach(({onFulfilled:o})=>{o==null||o(s,n)})}),i.addCase(t.rejected,(s,n)=>{e.forEach(({onRejected:o})=>{o==null||o(s,n)})})},ma=L("users/me",(t,{extra:{api:e}})=>e.user.me()),Th=fa(ma)({onFulfilled:(t,e)=>{t.me.data=e.payload}},(at=t=>t.me,{onFulfilled:t=>{at(t).loading=!1},onPending:t=>{at(t).loading=!0,at(t).error=null},onRejected:(t,e)=>{at(t).loading=!1,at(t).error=e.error}}));var at;const An={action:ma,reducer:Th},jn=L("users/logout",(t,{extra:{api:e}})=>e.user.logout()),_n={action:jn,reducer:fa(jn)({})},On={me:{loading:!1,error:null,data:{}}},Ph={me:"/v1/auth/me"},Dh=()=>g(void 0,void 0,void 0,function*(){return new Promise(t=>{t({loginIds:["user@company.com"],externalIds:["user@company.com"],userId:"user-1",name:"Test User",email:"user@company.com",roleNames:["Role"],phone:"+1-202-555-010",verifiedEmail:!0,verifiedPhone:!0,userTenants:[],status:"enabled",editable:!0,createdTime:new Date().getTime(),customAttributes:{},familyName:"",givenName:"",middleName:"",picture:void 0,password:!0,SAML:!1,test:!1,TOTP:!1,webauthn:!0})})}),Nh=({httpClient:t,mock:e})=>({me:()=>g(void 0,void 0,void 0,function*(){if(e)return Dh();const i=yield t.get(Ph.me);return yield(s=>g(void 0,void 0,void 0,function*(){const n=yield s.text(),o=JSON.parse(n);if(!s.ok){const r=`${o.errorDescription}${o.errorMessage?`: ${o.errorMessage}`:""}`;throw Error(r||`${s.status} ${s.statusText}`)}s.json=()=>Promise.resolve(o),s.text=()=>Promise.resolve(n)}))(i),i.json()})}),Fh=w(t=>{var e,i,s,n;const o=y(wt,Xe,k,kt)(t);return n=class extends o{constructor(){super(...arguments),e.add(this),i.set(this,void 0)}get widgetId(){return this.getAttribute("widget-id")}get mock(){return this.getAttribute("mock")}get api(){return l(this,i,"f")||l(this,e,"m",s).call(this),l(this,i,"f")}init(){const r=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var a;yield(a=r.init)===null||a===void 0?void 0:a.call(this),this.observeAttributes(["project-id","base-url"],()=>{l(this,i,"f")&&l(this,e,"m",s).call(this)})})}},i=new WeakMap,e=new WeakSet,s=function(){this.logger.debug("creating an sdk instance"),C(this,i,((r,a,d)=>{const c=Je(Object.assign(Object.assign({},r),{persistTokens:!0,baseHeaders:{"x-descope-widget-type":"user-profile-widget","x-descope-widget-id":d,"x-descope-widget-version":"0.0.102"}}));return{user:Object.assign(Object.assign({},Nh({httpClient:c.httpClient,mock:a})),{logout:a?()=>g(void 0,void 0,void 0,function*(){}):c.logout})}})({projectId:this.projectId,baseUrl:this.baseUrl},this.mock==="true",this.widgetId),"f")},n}),je=w(t=>{const e=y(zt({name:"widget",initialState:On,reducers:{},extraReducers:i=>{An.reducer(i),_n.reducer(i)},asyncActions:{getMe:An.action,logout:_n.action}}),K,k,Fh)(t);return class extends e{constructor(...i){super(...i),this.state=On,this.subscribe(s=>{this.logger.debug("State update:",s),this.state=s})}}}),qh=w(t=>{const e=y(Qe,B({"widget-id":B.missingAttrValidator}))(t);return class extends e{get widgetId(){return this.getAttribute("widget-id")}fetchWidgetPage(i){return g(this,void 0,void 0,function*(){return(yield this.fetchStaticResource(`user-profile-widget/${this.widgetId}/${i}`,"text")).body})}}}),et=w(t=>{var e,i,s;return s=class extends y(k,K,We,Le,qh,je)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){return g(this,void 0,void 0,function*(){})}init(){const n=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var o;yield(o=n.init)===null||o===void 0?void 0:o.call(this),yield Promise.all([this.actions.getMe(),l(this,e,"m",i).call(this)]),this.onWidgetRootReady()})}},e=new WeakSet,i=function(){return g(this,void 0,void 0,function*(){const n=F(yield this.fetchWidgetPage("root.html"));yield this.loadDescopeUiComponents(n),this.contentRootElement.append(n.content.cloneNode(!0))})},s}),Ce=(t={})=>{const e=F("<descope-wc></descope-wc>");return Object.entries(t).forEach(([i,s])=>{e.content.querySelector("descope-wc").setAttribute(yd(i),s)}),e};function En(t){return new URLSearchParams(window.location.search).get(t)}const Bh=w(t=>{var e,i,s,n,o,r,a,d,c;return c=class extends y(je,k,et,T,Hd)(t){constructor(){super(...arguments),e.add(this),i.set(this,void 0),s.set(this,void 0),a.set(this,W(u=>{this.avatar.image=u})),d.set(this,W(u=>{this.avatar.displayName=u}))}onWidgetRootReady(){const u=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var h;yield(h=u.onWidgetRootReady)===null||h===void 0?void 0:h.call(this),l(this,e,"m",r).call(this),l(this,e,"m",n).call(this),l(this,a,"f").call(this,$n(this.state)),l(this,d,"f").call(this,Oi(this.state)),this.subscribe(l(this,a,"f").bind(this),$n),this.subscribe(l(this,d,"f").bind(this),Oi)})}},i=new WeakMap,s=new WeakMap,a=new WeakMap,d=new WeakMap,e=new WeakSet,n=function(){C(this,i,this.createModal({"data-id":"update-pic"}),"f"),C(this,s,new ke(()=>{var u;return(u=l(this,i,"f").ele)===null||u===void 0?void 0:u.querySelector("descope-wc")},{logger:this.logger}),"f"),l(this,i,"f").afterClose=l(this,e,"m",o).bind(this),l(this,e,"m",o).call(this)},o=function(){l(this,i,"f").setContent(Ce({projectId:this.projectId,flowId:this.avatar.flowId,baseUrl:this.baseUrl,baseStaticUrl:this.baseStaticUrl})),l(this,s,"f").onSuccess(()=>{l(this,i,"f").close(),this.actions.getMe()})},r=function(){this.avatar=new xd(()=>{var u;return(u=this.shadowRoot)===null||u===void 0?void 0:u.querySelector("descope-avatar")},{logger:this.logger}),this.avatar.onClick(()=>{l(this,i,"f").open()})},c}),Kh=w(t=>{var e,i,s,n,o,r,a,d,c,u,h,v,f;return f=class extends y(je,k,et,T)(t){constructor(){super(...arguments),e.add(this),i.set(this,void 0),s.set(this,void 0),n.set(this,void 0),o.set(this,void 0),h.set(this,W(p=>{this.emailUserAttr.value=p})),v.set(this,W(p=>{this.emailUserAttr.badgeLabel=p?"":"Unverified"}))}onWidgetRootReady(){const p=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var m;yield(m=p.onWidgetRootReady)===null||m===void 0?void 0:m.call(this),l(this,e,"m",u).call(this),l(this,e,"m",r).call(this),l(this,e,"m",d).call(this),l(this,h,"f").call(this,In(this.state)),l(this,v,"f").call(this,xn(this.state)),this.subscribe(l(this,h,"f").bind(this),In),this.subscribe(l(this,v,"f").bind(this),xn)})}},i=new WeakMap,s=new WeakMap,n=new WeakMap,o=new WeakMap,h=new WeakMap,v=new WeakMap,e=new WeakSet,r=function(){C(this,i,this.createModal({"data-id":"edit-email"}),"f"),C(this,s,new ke(()=>{var p;return(p=l(this,i,"f").ele)===null||p===void 0?void 0:p.querySelector("descope-wc")},{logger:this.logger}),"f"),l(this,i,"f").afterClose=l(this,e,"m",a).bind(this),l(this,e,"m",a).call(this)},a=function(){l(this,i,"f").setContent(Ce({projectId:this.projectId,flowId:this.emailUserAttr.editFlowId,baseUrl:this.baseUrl,baseStaticUrl:this.baseStaticUrl})),l(this,s,"f").onSuccess(()=>{l(this,i,"f").close(),this.actions.getMe()})},d=function(){C(this,n,this.createModal({"data-id":"delete-email"}),"f"),C(this,o,new ke(()=>{var p;return(p=l(this,n,"f").ele)===null||p===void 0?void 0:p.querySelector("descope-wc")},{logger:this.logger}),"f"),l(this,n,"f").afterClose=l(this,e,"m",c).bind(this),l(this,e,"m",c).call(this)},c=function(){l(this,n,"f").setContent(Ce({projectId:this.projectId,flowId:this.emailUserAttr.deleteFlowId,baseUrl:this.baseUrl,baseStaticUrl:this.baseStaticUrl})),l(this,o,"f").onSuccess(()=>{l(this,n,"f").close(),this.actions.getMe()})},u=function(){this.emailUserAttr=new js(()=>{var p;return(p=this.shadowRoot)===null||p===void 0?void 0:p.querySelector('descope-user-attribute[data-id="email"]')},{logger:this.logger}),this.emailUserAttr.onEditClick(()=>{l(this,i,"f").open()}),this.emailUserAttr.onDeleteClick(()=>{l(this,n,"f").open()})},f}),Hh=w(t=>{var e,i,s,n,o,r,a,d,c,u,h,v;return v=class extends y(je,k,et,T)(t){constructor(){super(...arguments),e.add(this),i.set(this,void 0),s.set(this,void 0),n.set(this,void 0),o.set(this,void 0),h.set(this,W(f=>{this.nameUserAttr.value=f}))}onWidgetRootReady(){const f=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var p;yield(p=f.onWidgetRootReady)===null||p===void 0?void 0:p.call(this),l(this,e,"m",u).call(this),l(this,e,"m",r).call(this),l(this,e,"m",d).call(this),l(this,h,"f").call(this,Oi(this.state)),this.subscribe(l(this,h,"f").bind(this),Oi)})}},i=new WeakMap,s=new WeakMap,n=new WeakMap,o=new WeakMap,h=new WeakMap,e=new WeakSet,r=function(){C(this,i,this.createModal({"data-id":"edit-name"}),"f"),C(this,s,new ke(()=>{var f;return(f=l(this,i,"f").ele)===null||f===void 0?void 0:f.querySelector("descope-wc")},{logger:this.logger}),"f"),l(this,i,"f").afterClose=l(this,e,"m",a).bind(this),l(this,e,"m",a).call(this)},a=function(){l(this,i,"f").setContent(Ce({projectId:this.projectId,flowId:this.nameUserAttr.editFlowId,baseUrl:this.baseUrl,baseStaticUrl:this.baseStaticUrl})),l(this,s,"f").onSuccess(()=>{l(this,i,"f").close(),this.actions.getMe()})},d=function(){C(this,n,this.createModal({"data-id":"delete-name"}),"f"),C(this,o,new ke(()=>{var f;return(f=l(this,n,"f").ele)===null||f===void 0?void 0:f.querySelector("descope-wc")},{logger:this.logger}),"f"),l(this,n,"f").afterClose=l(this,e,"m",c).bind(this),l(this,e,"m",c).call(this)},c=function(){l(this,n,"f").setContent(Ce({projectId:this.projectId,flowId:this.nameUserAttr.deleteFlowId,baseUrl:this.baseUrl,baseStaticUrl:this.baseStaticUrl})),l(this,o,"f").onSuccess(()=>{l(this,n,"f").close(),this.actions.getMe()})},u=function(){this.nameUserAttr=new js(()=>{var f;return(f=this.shadowRoot)===null||f===void 0?void 0:f.querySelector('descope-user-attribute[data-id="name"]')},{logger:this.logger}),this.nameUserAttr.onEditClick(()=>{l(this,i,"f").open()}),this.nameUserAttr.onDeleteClick(()=>{l(this,n,"f").open()})},v}),Vh=w(t=>{var e,i,s,n,o,r,a,d,c,u,h,v,f;return f=class extends y(je,k,et,T)(t){constructor(){super(...arguments),e.add(this),i.set(this,void 0),s.set(this,void 0),n.set(this,void 0),o.set(this,void 0),h.set(this,W(p=>{this.phoneUserAttr.value=p})),v.set(this,W(p=>{this.phoneUserAttr.badgeLabel=p?"":"Unverified"}))}onWidgetRootReady(){const p=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var m;yield(m=p.onWidgetRootReady)===null||m===void 0?void 0:m.call(this),l(this,e,"m",u).call(this),l(this,e,"m",r).call(this),l(this,e,"m",d).call(this),l(this,h,"f").call(this,Sn(this.state)),l(this,v,"f").call(this,Mn(this.state)),this.subscribe(l(this,h,"f").bind(this),Sn),this.subscribe(l(this,v,"f").bind(this),Mn)})}},i=new WeakMap,s=new WeakMap,n=new WeakMap,o=new WeakMap,h=new WeakMap,v=new WeakMap,e=new WeakSet,r=function(){C(this,i,this.createModal({"data-id":"edit-phone"}),"f"),C(this,s,new ke(()=>{var p;return(p=l(this,i,"f").ele)===null||p===void 0?void 0:p.querySelector("descope-wc")},{logger:this.logger}),"f"),l(this,i,"f").afterClose=l(this,e,"m",a).bind(this),l(this,e,"m",a).call(this)},a=function(){l(this,i,"f").setContent(Ce({projectId:this.projectId,flowId:this.phoneUserAttr.editFlowId,baseUrl:this.baseUrl,baseStaticUrl:this.baseStaticUrl})),l(this,s,"f").onSuccess(()=>{l(this,i,"f").close(),this.actions.getMe()})},d=function(){C(this,n,this.createModal({"data-id":"delete-phone"}),"f"),C(this,o,new ke(()=>{var p;return(p=l(this,n,"f").ele)===null||p===void 0?void 0:p.querySelector("descope-wc")},{logger:this.logger}),"f"),l(this,n,"f").afterClose=l(this,e,"m",c).bind(this),l(this,e,"m",c).call(this)},c=function(){l(this,n,"f").setContent(Ce({projectId:this.projectId,flowId:this.phoneUserAttr.deleteFlowId,baseUrl:this.baseUrl,baseStaticUrl:this.baseStaticUrl})),l(this,o,"f").onSuccess(()=>{l(this,n,"f").close(),this.actions.getMe()})},u=function(){this.phoneUserAttr=new js(()=>{var p;return(p=this.shadowRoot)===null||p===void 0?void 0:p.querySelector('descope-user-attribute[data-id="phone"]')},{logger:this.logger}),this.phoneUserAttr.onEditClick(()=>{l(this,i,"f").open()}),this.phoneUserAttr.onDeleteClick(()=>{l(this,n,"f").open()})},f}),zh=w(t=>{var e,i,s,n,o,r,a,d;return d=class extends y(je,k,et,T)(t){constructor(){super(...arguments),e.add(this),i.set(this,void 0),s.set(this,void 0),a.set(this,W(c=>{this.passkeyUserAuthMethod.fulfilled=c}))}onWidgetRootReady(){const c=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var u;yield(u=c.onWidgetRootReady)===null||u===void 0?void 0:u.call(this),l(this,e,"m",r).call(this),l(this,e,"m",n).call(this),l(this,a,"f").call(this,Un(this.state)),this.subscribe(l(this,a,"f").bind(this),Un)})}},i=new WeakMap,s=new WeakMap,a=new WeakMap,e=new WeakSet,n=function(){C(this,i,this.createModal({"data-id":"passkey"}),"f"),C(this,s,new ke(()=>{var c;return(c=l(this,i,"f").ele)===null||c===void 0?void 0:c.querySelector("descope-wc")},{logger:this.logger}),"f"),l(this,i,"f").afterClose=l(this,e,"m",o).bind(this),l(this,e,"m",o).call(this)},o=function(){l(this,i,"f").setContent(Ce({projectId:this.projectId,flowId:this.passkeyUserAuthMethod.flowId,baseUrl:this.baseUrl,baseStaticUrl:this.baseStaticUrl})),l(this,s,"f").onSuccess(()=>{l(this,i,"f").close(),this.actions.getMe()})},r=function(){this.passkeyUserAuthMethod=new sr(()=>{var c;return(c=this.shadowRoot)===null||c===void 0?void 0:c.querySelector('descope-user-auth-method[data-id="passkey"]')},{logger:this.logger}),this.passkeyUserAuthMethod.onButtonClick(()=>{l(this,i,"f").open()})},d}),Gh=w(t=>{var e,i,s,n,o,r,a;return a=class extends y(je,k,et,T)(t){constructor(){super(...arguments),e.add(this),i.set(this,void 0),s.set(this,void 0)}onWidgetRootReady(){const d=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var c;yield(c=d.onWidgetRootReady)===null||c===void 0?void 0:c.call(this),l(this,e,"m",r).call(this),l(this,e,"m",n).call(this)})}},i=new WeakMap,s=new WeakMap,e=new WeakSet,n=function(){C(this,i,this.createModal({"data-id":"password"}),"f"),C(this,s,new ke(()=>{var d;return(d=l(this,i,"f").ele)===null||d===void 0?void 0:d.querySelector("descope-wc")},{logger:this.logger}),"f"),l(this,i,"f").afterClose=l(this,e,"m",o).bind(this),l(this,e,"m",o).call(this)},o=function(){l(this,i,"f").setContent(Ce({projectId:this.projectId,flowId:this.passwordUserAuthMethod.flowId,baseUrl:this.baseUrl,baseStaticUrl:this.baseStaticUrl})),l(this,s,"f").onSuccess(()=>{l(this,i,"f").close()})},r=function(){this.passwordUserAuthMethod=new sr(()=>{var d;return(d=this.shadowRoot)===null||d===void 0?void 0:d.querySelector('descope-user-auth-method[data-id="password"]')},{logger:this.logger}),this.passwordUserAuthMethod.onButtonClick(()=>{l(this,i,"f").open()})},a}),Jh=w(t=>{var e,i,s;return s=class extends y(je,k,et,T)(t){constructor(){super(...arguments),e.add(this)}onWidgetRootReady(){const n=Object.create(null,{onWidgetRootReady:{get:()=>super.onWidgetRootReady}});return g(this,void 0,void 0,function*(){var o;yield(o=n.onWidgetRootReady)===null||o===void 0?void 0:o.call(this),l(this,e,"m",i).call(this)})}},e=new WeakSet,i=function(){this.logout=new x(()=>{var n;return(n=this.shadowRoot)===null||n===void 0?void 0:n.querySelector('descope-button[data-id="logout"]')},{logger:this.logger}),this.logout.onClick(()=>g(this,void 0,void 0,function*(){yield this.actions.logout(),this.dispatchEvent(new CustomEvent("logout"))}))},s}),Wn="widget-flow",Zh=w(t=>{var e,i,s;return s=class extends y(K,T,je,k)(t){constructor(){super(...arguments),e.add(this)}init(){const n=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var o;yield(o=n.init)===null||o===void 0?void 0:o.call(this);const r=En(Wn);r&&(function(a){if(window.history.replaceState&&En(a)){const d=new URL(window.location.href),c=new URLSearchParams(d.search);c.delete(a),d.search=c.toString(),window.history.replaceState({},"",d.toString())}}(Wn),l(this,e,"m",i).call(this,r))})}},e=new WeakSet,i=function(n){const o=this.createModal({"data-id":"redirect-flow"});o.setContent(Ce({projectId:this.projectId,flowId:n,baseUrl:this.baseUrl,baseStaticUrl:this.baseStaticUrl})),new ke(()=>{var r;return(r=o.ele)===null||r===void 0?void 0:r.querySelector("descope-wc")},{logger:this.logger}).onSuccess(()=>{o.close(),this.actions.getMe()}),o.afterClose=()=>{o.remove()},o.open()},s}),Xh=w(t=>class extends y(Vt,Ct,Zh,Kh,Bh,Hh,Vh,zh,Gh,Jh)(t){init(){const e=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var i;yield(i=e.init)===null||i===void 0?void 0:i.call(this)})}}),ba=y(t=>class extends Xh(t){init(){const e=Object.create(null,{init:{get:()=>super.init}});return g(this,void 0,void 0,function*(){var i;yield(i=e.init)===null||i===void 0?void 0:i.call(this),Ws.sdkConfigOverrides={baseHeaders:{"x-descope-widget-type":"user-profile-widget","x-descope-widget-id":this.getAttribute("widget-id"),"x-descope-widget-version":"0.0.102"}}})}})(HTMLElement);customElements.define("descope-user-profile-widget",ba);const Qh=Object.freeze(Object.defineProperty({__proto__:null,default:ba},Symbol.toStringTag,{value:"Module"})),ya=(t,e,i,s={})=>{var n,o,r,a;return[Math.min(Math.max(e,(s.left==="all"?t.offsetWidth:(n=s.left)!==null&&n!==void 0?n:0)-t.offsetWidth),window.innerWidth-(s.right==="all"?t.offsetWidth:(o=s.right)!==null&&o!==void 0?o:0)),Math.min(Math.max(i,(s.top==="all"?t.offsetHeight:(r=s.top)!==null&&r!==void 0?r:0)-t.offsetHeight),window.innerHeight-(s.bottom==="all"?t.offsetHeight:(a=s.bottom)!==null&&a!==void 0?a:0))]};var ze,Tt,le,Ft,wi,ki,wa,Ln,ms,ka;const Ca=document.createElement("template");Ca.innerHTML=`
<style>
  .debugger {
    width: 300px;
    height: 200px;
    background-color: #FAFAFA;
    position: fixed;
    font-family: "Helvetica Neue", sans-serif;
    box-shadow: rgba(0, 0, 0, 0.1) 0px 5px 10px;
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid lightgrey;
    pointer-events: initial;
    display: flex;
    flex-direction: column;
    min-width: 200px;
    max-width: 600px;
    max-height: calc(100% - 64px);
    min-height: 200px;
    resize: both;
  }

  .header {
    padding: 8px 16px;
    display: flex;
    align-items: center;
    background-color: #EEEEEE;
    cursor: move;
    border-bottom: 1px solid #e0e0e0;
  }

  .content {
    font-size: 14px;
    flex-grow: 1;
    overflow: auto;
  }

  .msg {
    border-bottom: 1px solid lightgrey;
    padding: 8px 16px;
    display: flex;
    gap: 5px;
    background-color: #FAFAFA;
  }

  .msg.collapsible {
    cursor: pointer;
  }

  .empty-state {
    padding: 8px 16px;
    background-color: #FAFAFA;
  }


  .msg.collapsible:not(.collapsed) {
    background-color: #F5F5F5;
  }

  .msg_title {
    padding-bottom: 5px;
    display: flex;
    gap: 8px;
    font-weight: 500;
  }

  .msg svg {
    padding: 1px;
    flex-shrink: 0;
    margin-top: -2px;
  }

  .msg_content {
    overflow: hidden;
    flex-grow: 1;
    margin-right:5px;
  }

  .msg_desc {
    color: #646464;
    cursor: initial;
    word-wrap: break-word;
  }

  .msg.collapsed .msg_desc {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .msg.collapsible.collapsed .chevron {
    transform: rotate(-45deg) translateX(-2px);
  }

  .msg.collapsible .chevron {
    content: "";
    width:6px;
    height:6px;
    border-bottom: 2px solid grey;
    border-right: 2px solid grey;
    transform: rotate(45deg) translateX(-1px);
    margin: 5px;
    flex-shrink:0;
  }
</style>

<div style="top:32px; left:${window.innerWidth-300-32}px;" class="debugger">
  <div class="header">
    <span>Debugger messages</span>
  </div>
  <div class="content">
    <div class="empty-state">
      No errors detected 
    </div>
  </div>
</div>
`;class Ra extends HTMLElement{constructor(){super(),ze.add(this),Tt.set(this,new pt({messages:[]})),le.set(this,void 0),Ft.set(this,void 0),wi.set(this,void 0),ki.set(this,{resize:l(this,ze,"m",ka).bind(this)}),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(Ca.content.cloneNode(!0)),C(this,le,this.shadowRoot.querySelector(".debugger"),"f"),C(this,Ft,l(this,le,"f").querySelector(".content"),"f"),C(this,wi,l(this,le,"f").querySelector(".header"),"f")}updateData(e){l(this,Tt,"f").update(i=>({messages:i.messages.concat(e)}))}connectedCallback(){var e;((i,s,n)=>{let o=0,r=0,a=0,d=0;function c(v){v.preventDefault(),o=a-v.clientX,r=d-v.clientY,a=v.clientX,d=v.clientY;const[f,p]=ya(i,i.offsetLeft-o,i.offsetTop-r,n);i.style.top=`${p}px`,i.style.left=`${f}px`}function u(){document.onmouseup=null,document.onmousemove=null}function h(v){v.preventDefault(),a=v.clientX,d=v.clientY,document.onmouseup=u,document.onmousemove=c}s?s.onmousedown=h:i.onmousedown=h})(l(this,le,"f"),l(this,wi,"f"),{top:"all",bottom:100,left:100,right:100}),window.addEventListener("resize",l(this,ki,"f").resize),(e=l(this,le,"f")).onmousemove=i=>{(i.target.w&&i.target.w!==i.target.offsetWidth||i.target.h&&i.target.h!==i.target.offsetHeight)&&e.onresize(i),i.target.w=i.target.offsetWidth,i.target.h=i.target.offsetHeight},l(this,le,"f").onresize=l(this,ze,"m",ms).bind(this),l(this,Tt,"f").subscribe(l(this,ze,"m",wa).bind(this))}disconnectedCallback(){l(this,Tt,"f").unsubscribeAll(),window.removeEventListener("resize",l(this,ki,"f").resize)}}Tt=new WeakMap,le=new WeakMap,Ft=new WeakMap,wi=new WeakMap,ki=new WeakMap,ze=new WeakSet,wa=function(t){l(this,ze,"m",Ln).call(this,t),l(this,ze,"m",ms).call(this)},Ln=function(t){l(this,Ft,"f").innerHTML=t.messages.map(e=>`
    <div class="msg">
      <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5.99984 13.167L8.99984 10.167L11.9998 13.167L13.1665 12.0003L10.1665 9.00033L13.1665 6.00033L11.9998 4.83366L8.99984 7.83366L5.99984 4.83366L4.83317 6.00033L7.83317 9.00033L4.83317 12.0003L5.99984 13.167ZM8.99984 17.3337C7.84706 17.3337 6.76373 17.1148 5.74984 16.677C4.73595 16.2398 3.854 15.6462 3.104 14.8962C2.354 14.1462 1.76039 13.2642 1.32317 12.2503C0.885393 11.2364 0.666504 10.1531 0.666504 9.00033C0.666504 7.84755 0.885393 6.76421 1.32317 5.75033C1.76039 4.73644 2.354 3.85449 3.104 3.10449C3.854 2.35449 4.73595 1.7606 5.74984 1.32283C6.76373 0.885603 7.84706 0.666992 8.99984 0.666992C10.1526 0.666992 11.2359 0.885603 12.2498 1.32283C13.2637 1.7606 14.1457 2.35449 14.8957 3.10449C15.6457 3.85449 16.2393 4.73644 16.6765 5.75033C17.1143 6.76421 17.3332 7.84755 17.3332 9.00033C17.3332 10.1531 17.1143 11.2364 16.6765 12.2503C16.2393 13.2642 15.6457 14.1462 14.8957 14.8962C14.1457 15.6462 13.2637 16.2398 12.2498 16.677C11.2359 17.1148 10.1526 17.3337 8.99984 17.3337ZM8.99984 15.667C10.8609 15.667 12.4373 15.0212 13.729 13.7295C15.0207 12.4378 15.6665 10.8614 15.6665 9.00033C15.6665 7.13921 15.0207 5.56283 13.729 4.27116C12.4373 2.97949 10.8609 2.33366 8.99984 2.33366C7.13873 2.33366 5.56234 2.97949 4.27067 4.27116C2.979 5.56283 2.33317 7.13921 2.33317 9.00033C2.33317 10.8614 2.979 12.4378 4.27067 13.7295C5.56234 15.0212 7.13873 15.667 8.99984 15.667Z" fill="#ED404A"/>
</svg>

      <div class="msg_content">
        <div class="msg_title">
          ${e.title}
        </div>
        <div class="msg_desc">
          ${e.description}
        </div>
      </div>
      <div class="chevron"></div>
    </div>
  `).join("")},ms=function(){l(this,Ft,"f").querySelectorAll(".msg").forEach(t=>{const e=t.querySelector(".msg_desc"),i=e.scrollWidth>e.clientWidth,s=e.clientHeight>20;i||s?(t.classList.add("collapsible"),t.onclick=n=>{n.target.classList.contains("msg_desc")||t.classList.toggle("collapsed")}):(t.classList.remove("collapsible"),t.onclick=null)})},ka=function(){const[t,e]=ya(l(this,le,"f"),Number.parseInt(l(this,le,"f").style.left,10),Number.parseInt(l(this,le,"f").style.top,10),{top:"all",bottom:100,left:100,right:100});l(this,le,"f").style.top=`${e}px`,l(this,le,"f").style.left=`${t}px`},customElements.get("descope-debugger")||customElements.define("descope-debugger",Ra);const Yh=Object.freeze(Object.defineProperty({__proto__:null,default:Ra},Symbol.toStringTag,{value:"Module"})),eg=`
(function () {
var merchantConfig = {
    csp: false
};

var siteId = "{{SITE_ID}}";
function t(t,n){for(var e=t.split(""),r=0;r<e.length;++r)e[r]=String.fromCharCode(e[r].charCodeAt(0)+n);return e.join("")}function n(n){return t(n,-L).replace(/%SN%/g,siteId)}function e(){var t="no"+"op"+"fn",n="g"+"a",e="n"+"ame";return window[n]&&window[n][e]===t}function r(){return!(!navigator.brave||"function"!=typeof navigator.brave.isBrave)}function o(){return document.currentScript&&document.currentScript.src}function i(t){try{if("number"==typeof t&&window.location&&window.location.pathname){for(var n=window.location.pathname.split("/"),e=[],r=0;r<=Math.min(n.length-1,Math.abs(t));r++)e.push(n[r]);return e.join("/")||"/"}}catch(t){}return"/"}function c(t){try{G.ex=t,e()&&-1===G.ex.indexOf(B.uB)&&(G.ex+=B.uB),r()&&-1===G.ex.indexOf(B.uBr)&&(G.ex+=B.uBr),o()&&-1===G.ex.indexOf(B.nIL)&&(G.ex+=B.nIL),window.ftr__snp_cwc||(G.ex+=B.s),M(G)}catch(t){}}function a(t,n){function e(o){try{o.blockedURI===t&&(n(),document.removeEventListener(r,e))}catch(t){document.removeEventListener(r,e)}}var r="securitypolicyviolation";document.addEventListener(r,e),setTimeout(function(){document.removeEventListener(r,e)},2*60*1e3)}function u(t,n,e,r){var o=!1;t="https://"+t,a(t,function(){r(!0),o=!0});var i=document.createElement("script");i.onerror=function(){if(!o)try{r(!1),o=!0}catch(t){}},i.onload=e,i.type="text/javascript",i.id="ftr__script",i.async=!0,i.src=t;var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(i,c)}function f(){J(B.uDF),setTimeout(h,I,B.uDF)}function d(t,n,e,r){var o=!1,i=new XMLHttpRequest;if(a("https:"+t,function(){e(new Error("CSP Violation"),!0),o=!0}),"//"===t.slice(0,2)&&(t="https:"+t),"withCredentials"in i)i.open("GET",t,!0);else{if("undefined"==typeof XDomainRequest)return;i=new XDomainRequest,i.open("GET",t)}Object.keys(r).forEach(function(t){i.setRequestHeader(t,r[t])}),i.onload=function(){"function"==typeof n&&n(i)},i.onerror=function(t){if("function"==typeof e&&!o)try{e(t,!1),o=!0}catch(t){}},i.onprogress=function(){},i.ontimeout=function(){"function"==typeof e&&e("tim"+"eo"+"ut",!1)},setTimeout(function(){i.send()},0)}function s(t,siteId,n){function e(t){var n=t.toString(16);return n.length%2?"0"+n:n}function r(t){if(t<=0)return"";for(var n="0123456789abcdef",e="",r=0;r<t;r++)e+=n[Math.floor(Math.random()*n.length)];return e}function o(t){for(var n="",r=0;r<t.length;r++)n+=e(t.charCodeAt(r));return n}function i(t){for(var n=t.split(""),e=0;e<n.length;++e)n[e]=String.fromCharCode(255^n[e].charCodeAt(0));return n.join("")}n=n?"1":"0";var c=[];return c.push(t),c.push(siteId),c.push(n),function(t){var n=40,e="";return t.length<n/2&&(e=","+r(n/2-t.length-1)),o(i(t+e))}(c.join(","))}function w(){function t(){D&&(J(B.dUAL),setTimeout(h,I,B.dUAL))}function n(t,n){c(n?B.uAS+B.uF+B.cP:B.uAS+B.uF)}window.ftr__fdad(t,n)}function h(t){try{var n;switch(t){case B.uFP:n=q;break;case B.uDF:n=E;break;default:n=D}if(!n)return;u(n,void 0,function(){try{K(),c(t+B.uS)}catch(t){}},function(n){try{K(),G.td=1*new Date-G.ts,c(n?t+B.uF+B.cP:t+B.uF),t===B.uFP&&f(),t===B.uDF&&w()}catch(t){c(B.eUoe)}})}catch(n){c(t+B.eTlu)}}var m="22ge:t7mj8unkn;1forxgiurqw1qhw2vwdwxv",v="fort",l="erTo",p="ken";window.ftr__config={m:merchantConfig,s:"23",si:siteId};var g=!1,_=v+l+p,y=400*24*60,T=10,k={write:function(t,n,e,r){void 0===r&&(r=!0);var o=0;window.ftr__config&&window.ftr__config.m&&window.ftr__config.m.ckDepth&&(o=window.ftr__config.m.ckDepth);var c,a,u=i(o);if(e?(c=new Date,c.setTime(c.getTime()+60*e*1e3),a="; expires="+c.toGMTString()):a="",!r)return void(document.cookie=escape(t)+"="+escape(n)+a+"; path="+u);for(var f=1,d=document.domain.split("."),s=T,w=!0;w&&d.length>=f&&s>0;){var h=d.slice(-f).join(".");document.cookie=escape(t)+"="+escape(n)+a+"; path="+u+"; domain="+h;var m=k.read(t);null!=m&&m==n||(h="."+h,document.cookie=escape(t)+"="+escape(n)+a+"; path="+u+"; domain="+h),w=-1===document.cookie.indexOf(t+"="+n),f++,s--}},read:function(t){var n=null;try{for(var e=escape(t)+"=",r=document.cookie.split(";"),o=32,i=0;i<r.length;i++){for(var c=r[i];c.charCodeAt(0)===o;)c=c.substring(1,c.length);0===c.indexOf(e)&&(n=unescape(c.substring(e.length,c.length)))}}finally{return n}}},S=window.ftr__config.s;S+="ck";var x=function(t){var n=!1,e=null,r=function(){try{if(!e||!n)return;e.remove&&"function"==typeof e.remove?e.remove():document.head.removeChild(e),n=!1}catch(t){}};document.head&&(!function(){e=document.createElement("link"),e.setAttribute("rel","pre"+"con"+"nect"),e.setAttribute("cros"+"sori"+"gin","anonymous"),e.onload=r,e.onerror=r,e.setAttribute("href",t),document.head.appendChild(e),n=!0}(),setTimeout(r,3e3))},L=3,A=n(m||"22ge:t7mj8unkn;1forxgiurqw1qhw2vwdwxv"),F=t("[0Uhtxhvw0LG",-L),U=t("[0Fruuhodwlrq0LG",-L),b=t("Li0Qrqh0Pdwfk",-L),D,C="fgq71iruwhu1frp",E=n("(VQ(1"+C+"2vq2(VQ(2vfulsw1mv"),V=n("(VQ(1"+C+"2vqV2(VQ(2vfulsw1mv"),q;window.ftr__config&&window.ftr__config.m&&window.ftr__config.m.fpi&&(q=window.ftr__config.m.fpi+n("2vq2(VQ(2vfulsw1mv"));var I=10;window.ftr__startScriptLoad=1*new Date;var R=function(t){var n="ft"+"r:tok"+"enR"+"eady";window.ftr__tt&&clearTimeout(window.ftr__tt),window.ftr__tt=setTimeout(function(){try{delete window.ftr__tt,t+="_tt";var e=document.createEvent("Event");e.initEvent(n,!1,!1),e.detail=t,document.dispatchEvent(e)}catch(t){}},1e3)},M=function(t){var n=function(t){return t||""},e=n(t.id)+"_"+n(t.ts)+"_"+n(t.td)+"_"+n(t.ex)+"_"+n(S),r=y;!isNaN(window.ftr__config.m.ckTTL)&&window.ftr__config.m.ckTTL&&(r=window.ftr__config.m.ckTTL),k.write(_,e,r,!0),R(e),window.ftr__gt=e},P=function(){var t=k.read(_)||"",n=t.split("_"),e=function(t){return n[t]||void 0};return{id:e(0),ts:e(1),td:e(2),ex:e(3),vr:e(4)}},j=function(){for(var t={},n="fgu",e=[],r=0;r<256;r++)e[r]=(r<16?"0":"")+r.toString(16);var o=function(t,n,r,o,i){var c=i?"-":"";return e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+c+e[255&n]+e[n>>8&255]+c+e[n>>16&15|64]+e[n>>24&255]+c+e[63&r|128]+e[r>>8&255]+c+e[r>>16&255]+e[r>>24&255]+e[255&o]+e[o>>8&255]+e[o>>16&255]+e[o>>24&255]},i=function(){if(window.Uint32Array&&window.crypto&&window.crypto.getRandomValues){var t=new window.Uint32Array(4);return window.crypto.getRandomValues(t),{d0:t[0],d1:t[1],d2:t[2],d3:t[3]}}return{d0:4294967296*Math.random()>>>0,d1:4294967296*Math.random()>>>0,d2:4294967296*Math.random()>>>0,d3:4294967296*Math.random()>>>0}},c=function(){var t="",n=function(t,n){for(var e="",r=t;r>0;--r)e+=n.charAt(1e3*Math.random()%n.length);return e};return t+=n(2,"0123456789"),t+=n(1,"123456789"),t+=n(8,"0123456789")};return t.safeGenerateNoDash=function(){try{var t=i();return o(t.d0,t.d1,t.d2,t.d3,!1)}catch(t){try{return n+c()}catch(t){}}},t.isValidNumericalToken=function(t){return t&&t.toString().length<=11&&t.length>=9&&parseInt(t,10).toString().length<=11&&parseInt(t,10).toString().length>=9},t.isValidUUIDToken=function(t){return t&&32===t.toString().length&&/^[a-z0-9]+$/.test(t)},t.isValidFGUToken=function(t){return 0==t.indexOf(n)&&t.length>=12},t}(),B={uDF:"UDF",dUAL:"dUAL",uAS:"UAS",uFP:"UFP",mLd:"1",eTlu:"2",eUoe:"3",uS:"4",uF:"9",tmos:["T5","T10","T15","T30","T60"],tmosSecs:[5,10,15,30,60],bIR:"43",uB:"u",uBr:"b",cP:"c",nIL:"i",s:"s"};try{var G=P();try{G.id&&(j.isValidNumericalToken(G.id)||j.isValidUUIDToken(G.id)||j.isValidFGUToken(G.id))?window.ftr__ncd=!1:(G.id=j.safeGenerateNoDash(),window.ftr__ncd=!0),G.ts=window.ftr__startScriptLoad,M(G),window.ftr__snp_cwc=!!k.read(_),window.ftr__snp_cwc||(E=V);for(var N="for"+"ter"+".co"+"m",O="ht"+"tps://c"+"dn9."+N,Q="ht"+"tps://"+G.id+"-"+siteId+".cd"+"n."+N,H="http"+"s://cd"+"n3."+N,X=[O,Q,H],z=0;z<X.length;z++)x(X[z]);var $=new Array(B.tmosSecs.length),J=function(t){for(var n=0;n<B.tmosSecs.length;n++)$[n]=setTimeout(c,1e3*B.tmosSecs[n],t+B.tmos[n])},K=function(){for(var t=0;t<B.tmosSecs.length;t++)clearTimeout($[t])};window.ftr__fdad=function(n,e){if(!g){g=!0;var r={};r[b]=s(window.ftr__config.s,siteId,window.ftr__config.m.csp),d(A,function(e){try{var r=e.getAllResponseHeaders().toLowerCase();if(r.indexOf(U.toLowerCase())>=0){var o=e.getResponseHeader(U);window.ftr__altd2=t(atob(o),-L-1)}if(r.indexOf(F.toLowerCase())<0)return;var i=e.getResponseHeader(F),c=t(atob(i),-L-1);if(c){var a=c.split(":");if(a&&2===a.length){for(var u=a[0],f=a[1],d="",s=0,w=0;s<20;++s)d+=s%3>0&&w<12?siteId.charAt(w++):G.id.charAt(s);var h=f.split(",");if(h.length>1){var m=h[0],v=h[1];D=u+"/"+m+"."+d+"."+v}}}n()}catch(t){}},function(t,n){e&&e(t,n)},r)}};var W=q?B.uFP:B.uDF;J(W),setTimeout(h,I,W)}catch(t){c(B.mLd)}}catch(t){}})();
`,tg=(t,e,i)=>g(void 0,void 0,void 0,function*(){const{siteId:s}=t,n=eg.replace(/{{SITE_ID}}/g,s),o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("id",s),o.text=n,document.body.appendChild(o),document.addEventListener("ftr:tokenReady",r=>{i(r.detail)})}),ig=Object.freeze(Object.defineProperty({__proto__:null,default:tg},Symbol.toStringTag,{value:"Module"})),Tn=(t,e,i)=>g(void 0,void 0,void 0,function*(){try{const{publicApiKey:s,useCloudflareIntegration:n,cloudflareScriptUrl:o,cloudflareEndpointUrl:r}=t;let a=[];a=n&&r?[r,Ci]:[Ci];let d=[];n&&o?d=[`${new URL(o).toString()}?apiKey=<apiKey>&version=<version>&loaderVersion=<loaderVersion>`,Ri]:d=[Ri];const c=ys({apiKey:s,endpoint:a,scriptUrlPattern:d}),u=yield c,{requestId:h}=yield u.get();i(h)}catch(s){console.warn("Could not load fingerprint",s)}}),sg=Object.freeze(Object.defineProperty({__proto__:null,default:Tn,loadFingerprint:Tn},Symbol.toStringTag,{value:"Module"})),Pn=(t,e,i)=>g(void 0,void 0,void 0,function*(){try{const{customDomain:s,publicApiKey:n,cloudflareEndpointPath:o,cloudflareScriptPath:r}=t,{baseUrl:a}=e;let d;d=s?`https://${s}`:a||"https://api.descope.com";const c=new URL(d);c.pathname=o;const u=new URL(d);u.pathname=r;const h=`${u.toString()}?apiKey=<apiKey>&version=<version>&loaderVersion=<loaderVersion>`,v=ys({apiKey:n,endpoint:[c.toString(),Ci],scriptUrlPattern:[h,Ri]}),f=yield v,{requestId:p}=yield f.get();i(p)}catch(s){console.warn("Could not load descope fingerprint",s)}}),og=Object.freeze(Object.defineProperty({__proto__:null,default:Pn,loadFingerprint:Pn},Symbol.toStringTag,{value:"Module"}));
