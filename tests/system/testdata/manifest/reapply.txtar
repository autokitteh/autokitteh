ak manifest apply manifest.yaml
return code == 0
output equals file first.txt

ak var set shhh hiss -p my_project --secret
return code == 0

ak manifest apply manifest.yaml
return code == 0
output equals file second.txt

ak manifest apply manifest.yaml --overwrite-secrets
return code == 0
output equals file third.txt

-- manifest.yaml --
version: v1

project:
  name: my_project
  display_name: My Telepathy Project
  vars:
    - name: v
      value: initial_value
      description: Initial project variable
    - name: shhh
      value: ""
      secret: true

-- first.txt --
[plan] project "my_project": not found, will create
[plan] var "my_project/v": not found, will set
[plan] var "my_project/shhh": not found, will set
[exec] create_project "my_project": prj_00000000000000000000000001 created
[exec] set_var "my_project/v": prj_00000000000000000000000001 updated
[exec] set_var "my_project/shhh": prj_00000000000000000000000001 updated

-- second.txt --
[plan] project "my_project": found, id="prj_00000000000000000000000001"
[plan] project "my_project": no changes needed
[plan] var "my_project/shhh": value differs but one of them is secret is false, skipping
[plan] project "my_project": found 0 connections
[plan] project "my_project": found 0 triggers

-- third.txt --
[plan] project "my_project": found, id="prj_00000000000000000000000001"
[plan] project "my_project": no changes needed
[plan] var "my_project/shhh": differs, will set
[plan] project "my_project": found 0 connections
[plan] project "my_project": found 0 triggers
[exec] set_var "my_project/shhh": prj_00000000000000000000000001 updated
